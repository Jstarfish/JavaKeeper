{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[249],{795:function(t,a,s){\"use strict\";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"blockquote\",[s(\"p\",[t._v(\"ç‚¹èµ+æ”¶è— å°±å­¦ä¼šç³»åˆ—ï¼Œæ–‡ç« æ”¶å½•åœ¨ GitHub \"),s(\"a\",{attrs:{href:\"https://github.com/Jstarfish/JavaKeeper\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"JavaKeeper\"),s(\"OutboundLink\")],1),t._v(\" ï¼ŒNçº¿äº’è”ç½‘å¼€å‘å¿…å¤‡æŠ€èƒ½å…µå™¨è°±ï¼Œç¬”è®°è‡ªå–\")])]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://img.starfish.ink/jvm/oom.png\",alt:\"oom\"}})]),t._v(\" \"),s(\"p\",[t._v(\"åœ¨ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šé‡Œï¼Œé™¤äº†ç¨‹åºè®¡æ•°å™¨å¤–ï¼Œè™šæ‹Ÿæœºå†…å­˜çš„å…¶ä»–å‡ ä¸ªè¿è¡Œæ—¶åŒºåŸŸéƒ½æœ‰å‘ç”Ÿ OutOfMemoryError å¼‚å¸¸çš„å¯èƒ½ã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"æœ¬ç¯‡ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹ OOM çš„ä»‹ç»å’Œç¤ºä¾‹ï¼š\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"java.lang.StackOverflowError\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryError: Java heap space\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryError: GC overhead limit exceeded\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryError--\\x3eMetaspace\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryError: Direct buffer memory\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryError: unable to create new native thread\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryErrorï¼šMetaspace\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryError: Requested array size exceeds VM limit\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryError: Out of swap space\")]),t._v(\" \"),s(\"li\",[t._v(\"java.lang.OutOfMemoryErrorï¼šKill process or sacrifice child\")])]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"æˆ‘ä»¬å¸¸è¯´çš„ OOM å¼‚å¸¸ï¼Œå…¶å®æ˜¯ Error\")])]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://img.starfish.ink/jvm/error-oom.png\",alt:\"error-oom\"}})]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ä¸€-stackoverflowerror\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ä¸€-stackoverflowerror\"}},[t._v(\"#\")]),t._v(\" ä¸€. StackOverflowError\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_1-1-å†™ä¸ª-bug\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-1-å†™ä¸ª-bug\"}},[t._v(\"#\")]),t._v(\" 1.1 å†™ä¸ª bug\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"StackOverflowErrorDemo\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" args\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"javaKeeper\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"private\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"javaKeeper\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"javaKeeper\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"p\",[t._v(\"ä¸Šä¸€ç¯‡è¯¦ç»†çš„ä»‹ç»è¿‡\"),s(\"a\",{attrs:{href:\"https://mp.weixin.qq.com/s/jPIHNsQwiYNCRUQt1qXR6Q\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"JVM è¿è¡Œæ—¶æ•°æ®åŒº\"),s(\"OutboundLink\")],1),t._v(\"ï¼ŒJVM è™šæ‹Ÿæœºæ ˆæ˜¯æœ‰æ·±åº¦çš„ï¼Œåœ¨æ‰§è¡Œæ–¹æ³•çš„æ—¶å€™ä¼šä¼´éšç€å…¥æ ˆå’Œå‡ºæ ˆï¼Œä¸Šè¾¹çš„æ–¹æ³•å¯ä»¥çœ‹åˆ°ï¼Œmain æ–¹æ³•æ‰§è¡Œåä¸åœçš„é€’å½’ï¼Œè¿Ÿæ—©æŠŠæ ˆæ’‘çˆ†äº†\")]),t._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v('Exception in thread \"main\" java.lang.StackOverflowError\\n\\tat oom.StackOverflowErrorDemo.javaKeeper(StackOverflowErrorDemo.java:15)\\n')])])]),s(\"p\",[s(\"img\",{attrs:{src:\"https://i02piccdn.sogoucdn.com/b334c2faa77a5e03\",alt:\"\"}})]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_1-2-åŸå› åˆ†æ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-2-åŸå› åˆ†æ\"}},[t._v(\"#\")]),t._v(\" 1.2 åŸå› åˆ†æ\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"æ— é™é€’å½’å¾ªç¯è°ƒç”¨ï¼ˆæœ€å¸¸è§åŸå› ï¼‰ï¼Œè¦æ—¶åˆ»æ³¨æ„ä»£ç ä¸­æ˜¯å¦æœ‰äº†å¾ªç¯è°ƒç”¨æ–¹æ³•è€Œæ— æ³•é€€å‡ºçš„æƒ…å†µ\")]),t._v(\" \"),s(\"li\",[t._v(\"æ‰§è¡Œäº†å¤§é‡æ–¹æ³•ï¼Œå¯¼è‡´çº¿ç¨‹æ ˆç©ºé—´è€—å°½\")]),t._v(\" \"),s(\"li\",[t._v(\"æ–¹æ³•å†…å£°æ˜äº†æµ·é‡çš„å±€éƒ¨å˜é‡\")]),t._v(\" \"),s(\"li\",[t._v(\"native ä»£ç æœ‰æ ˆä¸Šåˆ†é…çš„é€»è¾‘ï¼Œå¹¶ä¸”è¦æ±‚çš„å†…å­˜è¿˜ä¸å°ï¼Œæ¯”å¦‚ java.net.SocketInputStream.read0 ä¼šåœ¨æ ˆä¸Šè¦æ±‚åˆ†é…ä¸€ä¸ª 64KB çš„ç¼“å­˜ï¼ˆ64ä½ Linuxï¼‰\")])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_1-3-è§£å†³æ–¹æ¡ˆ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-3-è§£å†³æ–¹æ¡ˆ\"}},[t._v(\"#\")]),t._v(\" 1.3 è§£å†³æ–¹æ¡ˆ\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"ä¿®å¤å¼•å‘æ— é™é€’å½’è°ƒç”¨çš„å¼‚å¸¸ä»£ç ï¼Œ é€šè¿‡ç¨‹åºæŠ›å‡ºçš„å¼‚å¸¸å †æ ˆï¼Œæ‰¾å‡ºä¸æ–­é‡å¤çš„ä»£ç è¡Œï¼ŒæŒ‰å›¾ç´¢éª¥ï¼Œä¿®å¤æ— é™é€’å½’ Bug\")]),t._v(\" \"),s(\"li\",[t._v(\"æ’æŸ¥æ˜¯å¦å­˜åœ¨ç±»ä¹‹é—´çš„å¾ªç¯ä¾èµ–ï¼ˆå½“ä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ï¼Œåœ¨è°ƒç”¨toStringæ–¹æ³•æ—¶ä¹Ÿä¼šäº§ç”Ÿè¿™ä¸ªå¼‚å¸¸ï¼‰\")]),t._v(\" \"),s(\"li\",[t._v(\"é€šè¿‡ JVM å¯åŠ¨å‚æ•° \"),s(\"code\",[t._v(\"-Xss\")]),t._v(\" å¢åŠ çº¿ç¨‹æ ˆå†…å­˜ç©ºé—´ï¼Œ æŸäº›æ­£å¸¸ä½¿ç”¨åœºæ™¯éœ€è¦æ‰§è¡Œå¤§é‡æ–¹æ³•æˆ–åŒ…å«å¤§é‡å±€éƒ¨å˜é‡ï¼Œè¿™æ—¶å¯ä»¥é€‚å½“åœ°æé«˜çº¿ç¨‹æ ˆç©ºé—´é™åˆ¶\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"äºŒ-java-heap-space\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#äºŒ-java-heap-space\"}},[t._v(\"#\")]),t._v(\" äºŒ. Java heap space\")]),t._v(\" \"),s(\"p\",[t._v(\"Java å †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼Œæˆ‘ä»¬åªè¦ä¸æ–­çš„åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯ GC Roots åˆ°å¯¹è±¡ä¹‹é—´æœ‰å¯è¾¾è·¯å¾„æ¥é¿å… GC æ¸…é™¤è¿™äº›å¯¹è±¡ï¼Œé‚£éšç€å¯¹è±¡æ•°é‡çš„å¢åŠ ï¼Œæ€»å®¹é‡è§¦åŠå †çš„æœ€å¤§å®¹é‡é™åˆ¶åå°±ä¼šäº§ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"Java å †å†…å­˜çš„ OOM å¼‚å¸¸æ˜¯å®é™…åº”ç”¨ä¸­æœ€å¸¸è§çš„å†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_2-1-å†™ä¸ª-bug\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-1-å†™ä¸ª-bug\"}},[t._v(\"#\")]),t._v(\" 2.1 å†™ä¸ª bug\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n * JVMå‚æ•°ï¼š-Xmx12m\\n */\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"JavaHeapSpaceDemo\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"final\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"int\")]),t._v(\" SIZE \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1024\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1024\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" a\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"int\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"int\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"SIZE\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"p\",[t._v(\"ä»£ç è¯•å›¾åˆ†é…å®¹é‡ä¸º 2M çš„ int æ•°ç»„ï¼Œå¦‚æœæŒ‡å®šå¯åŠ¨å‚æ•° \"),s(\"code\",[t._v(\"-Xmx12m\")]),t._v(\"ï¼Œåˆ†é…å†…å­˜å°±ä¸å¤Ÿç”¨ï¼Œå°±ç±»ä¼¼äºå°† XXXL å·çš„å¯¹è±¡ï¼Œå¾€ S å·çš„ Java heap space é‡Œé¢å¡ã€‚\")]),t._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v('Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\\n\\tat oom.JavaHeapSpaceDemo.main(JavaHeapSpaceDemo.java:13)\\n')])])]),s(\"h3\",{attrs:{id:\"_2-2-åŸå› åˆ†æ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-2-åŸå› åˆ†æ\"}},[t._v(\"#\")]),t._v(\" 2.2 åŸå› åˆ†æ\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"è¯·æ±‚åˆ›å»ºä¸€ä¸ªè¶…å¤§å¯¹è±¡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¤§æ•°ç»„\")]),t._v(\" \"),s(\"li\",[t._v(\"è¶…å‡ºé¢„æœŸçš„è®¿é—®é‡/æ•°æ®é‡ï¼Œé€šå¸¸æ˜¯ä¸Šæ¸¸ç³»ç»Ÿè¯·æ±‚æµé‡é£™å‡ï¼Œå¸¸è§äºå„ç±»ä¿ƒé”€/ç§’æ€æ´»åŠ¨ï¼Œå¯ä»¥ç»“åˆä¸šåŠ¡æµé‡æŒ‡æ ‡æ’æŸ¥æ˜¯å¦æœ‰å°–çŠ¶å³°å€¼\")]),t._v(\" \"),s(\"li\",[t._v(\"è¿‡åº¦ä½¿ç”¨ç»ˆç»“å™¨ï¼ˆFinalizerï¼‰ï¼Œè¯¥å¯¹è±¡æ²¡æœ‰ç«‹å³è¢« GC\")]),t._v(\" \"),s(\"li\",[t._v(\"å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰ï¼Œå¤§é‡å¯¹è±¡å¼•ç”¨æ²¡æœ‰é‡Šæ”¾ï¼ŒJVM æ— æ³•å¯¹å…¶è‡ªåŠ¨å›æ”¶ï¼Œå¸¸è§äºä½¿ç”¨äº† File ç­‰èµ„æºæ²¡æœ‰å›æ”¶\")])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_2-3-è§£å†³æ–¹æ¡ˆ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-3-è§£å†³æ–¹æ¡ˆ\"}},[t._v(\"#\")]),t._v(\" 2.3 è§£å†³æ–¹æ¡ˆ\")]),t._v(\" \"),s(\"p\",[t._v(\"é’ˆå¯¹å¤§éƒ¨åˆ†æƒ…å†µï¼Œé€šå¸¸åªéœ€è¦é€šè¿‡ \"),s(\"code\",[t._v(\"-Xmx\")]),t._v(\" å‚æ•°è°ƒé«˜ JVM å †å†…å­˜ç©ºé—´å³å¯ã€‚å¦‚æœä»ç„¶æ²¡æœ‰è§£å†³ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æƒ…å†µåšè¿›ä¸€æ­¥å¤„ç†ï¼š\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"å¦‚æœæ˜¯è¶…å¤§å¯¹è±¡ï¼Œå¯ä»¥æ£€æŸ¥å…¶åˆç†æ€§ï¼Œæ¯”å¦‚æ˜¯å¦ä¸€æ¬¡æ€§æŸ¥è¯¢äº†æ•°æ®åº“å…¨éƒ¨ç»“æœï¼Œè€Œæ²¡æœ‰åšç»“æœæ•°é™åˆ¶\")]),t._v(\" \"),s(\"li\",[t._v(\"å¦‚æœæ˜¯ä¸šåŠ¡å³°å€¼å‹åŠ›ï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ æœºå™¨èµ„æºï¼Œæˆ–è€…åšé™æµé™çº§ã€‚\")]),t._v(\" \"),s(\"li\",[t._v(\"å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œéœ€è¦æ‰¾åˆ°æŒæœ‰çš„å¯¹è±¡ï¼Œä¿®æ”¹ä»£ç è®¾è®¡ï¼Œæ¯”å¦‚å…³é—­æ²¡æœ‰é‡Šæ”¾çš„è¿æ¥\")])]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://i03piccdn.sogoucdn.com/1b2bed506484c61d\",alt:\"img\"}})]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"é¢è¯•å®˜ï¼šè¯´è¯´å†…å­˜æ³„éœ²å’Œå†…å­˜æº¢å‡º\")])]),t._v(\" \"),s(\"p\",[t._v(\"åŠ é€ä¸ªçŸ¥è¯†ç‚¹ï¼Œä¸‰è¿çš„ç»ˆå°†æˆä¸ºå¤§ç¥~~\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"å†…å­˜æ³„éœ²å’Œå†…å­˜æº¢å‡º\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#å†…å­˜æ³„éœ²å’Œå†…å­˜æº¢å‡º\"}},[t._v(\"#\")]),t._v(\" å†…å­˜æ³„éœ²å’Œå†…å­˜æº¢å‡º\")]),t._v(\" \"),s(\"p\",[t._v(\"å†…å­˜æº¢å‡º(out of memory)ï¼Œæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ä¾›å…¶ä½¿ç”¨ï¼Œå‡ºç° out of memoryï¼›æ¯”å¦‚ç”³è¯·äº†ä¸€ä¸ª Integerï¼Œä½†ç»™å®ƒå­˜äº† Long æ‰èƒ½å­˜ä¸‹çš„æ•°ï¼Œé‚£å°±æ˜¯å†…å­˜æº¢å‡ºã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"å†…å­˜æ³„éœ²( memory leak)ï¼Œæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜åï¼Œæ— æ³•é‡Šæ”¾å·²ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼Œä¸€æ¬¡å†…å­˜æ³„éœ²å±å®³å¯ä»¥å¿½ç•¥ï¼Œä½†å†…å­˜æ³„éœ²å †ç§¯åæœå¾ˆä¸¥é‡ï¼Œæ— è®ºå¤šå°‘å†…å­˜ï¼Œè¿Ÿæ—©ä¼šè¢«å å…‰ã€‚\")]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"memory leak æœ€ç»ˆä¼šå¯¼è‡´ out of memoryï¼\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ä¸‰ã€gc-overhead-limit-exceeded\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ä¸‰ã€gc-overhead-limit-exceeded\"}},[t._v(\"#\")]),t._v(\" ä¸‰ã€GC overhead limit exceeded\")]),t._v(\" \"),s(\"p\",[t._v(\"JVM å†…ç½®äº†åƒåœ¾å›æ”¶æœºåˆ¶ GCï¼Œæ‰€ä»¥ä½œä¸º Javaer çš„æˆ‘ä»¬ä¸éœ€è¦æ‰‹å·¥ç¼–å†™ä»£ç æ¥è¿›è¡Œå†…å­˜åˆ†é…å’Œé‡Šæ”¾ï¼Œä½†æ˜¯å½“ Java è¿›ç¨‹èŠ±è´¹ 98% ä»¥ä¸Šçš„æ—¶é—´æ‰§è¡Œ GCï¼Œä½†åªæ¢å¤äº†ä¸åˆ° 2% çš„å†…å­˜ï¼Œä¸”è¯¥åŠ¨ä½œè¿ç»­é‡å¤äº† 5 æ¬¡ï¼Œå°±ä¼šæŠ›å‡º \"),s(\"code\",[t._v(\"java.lang.OutOfMemoryError:GC overhead limit exceeded\")]),t._v(\" é”™è¯¯ï¼ˆ\"),s(\"strong\",[t._v(\"ä¿—ç§°ï¼šåƒåœ¾å›æ”¶ä¸Šå¤´\")]),t._v(\"ï¼‰ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯åº”ç”¨ç¨‹åºå·²ç»åŸºæœ¬è€—å°½äº†æ‰€æœ‰å¯ç”¨å†…å­˜ï¼Œ GC ä¹Ÿæ— æ³•å›æ”¶ã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"å‡å¦‚ä¸æŠ›å‡º \"),s(\"code\",[t._v(\"GC overhead limit exceeded\")]),t._v(\" é”™è¯¯ï¼Œé‚£ GC æ¸…ç†çš„é‚£ä¹ˆä¸€ä¸¢ä¸¢å†…å­˜å¾ˆå¿«å°±ä¼šè¢«å†æ¬¡å¡«æ»¡ï¼Œè¿«ä½¿ GC å†æ¬¡æ‰§è¡Œï¼Œè¿™æ ·æ¶æ€§å¾ªç¯ï¼ŒCPU ä½¿ç”¨ç‡ 100%ï¼Œè€Œ GC æ²¡ä»€ä¹ˆæ•ˆæœã€‚\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_3-1-å†™ä¸ª-bug\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-1-å†™ä¸ª-bug\"}},[t._v(\"#\")]),t._v(\" 3.1 å†™ä¸ª bug\")]),t._v(\" \"),s(\"p\",[t._v(\"å‡ºç°è¿™ä¸ªé”™è¯¯çš„å®ä¾‹ï¼Œå…¶å®æˆ‘ä»¬å†™ä¸ªæ— é™å¾ªç¯ï¼Œå¾€ List æˆ– Map åŠ æ•°æ®å°±ä¼šä¸€ç›´ Full GCï¼Œç›´åˆ°æ‰›ä¸ä½ï¼Œè¿™é‡Œç”¨ä¸€ä¸ªä¸å®¹æ˜“å‘ç°çš„æ —å­ã€‚æˆ‘ä»¬å¾€ map ä¸­æ·»åŠ  1000 ä¸ªå…ƒç´ ã€‚\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n * JVM å‚æ•°ï¼š -Xmx14m -XX:+PrintGCDetails\\n */\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"KeylessEntry\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Key\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Integer\")]),t._v(\" id\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Key\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Integer\")]),t._v(\" id\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"this\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"id \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" id\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"int\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"hashCode\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" id\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"hashCode\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" args\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Map\")]),t._v(\" m \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"HashMap\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"while\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"true\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"int\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1000\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" i\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"++\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!\")]),t._v(\"m\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"containsKey\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Key\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"i\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                    m\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"put\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Key\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"i\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Number:\"')]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\" i\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"System\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"out\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"m.size()=\"')]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\" m\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"size\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v('...\\nm.size()=54000\\nm.size()=55000\\nm.size()=56000\\nException in thread \"main\" java.lang.OutOfMemoryError: GC overhead limit exceeded\\n')])])]),s(\"p\",[t._v(\"ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„é™åˆ¶ 1000 æ¡æ•°æ®æ²¡æœ‰èµ·ä½œç”¨ï¼Œmap å®¹é‡è¿œè¶…è¿‡äº† 1000ï¼Œè€Œä¸”æœ€åä¹Ÿå‡ºç°äº†æˆ‘ä»¬æƒ³è¦çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºç±» Key åªé‡å†™äº† \"),s(\"code\",[t._v(\"hashCode()\")]),t._v(\" æ–¹æ³•ï¼Œå´æ²¡æœ‰é‡å†™ \"),s(\"code\",[t._v(\"equals()\")]),t._v(\" æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ \"),s(\"code\",[t._v(\"containsKey()\")]),t._v(\" æ–¹æ³•å…¶å®å°±å‡ºç°äº†é—®é¢˜ï¼Œäºæ˜¯å°±ä¼šä¸€ç›´å¾€ HashMap ä¸­æ·»åŠ  Keyï¼Œç›´è‡³ GC éƒ½æ¸…ç†ä¸æ‰ã€‚\")]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"ğŸ§‘ğŸ»â€ğŸ’» é¢è¯•å®˜åˆæ¥äº†ï¼šè¯´ä¸€ä¸‹ HashMap åŸç†ä»¥åŠä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶å®ç° equals å’Œ hashcode\")])]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"æ‰§è¡Œè¿™ä¸ªç¨‹åºçš„æœ€ç»ˆé”™è¯¯ï¼Œå’Œ JVM é…ç½®ä¹Ÿä¼šæœ‰å…³ç³»ï¼Œå¦‚æœè®¾ç½®çš„å †å†…å­˜ç‰¹åˆ«å°ï¼Œä¼šç›´æ¥æŠ¥ \"),s(\"code\",[t._v(\"Java heap space\")]),t._v(\"ã€‚ç®—æ˜¯è¢«è¿™ä¸ªé”™è¯¯æˆªèƒ¡äº†ï¼Œæ‰€ä»¥æœ‰æ—¶ï¼Œåœ¨èµ„æºå—é™çš„æƒ…å†µä¸‹ï¼Œæ— æ³•å‡†ç¡®é¢„æµ‹ç¨‹åºä¼šæ­»äºå“ªç§å…·ä½“çš„åŸå› ã€‚\")])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_3-2-è§£å†³æ–¹æ¡ˆ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-2-è§£å†³æ–¹æ¡ˆ\"}},[t._v(\"#\")]),t._v(\" 3.2 è§£å†³æ–¹æ¡ˆ\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"æ·»åŠ  JVM å‚æ•° \"),s(\"code\",[t._v(\"-XX:-UseGCOverheadLimit\")]),t._v(\" ä¸æ¨èè¿™ä¹ˆå¹²ï¼Œæ²¡æœ‰çœŸæ­£è§£å†³é—®é¢˜ï¼Œåªæ˜¯å°†å¼‚å¸¸æ¨è¿Ÿ\")]),t._v(\" \"),s(\"li\",[t._v(\"æ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦æœ‰å¤§é‡çš„æ­»å¾ªç¯æˆ–æœ‰ä½¿ç”¨å¤§å†…å­˜çš„ä»£ç ï¼Œä¼˜åŒ–ä»£ç \")]),t._v(\" \"),s(\"li\",[t._v(\"dumpå†…å­˜åˆ†æï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨å†…å­˜æ³„éœ²ï¼Œå¦‚æœæ²¡æœ‰ï¼ŒåŠ å¤§å†…å­˜\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"å››ã€direct-buffer-memory\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#å››ã€direct-buffer-memory\"}},[t._v(\"#\")]),t._v(\" å››ã€Direct buffer memory\")]),t._v(\" \"),s(\"p\",[t._v(\"æˆ‘ä»¬ä½¿ç”¨ NIO çš„æ—¶å€™ç»å¸¸éœ€è¦ä½¿ç”¨ ByteBuffer æ¥è¯»å–æˆ–å†™å…¥æ•°æ®ï¼Œè¿™æ˜¯ä¸€ç§åŸºäº Channel(é€šé“) å’Œ Buffer(ç¼“å†²åŒº)çš„ I/O æ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †é‡Œé¢çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·åœ¨ä¸€äº›åœºæ™¯å°±é¿å…äº† Java å †å’Œ Native ä¸­æ¥å›å¤åˆ¶æ•°æ®ï¼Œæ‰€ä»¥æ€§èƒ½ä¼šæœ‰æ‰€æé«˜ã€‚\")]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"Java å…è®¸åº”ç”¨ç¨‹åºé€šè¿‡ Direct ByteBuffer ç›´æ¥è®¿é—®å †å¤–å†…å­˜ï¼Œè®¸å¤šé«˜æ€§èƒ½ç¨‹åºé€šè¿‡ Direct ByteBuffer ç»“åˆå†…å­˜æ˜ å°„æ–‡ä»¶ï¼ˆMemory Mapped Fileï¼‰å®ç°é«˜é€Ÿ IOã€‚\")])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_4-1-å†™ä¸ª-bug\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-1-å†™ä¸ª-bug\"}},[t._v(\"#\")]),t._v(\" 4.1 å†™ä¸ª bug\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"p\",[s(\"code\",[t._v(\"ByteBuffer.allocate(capability)\")]),t._v(\" æ˜¯åˆ†é… JVM å †å†…å­˜ï¼Œå±äº GC ç®¡è¾–èŒƒå›´ï¼Œéœ€è¦å†…å­˜æ‹·è´æ‰€ä»¥é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼›\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[s(\"code\",[t._v(\"ByteBuffer.allocateDirect(capability)\")]),t._v(\"æ˜¯åˆ†é… OS æœ¬åœ°å†…å­˜ï¼Œä¸å±äº GC ç®¡è¾–èŒƒå›´ï¼Œç”±äºä¸éœ€è¦å†…å­˜æ‹·è´æ‰€ä»¥é€Ÿåº¦ç›¸å¯¹è¾ƒå¿«ï¼›\")])])]),t._v(\" \"),s(\"p\",[t._v(\"å¦‚æœä¸æ–­åˆ†é…æœ¬åœ°å†…å­˜ï¼Œå †å†…å­˜å¾ˆå°‘ä½¿ç”¨ï¼Œé‚£ä¹ˆ JVM å°±ä¸éœ€è¦æ‰§è¡Œ GCï¼ŒDirectByteBuffer å¯¹è±¡å°±ä¸ä¼šè¢«å›æ”¶ï¼Œè¿™æ—¶è™½ç„¶å †å†…å­˜å……è¶³ï¼Œä½†æœ¬åœ°å†…å­˜å¯èƒ½å·²ç»ä¸å¤Ÿç”¨äº†ï¼Œå°±ä¼šå‡ºç° OOMï¼Œ\"),s(\"strong\",[t._v(\"æœ¬åœ°ç›´æ¥å†…å­˜æº¢å‡º\")]),t._v(\"ã€‚\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n *  VM Optionsï¼š-Xms10m,-Xmx10m,-XX:+PrintGCDetails -XX:MaxDirectMemorySize=5m\\n */\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"DirectBufferMemoryDemo\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" args\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"System\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"out\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"maxDirectMemory is:\"')]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\"sun\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"misc\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"VM\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"maxDirectMemory\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1024\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1024\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"MB\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//ByteBuffer buffer = ByteBuffer.allocate(6*1024*1024);\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"ByteBuffer\")]),t._v(\" buffer \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"ByteBuffer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"allocateDirect\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"6\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1024\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1024\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"p\",[t._v(\"æœ€å¤§ç›´æ¥å†…å­˜ï¼Œé»˜è®¤æ˜¯ç”µè„‘å†…å­˜çš„ 1/4ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾å°ç‚¹ï¼Œç„¶åä½¿ç”¨ç›´æ¥å†…å­˜è¶…è¿‡è¿™ä¸ªå€¼ï¼Œå°±ä¼šå‡ºç° OOMã€‚\")]),t._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v('maxDirectMemory is:5MB\\nException in thread \"main\" java.lang.OutOfMemoryError: Direct buffer memory\\n')])])]),s(\"h3\",{attrs:{id:\"_4-2-è§£å†³æ–¹æ¡ˆ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-2-è§£å†³æ–¹æ¡ˆ\"}},[t._v(\"#\")]),t._v(\" 4.2 è§£å†³æ–¹æ¡ˆ\")]),t._v(\" \"),s(\"ol\",[s(\"li\",[t._v(\"Java åªèƒ½é€šè¿‡ \"),s(\"code\",[t._v(\"ByteBuffer.allocateDirect\")]),t._v(\" æ–¹æ³•ä½¿ç”¨ Direct ByteBufferï¼Œå› æ­¤ï¼Œå¯ä»¥é€šè¿‡ Arthas ç­‰åœ¨çº¿è¯Šæ–­å·¥å…·æ‹¦æˆªè¯¥æ–¹æ³•è¿›è¡Œæ’æŸ¥\")]),t._v(\" \"),s(\"li\",[t._v(\"æ£€æŸ¥æ˜¯å¦ç›´æ¥æˆ–é—´æ¥ä½¿ç”¨äº† NIOï¼Œå¦‚ nettyï¼Œjetty ç­‰\")]),t._v(\" \"),s(\"li\",[t._v(\"é€šè¿‡å¯åŠ¨å‚æ•° \"),s(\"code\",[t._v(\"-XX:MaxDirectMemorySize\")]),t._v(\" è°ƒæ•´ Direct ByteBuffer çš„ä¸Šé™å€¼\")]),t._v(\" \"),s(\"li\",[t._v(\"æ£€æŸ¥ JVM å‚æ•°æ˜¯å¦æœ‰ \"),s(\"code\",[t._v(\"-XX:+DisableExplicitGC\")]),t._v(\" é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±å»æ‰ï¼Œå› ä¸ºè¯¥å‚æ•°ä¼šä½¿ \"),s(\"code\",[t._v(\"System.gc()\")]),t._v(\" å¤±æ•ˆ\")]),t._v(\" \"),s(\"li\",[t._v(\"æ£€æŸ¥å †å¤–å†…å­˜ä½¿ç”¨ä»£ç ï¼Œç¡®è®¤æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼ï¼›æˆ–è€…é€šè¿‡åå°„è°ƒç”¨ \"),s(\"code\",[t._v(\"sun.misc.Cleaner\")]),t._v(\" çš„ \"),s(\"code\",[t._v(\"clean()\")]),t._v(\" æ–¹æ³•æ¥ä¸»åŠ¨é‡Šæ”¾è¢« Direct ByteBuffer æŒæœ‰çš„å†…å­˜ç©ºé—´\")]),t._v(\" \"),s(\"li\",[t._v(\"å†…å­˜å®¹é‡ç¡®å®ä¸è¶³ï¼Œå‡çº§é…ç½®\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"äº”ã€unable-to-create-new-native-thread\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#äº”ã€unable-to-create-new-native-thread\"}},[t._v(\"#\")]),t._v(\" äº”ã€Unable to create new native thread\")]),t._v(\" \"),s(\"p\",[t._v(\"æ¯ä¸ª Java çº¿ç¨‹éƒ½éœ€è¦å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼Œå½“ JVM å‘åº•å±‚æ“ä½œç³»ç»Ÿè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„ native çº¿ç¨‹æ—¶ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„èµ„æºåˆ†é…å°±ä¼šæŠ¥æ­¤ç±»é”™è¯¯ã€‚\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_5-1-å†™ä¸ª-bug\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-1-å†™ä¸ª-bug\"}},[t._v(\"#\")]),t._v(\" 5.1 å†™ä¸ª bug\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" args\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"while\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"true\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Thread\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"try\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Thread\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"sleep\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Integer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"MAX_VALUE\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"catch\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"InterruptedException\")]),t._v(\" e\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"start\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v(\"Error occurred during initialization of VM\\njava.lang.OutOfMemoryError: unable to create new native thread\\n\")])])]),s(\"h3\",{attrs:{id:\"_5-2-åŸå› åˆ†æ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-2-åŸå› åˆ†æ\"}},[t._v(\"#\")]),t._v(\" 5.2 åŸå› åˆ†æ\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://img.starfish.ink/jvm/toomanythread.png\",alt:\"\"}})]),t._v(\" \"),s(\"p\",[t._v(\"JVM å‘ OS è¯·æ±‚åˆ›å»º native çº¿ç¨‹å¤±è´¥ï¼Œå°±ä¼šæŠ›å‡º \"),s(\"code\",[t._v(\"Unableto createnewnativethread\")]),t._v(\"ï¼Œå¸¸è§çš„åŸå› åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"çº¿ç¨‹æ•°è¶…è¿‡æ“ä½œç³»ç»Ÿæœ€å¤§çº¿ç¨‹æ•°é™åˆ¶ï¼ˆå’Œå¹³å°æœ‰å…³ï¼‰\")]),t._v(\" \"),s(\"li\",[t._v(\"çº¿ç¨‹æ•°è¶…è¿‡ kernel.pid_maxï¼ˆåªèƒ½é‡å¯ï¼‰\")]),t._v(\" \"),s(\"li\",[t._v(\"native å†…å­˜ä¸è¶³ï¼›è¯¥é—®é¢˜å‘ç”Ÿçš„å¸¸è§è¿‡ç¨‹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ æ­¥ï¼š\\n\"),s(\"ol\",[s(\"li\",[t._v(\"JVM å†…éƒ¨çš„åº”ç”¨ç¨‹åºè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„ Java çº¿ç¨‹ï¼›\")]),t._v(\" \"),s(\"li\",[t._v(\"JVM native æ–¹æ³•ä»£ç†äº†è¯¥æ¬¡è¯·æ±‚ï¼Œå¹¶å‘æ“ä½œç³»ç»Ÿè¯·æ±‚åˆ›å»ºä¸€ä¸ª native çº¿ç¨‹ï¼›\")]),t._v(\" \"),s(\"li\",[t._v(\"æ“ä½œç³»ç»Ÿå°è¯•åˆ›å»ºä¸€ä¸ªæ–°çš„ native çº¿ç¨‹ï¼Œå¹¶ä¸ºå…¶åˆ†é…å†…å­˜ï¼›\")]),t._v(\" \"),s(\"li\",[t._v(\"å¦‚æœæ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜å·²è€—å°½ï¼Œæˆ–æ˜¯å—åˆ° 32 ä½è¿›ç¨‹çš„åœ°å€ç©ºé—´é™åˆ¶ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šæ‹’ç»æœ¬æ¬¡ native å†…å­˜åˆ†é…ï¼›\")]),t._v(\" \"),s(\"li\",[t._v(\"JVM å°†æŠ›å‡º \"),s(\"code\",[t._v(\"java.lang.OutOfMemoryError:Unableto createnewnativethread\")]),t._v(\" é”™è¯¯ã€‚\")])])])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_5-3-è§£å†³æ–¹æ¡ˆ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-3-è§£å†³æ–¹æ¡ˆ\"}},[t._v(\"#\")]),t._v(\" 5.3 è§£å†³æ–¹æ¡ˆ\")]),t._v(\" \"),s(\"ol\",[s(\"li\",[t._v(\"æƒ³åŠæ³•é™ä½ç¨‹åºä¸­åˆ›å»ºçº¿ç¨‹çš„æ•°é‡ï¼Œåˆ†æåº”ç”¨æ˜¯å¦çœŸçš„éœ€è¦åˆ›å»ºè¿™ä¹ˆå¤šçº¿ç¨‹\")]),t._v(\" \"),s(\"li\",[t._v(\"å¦‚æœç¡®å®éœ€è¦åˆ›å»ºå¾ˆå¤šçº¿ç¨‹ï¼Œè°ƒé«˜ OS å±‚é¢çš„çº¿ç¨‹æœ€å¤§æ•°ï¼šæ‰§è¡Œ \"),s(\"code\",[t._v(\"ulimia-a\")]),t._v(\" æŸ¥çœ‹æœ€å¤§çº¿ç¨‹æ•°é™åˆ¶ï¼Œä½¿ç”¨ \"),s(\"code\",[t._v(\"ulimit-u xxx\")]),t._v(\" è°ƒæ•´æœ€å¤§çº¿ç¨‹æ•°é™åˆ¶\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"å…­ã€metaspace\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#å…­ã€metaspace\"}},[t._v(\"#\")]),t._v(\" å…­ã€Metaspace\")]),t._v(\" \"),s(\"p\",[t._v(\"JDK 1.8 ä¹‹å‰ä¼šå‡ºç° Permgen spaceï¼Œè¯¥é”™è¯¯è¡¨ç¤ºæ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰å·²ç”¨æ»¡ï¼Œé€šå¸¸æ˜¯å› ä¸ºåŠ è½½çš„ class æ•°ç›®å¤ªå¤šæˆ–ä½“ç§¯å¤ªå¤§ã€‚éšç€ 1.8 ä¸­æ°¸ä¹…ä»£çš„å–æ¶ˆï¼Œå°±ä¸ä¼šå‡ºç°è¿™ç§å¼‚å¸¸äº†ã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"Metaspace æ˜¯æ–¹æ³•åŒºåœ¨ HotSpot ä¸­çš„å®ç°ï¼Œå®ƒä¸æ°¸ä¹…ä»£æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œå…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºå†…å­˜ä¸­è€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œä½†æ˜¯æœ¬åœ°å†…å­˜ä¹Ÿæœ‰æ‰“æ»¡çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¹Ÿä¼šæœ‰å¼‚å¸¸ã€‚\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_6-1-å†™ä¸ª-bug\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-1-å†™ä¸ª-bug\"}},[t._v(\"#\")]),t._v(\" 6.1 å†™ä¸ª bug\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n * JVM Options: -XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m\\n */\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"MetaspaceOOMDemo\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" args\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"while\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"true\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Enhancer\")]),t._v(\" enhancer \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Enhancer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            enhancer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setSuperclass\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"MetaspaceOOMDemo\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            enhancer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setUseCache\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"false\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            enhancer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setCallback\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"MethodInterceptor\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"o\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" method\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" objects\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" methodProxy\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"->\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//åŠ¨æ€ä»£ç†åˆ›å»ºå¯¹è±¡\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" methodProxy\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"invokeSuper\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"o\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" objects\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            enhancer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"create\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"p\",[t._v(\"å€ŸåŠ© Spring çš„ GCLib å®ç°åŠ¨æ€åˆ›å»ºå¯¹è±¡\")]),t._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v('Exception in thread \"main\" org.springframework.cglib.core.CodeGenerationException: java.lang.OutOfMemoryError--\\x3eMetaspace\\n')])])]),s(\"h3\",{attrs:{id:\"_6-2-è§£å†³æ–¹æ¡ˆ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-2-è§£å†³æ–¹æ¡ˆ\"}},[t._v(\"#\")]),t._v(\" 6.2 è§£å†³æ–¹æ¡ˆ\")]),t._v(\" \"),s(\"p\",[t._v(\"æ–¹æ³•åŒºæº¢å‡ºä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„å†…å­˜æº¢å‡ºå¼‚å¸¸ï¼Œåœ¨ç»å¸¸è¿è¡Œæ—¶ç”Ÿæˆå¤§é‡åŠ¨æ€ç±»çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå°±åº”è¯¥ç‰¹åˆ«å…³æ³¨è¿™äº›ç±»çš„å›æ”¶æƒ…å†µã€‚è¿™ç±»åœºæ™¯é™¤äº†ä¸Šè¾¹çš„ GCLib å­—èŠ‚ç å¢å¼ºå’ŒåŠ¨æ€è¯­è¨€å¤–ï¼Œå¸¸è§çš„è¿˜æœ‰ï¼Œå¤§é‡ JSP æˆ–åŠ¨æ€äº§ç”Ÿ JSP  æ–‡ä»¶çš„åº”ç”¨ï¼ˆè¿œå¤æ—¶ä»£çš„ä¼ ç»Ÿè½¯ä»¶è¡Œä¸šå¯èƒ½ä¼šæœ‰ï¼‰ã€åŸºäº OSGi çš„åº”ç”¨ï¼ˆå³ä½¿åŒä¸€ä¸ªç±»æ–‡ä»¶ï¼Œè¢«ä¸åŒçš„åŠ è½½å™¨åŠ è½½ä¹Ÿä¼šè§†ä¸ºä¸åŒçš„ç±»ï¼‰ç­‰ã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"æ–¹æ³•åŒºåœ¨ JDK8 ä¸­ä¸€èˆ¬ä¸å¤ªå®¹æ˜“äº§ç”Ÿï¼ŒHotSpot æä¾›äº†ä¸€äº›å‚æ•°æ¥è®¾ç½®å…ƒç©ºé—´ï¼Œå¯ä»¥èµ·åˆ°é¢„é˜²ä½œç”¨\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"code\",[t._v(\"-XX:MaxMetaspaceSize\")]),t._v(\" è®¾ç½®å…ƒç©ºé—´æœ€å¤§å€¼ï¼Œé»˜è®¤æ˜¯ -1ï¼Œè¡¨ç¤ºä¸é™åˆ¶ï¼ˆè¿˜æ˜¯è¦å—æœ¬åœ°å†…å­˜å¤§å°é™åˆ¶çš„ï¼‰\")]),t._v(\" \"),s(\"li\",[s(\"code\",[t._v(\"-XX:MetaspaceSize\")]),t._v(\" æŒ‡å®šå…ƒç©ºé—´çš„åˆå§‹ç©ºé—´å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œè¾¾åˆ°è¯¥å€¼å°±ä¼šè§¦å‘ GC è¿›è¡Œç±»å‹å¸è½½ï¼ŒåŒæ—¶æ”¶é›†å™¨ä¼šå¯¹è¯¥å€¼è¿›è¡Œè°ƒæ•´\")]),t._v(\" \"),s(\"li\",[s(\"code\",[t._v(\"-XX:MinMetaspaceFreeRatio\")]),t._v(\" åœ¨ GC ä¹‹åæ§åˆ¶æœ€å°çš„å…ƒç©ºé—´å‰©ä½™å®¹é‡çš„ç™¾åˆ†æ¯”ï¼Œå¯å‡å°‘å› å…ƒç©ºé—´ä¸è¶³å¯¼è‡´çš„åƒåœ¾æ”¶é›†é¢‘ç‡ï¼Œç±»ä¼¼çš„è¿˜æœ‰ \"),s(\"code\",[t._v(\"MaxMetaspaceFreeRatio\")])])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ä¸ƒã€requested-array-size-exceeds-vm-limit\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ä¸ƒã€requested-array-size-exceeds-vm-limit\"}},[t._v(\"#\")]),t._v(\" ä¸ƒã€Requested array size exceeds VM limit\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_7-1-å†™ä¸ª-bug\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7-1-å†™ä¸ª-bug\"}},[t._v(\"#\")]),t._v(\" 7.1 å†™ä¸ª bug\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" args\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"int\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" arr \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"int\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Integer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"MAX_VALUE\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"p\",[t._v(\"è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œå»ºä¸ªè¶…çº§å¤§æ•°ç»„å°±ä¼šå‡ºç° OOMï¼Œä¸å¤šè¯´äº†\")]),t._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v('Exception in thread \"main\" java.lang.OutOfMemoryError: Requested array size exceeds VM limit\\n')])])]),s(\"p\",[t._v(\"JVM é™åˆ¶äº†æ•°ç»„çš„æœ€å¤§é•¿åº¦ï¼Œè¯¥é”™è¯¯è¡¨ç¤ºç¨‹åºè¯·æ±‚åˆ›å»ºçš„æ•°ç»„è¶…è¿‡æœ€å¤§é•¿åº¦é™åˆ¶ã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"JVM åœ¨ä¸ºæ•°ç»„åˆ†é…å†…å­˜å‰ï¼Œä¼šæ£€æŸ¥è¦åˆ†é…çš„æ•°æ®ç»“æ„åœ¨ç³»ç»Ÿä¸­æ˜¯å¦å¯å¯»å€ï¼Œé€šå¸¸ä¸º \"),s(\"code\",[t._v(\"Integer.MAX_VALUE-2\")]),t._v(\"ã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"æ­¤ç±»é—®é¢˜æ¯”è¾ƒç½•è§ï¼Œé€šå¸¸éœ€è¦æ£€æŸ¥ä»£ç ï¼Œç¡®è®¤ä¸šåŠ¡æ˜¯å¦éœ€è¦åˆ›å»ºå¦‚æ­¤å¤§çš„æ•°ç»„ï¼Œæ˜¯å¦å¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ªå—ï¼Œåˆ†æ‰¹æ‰§è¡Œã€‚\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"å…«ã€out-of-swap-space\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#å…«ã€out-of-swap-space\"}},[t._v(\"#\")]),t._v(\" å…«ã€Out of swap space\")]),t._v(\" \"),s(\"p\",[t._v(\"å¯åŠ¨ Java åº”ç”¨ç¨‹åºä¼šåˆ†é…æœ‰é™çš„å†…å­˜ã€‚æ­¤é™åˆ¶æ˜¯é€šè¿‡ \"),s(\"code\",[t._v(\"-Xmx\")]),t._v(\" å’Œå…¶ä»–ç±»ä¼¼çš„å¯åŠ¨å‚æ•°æŒ‡å®šçš„ã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"åœ¨ JVM è¯·æ±‚çš„æ€»å†…å­˜å¤§äºå¯ç”¨ç‰©ç†å†…å­˜çš„æƒ…å†µä¸‹ï¼Œæ“ä½œç³»ç»Ÿå¼€å§‹å°†å†…å®¹ä»å†…å­˜æ¢å‡ºåˆ°ç¡¬ç›˜é©±åŠ¨å™¨ã€‚\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://img.starfish.ink/jvm/swapspace.png\",alt:\"\"}})]),t._v(\" \"),s(\"p\",[t._v(\"è¯¥é”™è¯¯è¡¨ç¤ºæ‰€æœ‰å¯ç”¨çš„è™šæ‹Ÿå†…å­˜å·²è¢«è€—å°½ã€‚è™šæ‹Ÿå†…å­˜ï¼ˆVirtual Memoryï¼‰ç”±ç‰©ç†å†…å­˜ï¼ˆPhysical Memoryï¼‰å’Œäº¤æ¢ç©ºé—´ï¼ˆSwap Spaceï¼‰ä¸¤éƒ¨åˆ†ç»„æˆã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"è¿™ç§é”™è¯¯æ²¡è§è¿‡~~~\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://tva1.sinaimg.cn/large/007S8ZIlly1gggbg03x7ug308c08cgn0.gif\",alt:\"\"}})]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ä¹ã€kill-process-or-sacrifice-child\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ä¹ã€kill-process-or-sacrifice-child\"}},[t._v(\"#\")]),t._v(\" ä¹ã€Kill process or sacrifice child\")]),t._v(\" \"),s(\"p\",[t._v(\"æ“ä½œç³»ç»Ÿæ˜¯å»ºç«‹åœ¨æµç¨‹æ¦‚å¿µä¹‹ä¸Šçš„ã€‚è¿™äº›è¿›ç¨‹ç”±å‡ ä¸ªå†…æ ¸ä½œä¸šè´Ÿè´£ï¼Œå…¶ä¸­ä¸€ä¸ªåä¸ºâ€œ Out of memory Killerâ€ï¼Œå®ƒä¼šåœ¨å¯ç”¨å†…å­˜æä½çš„æƒ…å†µä¸‹â€œæ€æ­»â€ï¼ˆkillï¼‰æŸäº›è¿›ç¨‹ã€‚OOM Killer ä¼šå¯¹æ‰€æœ‰è¿›ç¨‹è¿›è¡Œæ‰“åˆ†ï¼Œç„¶åå°†è¯„åˆ†è¾ƒä½çš„è¿›ç¨‹â€œæ€æ­»â€ï¼Œå…·ä½“çš„è¯„åˆ†è§„åˆ™å¯ä»¥å‚è€ƒ Surviving the Linux OOM Killerã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"ä¸åŒäºå…¶ä»–çš„ OOM é”™è¯¯ï¼Œ \"),s(\"code\",[t._v(\"Killprocessorsacrifice child\")]),t._v(\" é”™è¯¯ä¸æ˜¯ç”± JVM å±‚é¢è§¦å‘çš„ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿå±‚é¢è§¦å‘çš„ã€‚\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_9-1-åŸå› åˆ†æ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_9-1-åŸå› åˆ†æ\"}},[t._v(\"#\")]),t._v(\" 9.1 åŸå› åˆ†æ\")]),t._v(\" \"),s(\"p\",[t._v(\"é»˜è®¤æƒ…å†µä¸‹ï¼ŒLinux å†…æ ¸å…è®¸è¿›ç¨‹ç”³è¯·çš„å†…å­˜æ€»é‡å¤§äºç³»ç»Ÿå¯ç”¨å†…å­˜ï¼Œé€šè¿‡è¿™ç§â€œé”™å³°å¤ç”¨â€çš„æ–¹å¼å¯ä»¥æ›´æœ‰æ•ˆçš„åˆ©ç”¨ç³»ç»Ÿèµ„æºã€‚\")]),t._v(\" \"),s(\"p\",[t._v(\"ç„¶è€Œï¼Œè¿™ç§æ–¹å¼ä¹Ÿä¼šæ— å¯é¿å…åœ°å¸¦æ¥ä¸€å®šçš„â€œè¶…å–â€é£é™©ã€‚ä¾‹å¦‚æŸäº›è¿›ç¨‹æŒç»­å ç”¨ç³»ç»Ÿå†…å­˜ï¼Œç„¶åå¯¼è‡´å…¶ä»–è¿›ç¨‹æ²¡æœ‰å¯ç”¨å†…å­˜ã€‚æ­¤æ—¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ¿€æ´» OOM Killerï¼Œå¯»æ‰¾è¯„åˆ†ä½çš„è¿›ç¨‹ï¼Œå¹¶å°†å…¶â€œæ€æ­»â€ï¼Œé‡Šæ”¾å†…å­˜èµ„æºã€‚\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"_9-2-è§£å†³æ–¹æ¡ˆ\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_9-2-è§£å†³æ–¹æ¡ˆ\"}},[t._v(\"#\")]),t._v(\" 9.2 è§£å†³æ–¹æ¡ˆ\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"å‡çº§æœåŠ¡å™¨é…ç½®/éš”ç¦»éƒ¨ç½²ï¼Œé¿å…äº‰ç”¨\")]),t._v(\" \"),s(\"li\",[t._v(\"OOM Killer è°ƒä¼˜ã€‚\")])]),t._v(\" \"),s(\"p\",[t._v(\"æœ€åé™„ä¸Šä¸€å¼ â€œæ¶¯æµ·â€å¤§ç¥çš„å›¾\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://img.starfish.ink/jvm/oom-end.png\",alt:\"æ¶¯æµ·\"}})]),t._v(\" \"),s(\"h2\",{attrs:{id:\"å‚è€ƒä¸æ„Ÿè°¢\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#å‚è€ƒä¸æ„Ÿè°¢\"}},[t._v(\"#\")]),t._v(\" å‚è€ƒä¸æ„Ÿè°¢\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"p\",[t._v(\"ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœº ç¬¬ 3 ç‰ˆã€‹\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"https://plumbr.io/outofmemoryerror\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"https://yq.aliyun.com/articles/711191\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"https://github.com/StabilityMan/StabilityGuide/blob/master/docs/diagnosis/jvm/exception\")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);","extractedComments":[]}