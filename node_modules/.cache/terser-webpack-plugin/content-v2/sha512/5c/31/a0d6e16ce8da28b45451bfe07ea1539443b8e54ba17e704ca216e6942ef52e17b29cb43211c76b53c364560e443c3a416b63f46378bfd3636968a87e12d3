{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{602:function(e,v,_){\"use strict\";_.r(v);var r=_(6),o=Object(r.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[_(\"h2\",{attrs:{id:\"è°ˆä¸‹ä½ å¯¹-zookeeper-çš„è®¤è¯†\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#è°ˆä¸‹ä½ å¯¹-zookeeper-çš„è®¤è¯†\"}},[e._v(\"#\")]),e._v(\" è°ˆä¸‹ä½ å¯¹ Zookeeper çš„è®¤è¯†ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"ZooKeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼Œå¼€æ”¾æºç çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡çš„è½¯ä»¶ï¼Œæä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åŸŸåæœåŠ¡ã€åˆ†å¸ƒå¼åŒæ­¥ã€ç»„æœåŠ¡ç­‰ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ZooKeeper çš„ç›®æ ‡å°±æ˜¯å°è£…å¥½å¤æ‚æ˜“å‡ºé”™çš„å…³é”®æœåŠ¡ï¼Œå°†ç®€å•æ˜“ç”¨çš„æ¥å£å’Œæ€§èƒ½é«˜æ•ˆã€åŠŸèƒ½ç¨³å®šçš„ç³»ç»Ÿæä¾›ç»™ç”¨æˆ·ã€‚\")]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"zookeeper-éƒ½æœ‰å“ªäº›åŠŸèƒ½\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zookeeper-éƒ½æœ‰å“ªäº›åŠŸèƒ½\"}},[e._v(\"#\")]),e._v(\" Zookeeper éƒ½æœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ\")]),e._v(\" \"),_(\"ol\",[_(\"li\",[_(\"p\",[e._v(\"é›†ç¾¤ç®¡ç†ï¼šç›‘æ§èŠ‚ç‚¹å­˜æ´»çŠ¶æ€ã€è¿è¡Œè¯·æ±‚ç­‰ï¼›\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"ä¸»èŠ‚ç‚¹é€‰ä¸¾ï¼šä¸»èŠ‚ç‚¹æŒ‚æ‰äº†ä¹‹åå¯ä»¥ä»å¤‡ç”¨çš„èŠ‚ç‚¹å¼€å§‹æ–°ä¸€è½®é€‰ä¸»ï¼Œä¸»èŠ‚ç‚¹é€‰ä¸¾è¯´çš„å°±æ˜¯è¿™ä¸ªé€‰ä¸¾çš„è¿‡ç¨‹ï¼Œä½¿ç”¨ Zookeeper å¯ä»¥ååŠ©å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼›\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"åˆ†å¸ƒå¼é”ï¼šZookeeper æä¾›ä¸¤ç§é”ï¼šç‹¬å é”ã€å…±äº«é”ã€‚ç‹¬å é”å³ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨èµ„æºï¼Œå…±äº«é”æ˜¯è¯»é”å…±äº«ï¼Œè¯»å†™äº’æ–¥ï¼Œå³å¯ä»¥æœ‰å¤šçº¿çº¿ç¨‹åŒæ—¶è¯»åŒä¸€ä¸ªèµ„æºï¼Œå¦‚æœè¦ä½¿ç”¨å†™é”ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚Zookeeper å¯ä»¥å¯¹åˆ†å¸ƒå¼é”è¿›è¡Œæ§åˆ¶ã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"å‘½åæœåŠ¡ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä½¿ç”¨å‘½åæœåŠ¡ï¼Œå®¢æˆ·ç«¯åº”ç”¨èƒ½å¤Ÿæ ¹æ®æŒ‡å®šåå­—æ¥è·å–èµ„æºæˆ–æœåŠ¡çš„åœ°å€ï¼Œæä¾›è€…ç­‰ä¿¡æ¯ã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"ç»Ÿä¸€é…ç½®ç®¡ç†ï¼šåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œé…ç½®æ–‡ä»¶ç®¡ç†å’ŒåŒæ­¥æ˜¯ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼Œä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„é…ç½®ä¿¡æ¯æ˜¯ä¸€è‡´çš„ï¼Œæ¯”å¦‚ Hadoop é›†ç¾¤ã€é›†ç¾¤ä¸­çš„æ•°æ®åº“é…ç½®ä¿¡æ¯ç­‰å…¨å±€é…ç½®\")])])]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"zookeeperè´Ÿè½½å‡è¡¡å’Œnginxè´Ÿè½½å‡è¡¡åŒºåˆ«\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zookeeperè´Ÿè½½å‡è¡¡å’Œnginxè´Ÿè½½å‡è¡¡åŒºåˆ«\"}},[e._v(\"#\")]),e._v(\" zookeeperè´Ÿè½½å‡è¡¡å’Œnginxè´Ÿè½½å‡è¡¡åŒºåˆ«\")]),e._v(\" \"),_(\"p\",[e._v(\"Nginxæ˜¯è‘—åçš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œzkæ˜¯åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¡†æ¶ï¼Œéƒ½å¯ä»¥åšè´Ÿè½½å‡è¡¡\")]),e._v(\" \"),_(\"p\",[e._v(\"zkçš„è´Ÿè½½å‡è¡¡æ˜¯å¯ä»¥è°ƒæ§ï¼Œnginxåªæ˜¯èƒ½è°ƒæƒé‡ï¼Œå…¶ä»–éœ€è¦å¯æ§çš„éƒ½éœ€è¦è‡ªå·±å†™æ’ä»¶ï¼›\")]),e._v(\" \"),_(\"p\",[e._v(\"ä½†æ˜¯nginxçš„ååé‡æ¯”zkå¤§å¾ˆå¤šï¼Œåº”è¯¥è¯´æŒ‰ä¸šåŠ¡é€‰æ‹©ç”¨å“ªç§æ–¹å¼\")]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"ä¸€è‡´æ€§åè®®2pcã€3pc\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ä¸€è‡´æ€§åè®®2pcã€3pc\"}},[e._v(\"#\")]),e._v(\" ä¸€è‡´æ€§åè®®2PCã€3PCï¼Ÿ\")]),e._v(\" \"),_(\"h3\",{attrs:{id:\"_2pc\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2pc\"}},[e._v(\"#\")]),e._v(\" 2PC\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"é˜¶æ®µä¸€ï¼šæäº¤äº‹åŠ¡è¯·æ±‚ï¼ˆâ€æŠ•ç¥¨é˜¶æ®µâ€œï¼‰\")])]),e._v(\" \"),_(\"p\",[e._v(\"å½“è¦æ‰§è¡Œä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™ï¼Œäº‹åŠ¡å‘èµ·è€…é¦–å…ˆå‘åè°ƒè€…å‘èµ·äº‹åŠ¡è¯·æ±‚ï¼Œç„¶ååè°ƒè€…ä¼šç»™æ‰€æœ‰å‚ä¸è€…å‘é€ \"),_(\"code\",[e._v(\"prepare\")]),e._v(\" è¯·æ±‚ï¼ˆå…¶ä¸­åŒ…æ‹¬äº‹åŠ¡å†…å®¹ï¼‰å‘Šè¯‰å‚ä¸è€…ä½ ä»¬éœ€è¦æ‰§è¡Œäº‹åŠ¡äº†ï¼Œå¦‚æœèƒ½æ‰§è¡Œæˆ‘å‘çš„äº‹åŠ¡å†…å®¹é‚£ä¹ˆå°±å…ˆæ‰§è¡Œä½†ä¸æäº¤ï¼Œæ‰§è¡Œåè¯·ç»™æˆ‘å›å¤ã€‚ç„¶åå‚ä¸è€…æ”¶åˆ° \"),_(\"code\",[e._v(\"prepare\")]),e._v(\" æ¶ˆæ¯åï¼Œä»–ä»¬ä¼šå¼€å§‹æ‰§è¡Œäº‹åŠ¡ï¼ˆä½†ä¸æäº¤ï¼‰ï¼Œå¹¶å°† \"),_(\"code\",[e._v(\"Undo\")]),e._v(\" å’Œ \"),_(\"code\",[e._v(\"Redo\")]),e._v(\" ä¿¡æ¯è®°å…¥äº‹åŠ¡æ—¥å¿—ä¸­ï¼Œä¹‹åå‚ä¸è€…å°±å‘åè°ƒè€…åé¦ˆæ˜¯å¦å‡†å¤‡å¥½äº†\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"é˜¶æ®µäºŒï¼šæ‰§è¡Œäº‹åŠ¡æäº¤\")])]),e._v(\" \"),_(\"p\",[e._v(\"åè°ƒè€…æ ¹æ®å„å‚ä¸è€…çš„åé¦ˆæƒ…å†µå†³å®šæœ€ç»ˆæ˜¯å¦å¯ä»¥æäº¤äº‹åŠ¡ï¼Œå¦‚æœåé¦ˆéƒ½æ˜¯Yesï¼Œå‘é€æäº¤\"),_(\"code\",[e._v(\"commit\")]),e._v(\"è¯·æ±‚ï¼Œå‚ä¸è€…æäº¤æˆåŠŸåè¿”å› \"),_(\"code\",[e._v(\"Ack\")]),e._v(\" æ¶ˆæ¯ï¼Œåè°ƒè€…æ¥æ”¶åå°±å®Œæˆäº†ã€‚å¦‚æœåé¦ˆæ˜¯No æˆ–è€…è¶…æ—¶æœªåé¦ˆï¼Œå‘é€ \"),_(\"code\",[e._v(\"Rollback\")]),e._v(\" è¯·æ±‚ï¼Œåˆ©ç”¨é˜¶æ®µä¸€è®°å½•è¡¨çš„ \"),_(\"code\",[e._v(\"Undo\")]),e._v(\" ä¿¡æ¯æ‰§è¡Œå›æ»šï¼Œå¹¶åé¦ˆç»™åè°ƒè€…\"),_(\"code\",[e._v(\"Ack\")]),e._v(\" ï¼Œä¸­æ–­æ¶ˆæ¯\")]),e._v(\" \"),_(\"p\",[_(\"img\",{attrs:{src:\"https://tva1.sinaimg.cn/large/00831rSTly1gclosfvncqj30hs09j0td.jpg\",alt:\"\"}})]),e._v(\" \"),_(\"p\",[e._v(\"ä¼˜ç‚¹ï¼šåŸç†ç®€å•ã€å®ç°æ–¹ä¾¿ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ç¼ºç‚¹ï¼š\")]),e._v(\" \"),_(\"ul\",[_(\"li\",[_(\"strong\",[e._v(\"å•ç‚¹æ•…éšœé—®é¢˜\")]),e._v(\"ï¼Œå¦‚æœåè°ƒè€…æŒ‚äº†é‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿéƒ½å¤„äºä¸å¯ç”¨çš„çŠ¶æ€äº†\")]),e._v(\" \"),_(\"li\",[_(\"strong\",[e._v(\"é˜»å¡é—®é¢˜\")]),e._v(\"ï¼Œå³å½“åè°ƒè€…å‘é€ \"),_(\"code\",[e._v(\"prepare\")]),e._v(\" è¯·æ±‚ï¼Œå‚ä¸è€…æ”¶åˆ°ä¹‹åå¦‚æœèƒ½å¤„ç†é‚£ä¹ˆå®ƒå°†ä¼šè¿›è¡Œäº‹åŠ¡çš„å¤„ç†ä½†å¹¶ä¸æäº¤ï¼Œè¿™ä¸ªæ—¶å€™ä¼šä¸€ç›´å ç”¨ç€èµ„æºä¸é‡Šæ”¾ï¼Œå¦‚æœæ­¤æ—¶åè°ƒè€…æŒ‚äº†ï¼Œé‚£ä¹ˆè¿™äº›èµ„æºéƒ½ä¸ä¼šå†é‡Šæ”¾äº†ï¼Œè¿™ä¼šæå¤§å½±å“æ€§èƒ½\")]),e._v(\" \"),_(\"li\",[_(\"strong\",[e._v(\"æ•°æ®ä¸ä¸€è‡´é—®é¢˜\")]),e._v(\"ï¼Œæ¯”å¦‚å½“ç¬¬äºŒé˜¶æ®µï¼Œåè°ƒè€…åªå‘é€äº†ä¸€éƒ¨åˆ†çš„ \"),_(\"code\",[e._v(\"commit\")]),e._v(\" è¯·æ±‚å°±æŒ‚äº†ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€ï¼Œæ”¶åˆ°æ¶ˆæ¯çš„å‚ä¸è€…ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤ï¼Œè€Œåé¢æ²¡æ”¶åˆ°çš„åˆ™ä¸ä¼šè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±ä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜\")])]),e._v(\" \"),_(\"h3\",{attrs:{id:\"_3pc\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3pc\"}},[e._v(\"#\")]),e._v(\" 3PC\")]),e._v(\" \"),_(\"p\",[e._v(\"3PCï¼Œæ˜¯ Three-Phase-Comimit çš„ç¼©å†™ï¼Œå³ã€Œ\"),_(\"strong\",[e._v(\"ä¸‰é˜¶æ®µæäº¤\")]),e._v(\"ã€ï¼Œæ˜¯äºŒé˜¶æ®µçš„æ”¹è¿›ç‰ˆï¼Œå°†äºŒé˜¶æ®µæäº¤åè®®çš„â€œæäº¤äº‹åŠ¡è¯·æ±‚â€è¿‡ç¨‹ä¸€åˆ†ä¸ºäºŒã€‚\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"é˜¶æ®µä¸€ï¼šCanCommit\")])]),e._v(\" \"),_(\"p\",[e._v(\"åè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€ \"),_(\"code\",[e._v(\"CanCommit\")]),e._v(\" è¯·æ±‚ï¼Œå‚ä¸è€…æ”¶åˆ°è¯·æ±‚åä¼šæ ¹æ®è‡ªèº«æƒ…å†µæŸ¥çœ‹æ˜¯å¦èƒ½æ‰§è¡Œäº‹åŠ¡ï¼Œå¦‚æœå¯ä»¥åˆ™è¿”å› YES å“åº”å¹¶è¿›å…¥é¢„å¤‡çŠ¶æ€ï¼Œå¦åˆ™è¿”å› NO\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"é˜¶æ®µäºŒï¼šPreCommit\")])]),e._v(\" \"),_(\"p\",[e._v(\"åè°ƒè€…æ ¹æ®å‚ä¸è€…è¿”å›çš„å“åº”æ¥å†³å®šæ˜¯å¦å¯ä»¥è¿›è¡Œä¸‹é¢çš„ \"),_(\"code\",[e._v(\"PreCommit\")]),e._v(\" æ“ä½œã€‚å¦‚æœä¸Šé¢å‚ä¸è€…è¿”å›çš„éƒ½æ˜¯ YESï¼Œé‚£ä¹ˆåè°ƒè€…å°†å‘æ‰€æœ‰å‚ä¸è€…å‘é€ \"),_(\"code\",[e._v(\"PreCommit\")]),e._v(\" é¢„æäº¤è¯·æ±‚ï¼Œ\"),_(\"strong\",[e._v(\"å‚ä¸è€…æ”¶åˆ°é¢„æäº¤è¯·æ±‚åï¼Œä¼šè¿›è¡Œäº‹åŠ¡çš„æ‰§è¡Œæ“ä½œï¼Œå¹¶å°† Undo å’Œ Redo ä¿¡æ¯å†™å…¥äº‹åŠ¡æ—¥å¿—ä¸­\")]),e._v(\" ï¼Œæœ€åå¦‚æœå‚ä¸è€…é¡ºåˆ©æ‰§è¡Œäº†äº‹åŠ¡åˆ™ç»™åè°ƒè€…è¿”å›æˆåŠŸçš„ \"),_(\"code\",[e._v(\"Ack\")]),e._v(\" å“åº”ã€‚å¦‚æœåœ¨ç¬¬ä¸€é˜¶æ®µåè°ƒè€…æ”¶åˆ°äº† \"),_(\"strong\",[e._v(\"ä»»ä½•ä¸€ä¸ª NO\")]),e._v(\" çš„ä¿¡æ¯ï¼Œæˆ–è€… \"),_(\"strong\",[e._v(\"åœ¨ä¸€å®šæ—¶é—´å†…\")]),e._v(\" å¹¶æ²¡æœ‰æ”¶åˆ°å…¨éƒ¨çš„å‚ä¸è€…çš„å“åº”ï¼Œé‚£ä¹ˆå°±ä¼šä¸­æ–­äº‹åŠ¡ï¼Œå®ƒä¼šå‘æ‰€æœ‰å‚ä¸è€…å‘é€ä¸­æ–­è¯·æ±‚ \"),_(\"code\",[e._v(\"abort\")]),e._v(\"ï¼Œå‚ä¸è€…æ”¶åˆ°ä¸­æ–­è¯·æ±‚ä¹‹åä¼šç«‹å³ä¸­æ–­äº‹åŠ¡ï¼Œæˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°åè°ƒè€…çš„è¯·æ±‚ï¼Œå®ƒä¹Ÿä¼šä¸­æ–­äº‹åŠ¡\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"é˜¶æ®µä¸‰ï¼šDoCommit\")])]),e._v(\" \"),_(\"p\",[e._v(\"è¿™ä¸ªé˜¶æ®µå…¶å®å’Œ \"),_(\"code\",[e._v(\"2PC\")]),e._v(\" çš„ç¬¬äºŒé˜¶æ®µå·®ä¸å¤šï¼Œå¦‚æœåè°ƒè€…æ”¶åˆ°äº†æ‰€æœ‰å‚ä¸è€…åœ¨ \"),_(\"code\",[e._v(\"PreCommit\")]),e._v(\" é˜¶æ®µçš„ YES å“åº”ï¼Œé‚£ä¹ˆåè°ƒè€…å°†ä¼šç»™æ‰€æœ‰å‚ä¸è€…å‘é€ \"),_(\"code\",[e._v(\"DoCommit\")]),e._v(\" è¯·æ±‚ï¼Œ\"),_(\"strong\",[e._v(\"å‚ä¸è€…æ”¶åˆ° DoCommit è¯·æ±‚ååˆ™ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤å·¥ä½œ\")]),e._v(\"ï¼Œå®Œæˆååˆ™ä¼šç»™åè°ƒè€…è¿”å›å“åº”ï¼Œåè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…è¿”å›çš„äº‹åŠ¡æäº¤æˆåŠŸçš„å“åº”ä¹‹ååˆ™å®Œæˆäº‹åŠ¡ã€‚è‹¥åè°ƒè€…åœ¨ \"),_(\"code\",[e._v(\"PreCommit\")]),e._v(\" é˜¶æ®µ \"),_(\"strong\",[e._v(\"æ”¶åˆ°äº†ä»»ä½•ä¸€ä¸ª NO æˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„å“åº”\")]),e._v(\" ï¼Œé‚£ä¹ˆå°±ä¼šè¿›è¡Œä¸­æ–­è¯·æ±‚çš„å‘é€ï¼Œå‚ä¸è€…æ”¶åˆ°ä¸­æ–­è¯·æ±‚ååˆ™ä¼š \"),_(\"strong\",[e._v(\"é€šè¿‡ä¸Šé¢è®°å½•çš„å›æ»šæ—¥å¿—\")]),e._v(\" æ¥è¿›è¡Œäº‹åŠ¡çš„å›æ»šæ“ä½œï¼Œå¹¶å‘åè°ƒè€…åé¦ˆå›æ»šçŠ¶å†µï¼Œåè°ƒè€…æ”¶åˆ°å‚ä¸è€…è¿”å›çš„æ¶ˆæ¯åï¼Œä¸­æ–­äº‹åŠ¡ã€‚\")]),e._v(\" \"),_(\"p\",[_(\"img\",{attrs:{src:\"https://tva1.sinaimg.cn/large/00831rSTly1gclot2rul3j30j60cpgmo.jpg\",alt:\"\"}})]),e._v(\" \"),_(\"p\",[e._v(\"é™ä½äº†å‚ä¸è€…çš„é˜»å¡èŒƒå›´ï¼Œä¸”èƒ½åœ¨å•ç‚¹æ•…éšœåç»§ç»­è¾¾æˆä¸€è‡´ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ä½†æ˜¯æœ€é‡è¦çš„ä¸€è‡´æ€§å¹¶æ²¡æœ‰å¾—åˆ°æ ¹æœ¬çš„è§£å†³ï¼Œæ¯”å¦‚åœ¨ \"),_(\"code\",[e._v(\"PreCommit\")]),e._v(\" é˜¶æ®µï¼Œå½“ä¸€ä¸ªå‚ä¸è€…æ”¶åˆ°äº†è¯·æ±‚ä¹‹åå…¶ä»–å‚ä¸è€…å’Œåè°ƒè€…æŒ‚äº†æˆ–è€…å‡ºç°äº†ç½‘ç»œåˆ†åŒºï¼Œè¿™ä¸ªæ—¶å€™æ”¶åˆ°æ¶ˆæ¯çš„å‚ä¸è€…éƒ½ä¼šè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œè¿™å°±ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚\")]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"è®²ä¸€è®²-paxos-ç®—æ³•\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#è®²ä¸€è®²-paxos-ç®—æ³•\"}},[e._v(\"#\")]),e._v(\" è®²ä¸€è®² Paxos ç®—æ³•ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[_(\"code\",[e._v(\"Paxos\")]),e._v(\" ç®—æ³•æ˜¯åŸºäº\"),_(\"strong\",[e._v(\"æ¶ˆæ¯ä¼ é€’ä¸”å…·æœ‰é«˜åº¦å®¹é”™ç‰¹æ€§çš„ä¸€è‡´æ€§ç®—æ³•\")]),e._v(\"ï¼Œæ˜¯ç›®å‰å…¬è®¤çš„è§£å†³åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜æœ€æœ‰æ•ˆçš„ç®—æ³•ä¹‹ä¸€ï¼Œ\"),_(\"strong\",[e._v(\"å…¶è§£å†³çš„é—®é¢˜å°±æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¦‚ä½•å°±æŸä¸ªå€¼ï¼ˆå†³è®®ï¼‰è¾¾æˆä¸€è‡´\")]),e._v(\" ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"åœ¨ \"),_(\"code\",[e._v(\"Paxos\")]),e._v(\" ä¸­ä¸»è¦æœ‰ä¸‰ä¸ªè§’è‰²ï¼Œåˆ†åˆ«ä¸º \"),_(\"code\",[e._v(\"Proposerææ¡ˆè€…\")]),e._v(\"ã€\"),_(\"code\",[e._v(\"Acceptorè¡¨å†³è€…\")]),e._v(\"ã€\"),_(\"code\",[e._v(\"Learnerå­¦ä¹ è€…\")]),e._v(\"ã€‚\"),_(\"code\",[e._v(\"Paxos\")]),e._v(\" ç®—æ³•å’Œ \"),_(\"code\",[e._v(\"2PC\")]),e._v(\" ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸¤ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ä¸º \"),_(\"code\",[e._v(\"Prepare\")]),e._v(\" å’Œ \"),_(\"code\",[e._v(\"accept\")]),e._v(\" é˜¶æ®µã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"åœ¨å…·ä½“çš„å®ç°ä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å¯èƒ½åŒæ—¶å……å½“å¤šç§è§’è‰²ã€‚æ¯”å¦‚ä¸€ä¸ªè¿›ç¨‹å¯èƒ½æ—¢æ˜¯ Proposer åˆæ˜¯ Acceptor åˆæ˜¯Learnerã€‚Proposer è´Ÿè´£æå‡ºææ¡ˆï¼ŒAcceptor è´Ÿè´£å¯¹ææ¡ˆä½œå‡ºè£å†³ï¼ˆacceptä¸å¦ï¼‰ï¼Œlearner è´Ÿè´£å­¦ä¹ ææ¡ˆç»“æœã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µå«ã€Œ\"),_(\"strong\",[e._v(\"ææ¡ˆ\")]),e._v(\"ã€ï¼ˆProposalï¼‰ã€‚æœ€ç»ˆè¦è¾¾æˆä¸€è‡´çš„ value å°±åœ¨ææ¡ˆé‡Œã€‚åªè¦ Proposer å‘çš„ææ¡ˆè¢«åŠæ•°ä»¥ä¸Šçš„ Acceptor æ¥å—ï¼ŒProposer å°±è®¤ä¸ºè¯¥ææ¡ˆé‡Œçš„ value è¢«é€‰å®šäº†ã€‚Acceptor å‘Šè¯‰ Learner å“ªä¸ª value è¢«é€‰å®šï¼ŒLearner å°±è®¤ä¸ºé‚£ä¸ª value è¢«é€‰å®šã€‚\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"é˜¶æ®µä¸€ï¼šprepare é˜¶æ®µ\")])]),e._v(\" \"),_(\"ol\",[_(\"li\",[_(\"p\",[_(\"code\",[e._v(\"Proposer\")]),e._v(\" è´Ÿè´£æå‡º \"),_(\"code\",[e._v(\"proposal\")]),e._v(\"ï¼Œæ¯ä¸ªææ¡ˆè€…åœ¨æå‡ºææ¡ˆæ—¶éƒ½ä¼šé¦–å…ˆè·å–åˆ°ä¸€ä¸ª \"),_(\"strong\",[e._v(\"å…·æœ‰å…¨å±€å”¯ä¸€æ€§çš„ã€é€’å¢çš„ææ¡ˆç¼–å·N\")]),e._v(\"ï¼Œå³åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ˜¯å”¯ä¸€çš„ç¼–å· Nï¼Œç„¶åå°†è¯¥ç¼–å·èµ‹äºˆå…¶è¦æå‡ºçš„ææ¡ˆï¼Œåœ¨\"),_(\"strong\",[e._v(\"ç¬¬ä¸€é˜¶æ®µæ˜¯åªå°†ææ¡ˆç¼–å·å‘é€ç»™æ‰€æœ‰çš„è¡¨å†³è€…\")]),e._v(\"ã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"å¦‚æœä¸€ä¸ª Acceptor æ”¶åˆ°ä¸€ä¸ªç¼–å·ä¸º N çš„ Prepare è¯·æ±‚ï¼Œå¦‚æœå°äºå®ƒå·²ç»å“åº”è¿‡çš„è¯·æ±‚ï¼Œåˆ™æ‹’ç»ï¼Œä¸å›åº”æˆ–å›å¤errorã€‚è‹¥ N å¤§äºè¯¥ Acceptor å·²ç»å“åº”è¿‡çš„æ‰€æœ‰ Prepare è¯·æ±‚çš„ç¼–å·ï¼ˆmaxNï¼‰ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå°†å®ƒ\"),_(\"strong\",[e._v(\"å·²ç»æ‰¹å‡†è¿‡çš„ç¼–å·æœ€å¤§çš„ææ¡ˆ\")]),e._v(\"ï¼ˆå¦‚æœæœ‰çš„è¯ï¼Œå¦‚æœè¿˜æ²¡æœ‰çš„acceptææ¡ˆçš„è¯è¿”å›{pokï¼Œnullï¼Œnull}ï¼‰ä½œä¸ºå“åº”åé¦ˆç»™ Proposerï¼ŒåŒæ—¶è¯¥ Acceptor æ‰¿è¯ºä¸å†æ¥å—ä»»ä½•ç¼–å·å°äº N çš„ææ¡ˆ\")]),e._v(\" \"),_(\"p\",[e._v(\"egï¼šå‡å®šä¸€ä¸ª Acceptor å·²ç»å“åº”è¿‡çš„æ‰€æœ‰ Prepare è¯·æ±‚å¯¹åº”çš„ææ¡ˆç¼–å·åˆ†åˆ«æ˜¯1ã€2ã€...5å’Œ7ï¼Œé‚£ä¹ˆè¯¥ Acceptor åœ¨æ¥æ”¶åˆ°ä¸€ä¸ªç¼–å·ä¸º8çš„ Prepare è¯·æ±‚åï¼Œå°±ä¼šå°† 7 çš„ææ¡ˆä½œä¸ºå“åº”åé¦ˆç»™ Proposerã€‚\")])])]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"é˜¶æ®µäºŒï¼šaccept é˜¶æ®µ\")])]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"å¦‚æœä¸€ä¸ª Proposer æ”¶åˆ°åŠæ•°ä»¥ä¸Š Acceptor å¯¹å…¶å‘å‡ºçš„ç¼–å·ä¸º N çš„ Prepare è¯·æ±‚çš„å“åº”ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå‘é€ä¸€ä¸ªé’ˆå¯¹ [N,V] ææ¡ˆçš„ Accept è¯·æ±‚åŠæ•°ä»¥ä¸Šçš„ Acceptorã€‚æ³¨æ„ï¼šV å°±æ˜¯æ”¶åˆ°çš„å“åº”ä¸­ç¼–å·æœ€å¤§çš„ææ¡ˆçš„ valueï¼Œå¦‚æœå“åº”ä¸­ä¸åŒ…å«ä»»ä½•ææ¡ˆï¼Œé‚£ä¹ˆ V å°±ç”± Proposer è‡ªå·±å†³å®š\")]),e._v(\" \"),_(\"li\",[e._v(\"å¦‚æœ Acceptor æ”¶åˆ°ä¸€ä¸ªé’ˆå¯¹ç¼–å·ä¸ºNçš„ææ¡ˆçš„Acceptè¯·æ±‚ï¼Œåªè¦è¯¥ Acceptor æ²¡æœ‰å¯¹ç¼–å·å¤§äº N çš„ Prepare è¯·æ±‚åšå‡ºè¿‡å“åº”ï¼Œå®ƒå°±é€šè¿‡è¯¥ææ¡ˆã€‚å¦‚æœNå°äº Acceptor ä»¥åŠå“åº”çš„ prepare è¯·æ±‚ï¼Œåˆ™æ‹’ç»ï¼Œä¸å›åº”æˆ–å›å¤errorï¼ˆå½“proposeræ²¡æœ‰æ”¶åˆ°è¿‡åŠçš„å›åº”ï¼Œé‚£ä¹ˆä»–ä¼šé‡æ–°è¿›å…¥ç¬¬ä¸€é˜¶æ®µï¼Œé€’å¢ææ¡ˆå·ï¼Œé‡æ–°æå‡ºprepareè¯·æ±‚ï¼‰\")]),e._v(\" \"),_(\"li\",[e._v(\"æœ€åæ˜¯ Learner è·å–é€šè¿‡çš„ææ¡ˆï¼ˆæœ‰å¤šç§æ–¹å¼ï¼‰\")])]),e._v(\" \"),_(\"p\",[_(\"img\",{attrs:{src:\"https://tva1.sinaimg.cn/large/00831rSTly1gcloyv70qsj30sg0lc0ve.jpg\",alt:\"\"}})]),e._v(\" \"),_(\"p\",[_(\"strong\",[_(\"code\",[e._v(\"paxos\")]),e._v(\" ç®—æ³•çš„æ­»å¾ªç¯é—®é¢˜\")])]),e._v(\" \"),_(\"p\",[e._v(\"å…¶å®å°±æœ‰ç‚¹ç±»ä¼¼äºä¸¤ä¸ªäººåµæ¶ï¼Œå°æ˜è¯´æˆ‘æ˜¯å¯¹çš„ï¼Œå°çº¢è¯´æˆ‘æ‰æ˜¯å¯¹çš„ï¼Œä¸¤ä¸ªäººæ®ç†åŠ›äº‰çš„è°ä¹Ÿä¸è®©è°ğŸ¤¬ğŸ¤¬ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"æ¯”å¦‚è¯´ï¼Œæ­¤æ—¶ææ¡ˆè€… P1 æå‡ºä¸€ä¸ªæ–¹æ¡ˆ M1ï¼Œå®Œæˆäº† \"),_(\"code\",[e._v(\"Prepare\")]),e._v(\" é˜¶æ®µçš„å·¥ä½œï¼Œè¿™ä¸ªæ—¶å€™ \"),_(\"code\",[e._v(\"acceptor\")]),e._v(\" åˆ™æ‰¹å‡†äº† M1ï¼Œä½†æ˜¯æ­¤æ—¶ææ¡ˆè€… P2 åŒæ—¶ä¹Ÿæå‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆ M2ï¼Œå®ƒä¹Ÿå®Œæˆäº† \"),_(\"code\",[e._v(\"Prepare\")]),e._v(\" é˜¶æ®µçš„å·¥ä½œã€‚ç„¶å P1 çš„æ–¹æ¡ˆå·²ç»ä¸èƒ½åœ¨ç¬¬äºŒé˜¶æ®µè¢«æ‰¹å‡†äº†ï¼ˆå› ä¸º \"),_(\"code\",[e._v(\"acceptor\")]),e._v(\" å·²ç»æ‰¹å‡†äº†æ¯” M1 æ›´å¤§çš„ M2ï¼‰ï¼Œæ‰€ä»¥ P1 è‡ªå¢æ–¹æ¡ˆå˜ä¸º M3 é‡æ–°è¿›å…¥ \"),_(\"code\",[e._v(\"Prepare\")]),e._v(\" é˜¶æ®µï¼Œç„¶å \"),_(\"code\",[e._v(\"acceptor\")]),e._v(\" ï¼Œåˆæ‰¹å‡†äº†æ–°çš„ M3 æ–¹æ¡ˆï¼Œå®ƒåˆä¸èƒ½æ‰¹å‡† M2 äº†ï¼Œè¿™ä¸ªæ—¶å€™ M2 åˆè‡ªå¢è¿›å…¥ \"),_(\"code\",[e._v(\"Prepare\")]),e._v(\" é˜¶æ®µã€‚ã€‚ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å°±è¿™æ ·æ— ä¼‘æ— æ­¢çš„æ°¸è¿œææ¡ˆä¸‹å»ï¼Œè¿™å°±æ˜¯ \"),_(\"code\",[e._v(\"paxos\")]),e._v(\" ç®—æ³•çš„æ­»å¾ªç¯é—®é¢˜ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"è°ˆä¸‹ä½ å¯¹-zab-åè®®çš„äº†è§£\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#è°ˆä¸‹ä½ å¯¹-zab-åè®®çš„äº†è§£\"}},[e._v(\"#\")]),e._v(\" è°ˆä¸‹ä½ å¯¹ ZAB åè®®çš„äº†è§£ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"ZABï¼ˆZookeeper Atomic Broadcastï¼‰ åè®®æ˜¯ä¸ºåˆ†å¸ƒå¼åè°ƒæœåŠ¡ Zookeeper ä¸“é—¨è®¾è®¡çš„ä¸€ç§æ”¯æŒ\"),_(\"strong\",[e._v(\"å´©æºƒæ¢å¤çš„åŸå­å¹¿æ’­åè®®\")]),e._v(\"ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"åœ¨ Zookeeper ä¸­ï¼Œä¸»è¦ä¾èµ– ZAB åè®®æ¥å®ç°åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§ï¼ŒåŸºäºè¯¥åè®®ï¼ŒZooKeeper å®ç°äº†ä¸€ç§ä¸»å¤‡æ¨¡å¼çš„ç³»ç»Ÿæ¶æ„æ¥ä¿æŒé›†ç¾¤ä¸­å„å‰¯æœ¬ä¹‹é—´æ•°æ®çš„ä¸€è‡´æ€§ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å°½ç®¡ ZAB ä¸æ˜¯ Paxos çš„å®ç°ï¼Œä½†æ˜¯ ZAB ä¹Ÿå‚è€ƒäº†ä¸€äº› Paxos çš„ä¸€äº›è®¾è®¡æ€æƒ³ï¼Œæ¯”å¦‚ï¼š\")]),e._v(\" \"),_(\"ul\",[_(\"li\",[e._v(\"leader å‘ follows æå‡ºææ¡ˆ(proposal)\")]),e._v(\" \"),_(\"li\",[e._v(\"leader éœ€è¦åœ¨è¾¾åˆ°æ³•å®šæ•°é‡(åŠæ•°ä»¥ä¸Š)çš„ follows ç¡®è®¤ä¹‹åæ‰ä¼šè¿›è¡Œ commit\")]),e._v(\" \"),_(\"li\",[e._v(\"æ¯ä¸€ä¸ª proposal éƒ½æœ‰ä¸€ä¸ªçºªå…ƒ(epoch)å·ï¼Œç±»ä¼¼äº Paxos ä¸­çš„é€‰ç¥¨(ballot)\")])]),e._v(\" \"),_(\"p\",[_(\"code\",[e._v(\"ZAB\")]),e._v(\" ä¸­æœ‰ä¸‰ä¸ªä¸»è¦çš„è§’è‰²ï¼Œ\"),_(\"code\",[e._v(\"Leader é¢†å¯¼è€…\")]),e._v(\"ã€\"),_(\"code\",[e._v(\"Followerè·Ÿéšè€…\")]),e._v(\"ã€\"),_(\"code\",[e._v(\"Observerè§‚å¯Ÿè€…\")]),e._v(\" ã€‚\")]),e._v(\" \"),_(\"ul\",[_(\"li\",[_(\"code\",[e._v(\"Leader\")]),e._v(\" ï¼šé›†ç¾¤ä¸­ \"),_(\"strong\",[e._v(\"å”¯ä¸€çš„å†™è¯·æ±‚å¤„ç†è€…\")]),e._v(\" ï¼Œèƒ½å¤Ÿå‘èµ·æŠ•ç¥¨ï¼ˆæŠ•ç¥¨ä¹Ÿæ˜¯ä¸ºäº†è¿›è¡Œå†™è¯·æ±‚ï¼‰ã€‚\")]),e._v(\" \"),_(\"li\",[_(\"code\",[e._v(\"Follower\")]),e._v(\"ï¼šèƒ½å¤Ÿæ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¦‚æœæ˜¯è¯»è¯·æ±‚åˆ™å¯ä»¥è‡ªå·±å¤„ç†ï¼Œ\"),_(\"strong\",[e._v(\"å¦‚æœæ˜¯å†™è¯·æ±‚åˆ™è¦è½¬å‘ç»™ Leader ã€‚åœ¨é€‰ä¸¾è¿‡ç¨‹ä¸­ä¼šå‚ä¸æŠ•ç¥¨ï¼Œæœ‰é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒ ã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"strong\",[e._v(\"Observer ï¼šå°±æ˜¯æ²¡æœ‰é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒçš„ Follower ã€‚\")])])]),e._v(\" \"),_(\"p\",[e._v(\"åœ¨ ZAB åè®®ä¸­å¯¹ zkServer(å³ä¸Šé¢æˆ‘ä»¬è¯´çš„ä¸‰ä¸ªè§’è‰²çš„æ€»ç§°) è¿˜æœ‰ä¸¤ç§æ¨¡å¼çš„å®šä¹‰ï¼Œåˆ†åˆ«æ˜¯æ¶ˆæ¯å¹¿æ’­å’Œå´©æºƒæ¢å¤\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"æ¶ˆæ¯å¹¿æ’­æ¨¡å¼\")])]),e._v(\" \"),_(\"p\",[_(\"img\",{attrs:{src:\"http://file.sunwaiting.com/zab_broadcast.png\",alt:\"ZABå¹¿æ’­\"}})]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"Leaderä»å®¢æˆ·ç«¯æ”¶åˆ°ä¸€ä¸ªäº‹åŠ¡è¯·æ±‚ï¼ˆå¦‚æœæ˜¯é›†ç¾¤ä¸­å…¶ä»–æœºå™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„äº‹åŠ¡è¯·æ±‚ï¼Œä¼šç›´æ¥è½¬å‘ç»™ Leader æœåŠ¡å™¨ï¼‰\")]),e._v(\" \"),_(\"li\",[e._v(\"Leader æœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„äº‹åŠ¡ Proposalï¼Œå¹¶ä¸ºè¿™ä¸ªäº‹åŠ¡ç”Ÿæˆä¸€ä¸ªå…¨å±€é€’å¢çš„å”¯ä¸€çš„ZXIDï¼ˆé€šè¿‡å…¶ ZXID æ¥è¿›è¡Œæ’åºä¿è¯é¡ºåºæ€§ï¼‰\")]),e._v(\" \"),_(\"li\",[e._v(\"Leader å°†è¿™ä¸ªäº‹åŠ¡å‘é€ç»™æ‰€æœ‰çš„ Follows èŠ‚ç‚¹\")]),e._v(\" \"),_(\"li\",[e._v(\"Follower èŠ‚ç‚¹å°†æ”¶åˆ°çš„äº‹åŠ¡è¯·æ±‚åŠ å…¥åˆ°å†å²é˜Ÿåˆ—(Leader ä¼šä¸ºæ¯ä¸ª Follower åˆ†é…ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºï¼Œé¡ºåºä¿è¯æ¶ˆæ¯çš„å› æœå…³ç³»)ä¸­ï¼Œå¹¶å‘é€ ack ç»™ Leader\")]),e._v(\" \"),_(\"li\",[e._v(\"å½“ Leader æ”¶åˆ°è¶…è¿‡åŠæ•° Follower çš„ ack æ¶ˆæ¯ï¼ŒLeaderä¼šå¹¿æ’­ä¸€ä¸ª commit æ¶ˆæ¯\")]),e._v(\" \"),_(\"li\",[e._v(\"å½“ Follower æ”¶åˆ° commit è¯·æ±‚æ—¶ï¼Œä¼šåˆ¤æ–­è¯¥äº‹åŠ¡çš„ ZXID æ˜¯ä¸æ˜¯æ¯”å†å²é˜Ÿåˆ—ä¸­çš„ä»»ä½•äº‹åŠ¡çš„ ZXID éƒ½å°ï¼Œå¦‚æœæ˜¯åˆ™æäº¤ï¼Œå¦‚æœä¸æ˜¯åˆ™ç­‰å¾…æ¯”å®ƒæ›´å°çš„äº‹åŠ¡çš„ commit\")])]),e._v(\" \"),_(\"p\",[_(\"img\",{attrs:{src:\"http://file.sunwaiting.com/zab_commit_1.png\",alt:\"zab \\bcommitæµç¨‹\"}})]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"å´©æºƒæ¢å¤æ¨¡å¼\")])]),e._v(\" \"),_(\"p\",[e._v(\"ZAB çš„åŸå­å¹¿æ’­åè®®åœ¨æ­£å¸¸æƒ…å†µä¸‹è¿è¡Œè‰¯å¥½ï¼Œä½†å¤©æœ‰ä¸æµ‹é£äº‘ï¼Œä¸€æ—¦ Leader æœåŠ¡å™¨æŒ‚æ‰æˆ–è€…ç”±äºç½‘ç»œåŸå› å¯¼è‡´ä¸åŠæ•°çš„ Follower çš„æœåŠ¡å™¨å¤±å»è”ç³»ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥å´©æºƒæ¢å¤æ¨¡å¼ã€‚æ•´ä¸ªæ¢å¤è¿‡ç¨‹ç»“æŸåéœ€è¦é€‰ä¸¾å‡ºä¸€ä¸ªæ–°çš„ Leader æœåŠ¡å™¨ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"æ¢å¤æ¨¡å¼å¤§è‡´å¯ä»¥åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š\"),_(\"strong\",[e._v(\"é€‰ä¸¾ã€å‘ç°ã€åŒæ­¥ã€å¹¿æ’­\")])]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"å½“ leader å´©æºƒåï¼Œé›†ç¾¤è¿›å…¥é€‰ä¸¾é˜¶æ®µï¼Œå¼€å§‹é€‰ä¸¾å‡ºæ½œåœ¨çš„æ–° leader(ä¸€èˆ¬ä¸ºé›†ç¾¤ä¸­æ‹¥æœ‰æœ€å¤§ ZXID çš„èŠ‚ç‚¹)\")]),e._v(\" \"),_(\"li\",[e._v(\"è¿›å…¥å‘ç°é˜¶æ®µï¼Œfollower ä¸æ½œåœ¨çš„æ–° leader è¿›è¡Œæ²Ÿé€šï¼Œå¦‚æœå‘ç°è¶…è¿‡æ³•å®šäººæ•°çš„ follower åŒæ„ï¼Œåˆ™æ½œåœ¨çš„æ–°leader å°† epoc håŠ 1ï¼Œè¿›å…¥æ–°çš„çºªå…ƒã€‚æ–°çš„ leader äº§ç”Ÿ\")]),e._v(\" \"),_(\"li\",[e._v(\"é›†ç¾¤é—´è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œä¿è¯é›†ç¾¤ä¸­å„ä¸ªèŠ‚ç‚¹çš„äº‹åŠ¡ä¸€è‡´\")]),e._v(\" \"),_(\"li\",[e._v(\"é›†ç¾¤æ¢å¤åˆ°å¹¿æ’­æ¨¡å¼ï¼Œå¼€å§‹æ¥å—å®¢æˆ·ç«¯çš„å†™è¯·æ±‚\")])]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"zookeeper-æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥-æˆ–è€…è¯´åŒæ­¥æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zookeeper-æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥-æˆ–è€…è¯´åŒæ­¥æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„\"}},[e._v(\"#\")]),e._v(\" Zookeeper æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥ï¼Ÿæˆ–è€…è¯´åŒæ­¥æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper çš„æ ¸å¿ƒæ˜¯åŸå­å¹¿æ’­æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶ä¿è¯äº†å„ä¸ª server ä¹‹é—´çš„åŒæ­¥ã€‚å®ç°è¿™ä¸ªæœºåˆ¶çš„åè®®å«åš Zab åè®®ã€‚Zab åè®®æœ‰ä¸¤ç§æ¨¡å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯æ¢å¤æ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼ã€‚åŒä¸Š\")]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆè¦æœ‰ä¸»èŠ‚ç‚¹\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆè¦æœ‰ä¸»èŠ‚ç‚¹\"}},[e._v(\"#\")]),e._v(\" é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆè¦æœ‰ä¸»èŠ‚ç‚¹ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæœ‰äº›ä¸šåŠ¡é€»è¾‘åªéœ€è¦é›†ç¾¤ä¸­çš„æŸä¸€å°æœºå™¨è¿›è¡Œæ‰§è¡Œï¼Œå…¶ä»–çš„æœºå™¨å¯ä»¥å…±äº«è¿™ä¸ªç»“æœï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘é‡å¤è®¡ç®—ï¼Œæé«˜æ€§èƒ½ï¼Œäºæ˜¯å°±éœ€è¦è¿›è¡Œ leader é€‰ä¸¾ã€‚\")]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"é›†ç¾¤ä¸­æœ‰-3-å°æœåŠ¡å™¨-å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœº-è¿™ä¸ªæ—¶å€™-zookeeper-è¿˜å¯ä»¥ä½¿ç”¨å—\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#é›†ç¾¤ä¸­æœ‰-3-å°æœåŠ¡å™¨-å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœº-è¿™ä¸ªæ—¶å€™-zookeeper-è¿˜å¯ä»¥ä½¿ç”¨å—\"}},[e._v(\"#\")]),e._v(\" é›†ç¾¤ä¸­æœ‰ 3 å°æœåŠ¡å™¨ï¼Œå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œè¿™ä¸ªæ—¶å€™ Zookeeper è¿˜å¯ä»¥ä½¿ç”¨å—ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œå•æ•°æœåŠ¡å™¨åªè¦æ²¡è¶…è¿‡ä¸€åŠçš„æœåŠ¡å™¨å®•æœºå°±å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"é›†ç¾¤è§„åˆ™ä¸º 2N+1 å°ï¼ŒN >0ï¼Œå³æœ€å°‘éœ€è¦ 3 å°ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"zookeeper-å®•æœºå¦‚ä½•å¤„ç†\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zookeeper-å®•æœºå¦‚ä½•å¤„ç†\"}},[e._v(\"#\")]),e._v(\" Zookeeper å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper æœ¬èº«ä¹Ÿæ˜¯é›†ç¾¤ï¼Œæ¨èé…ç½®ä¸å°‘äº 3 ä¸ªæœåŠ¡å™¨ã€‚Zookeeper è‡ªèº«ä¹Ÿè¦ä¿è¯å½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šç»§ç»­æä¾›æœåŠ¡ã€‚å¦‚æœæ˜¯ä¸€ä¸ª Follower å®•æœºï¼Œè¿˜æœ‰ 2 å°æœåŠ¡å™¨æä¾›è®¿é—®ï¼Œå› ä¸º Zookeeper ä¸Šçš„æ•°æ®æ˜¯æœ‰å¤šä¸ªå‰¯æœ¬çš„ï¼Œæ•°æ®å¹¶ä¸ä¼šä¸¢å¤±ï¼›å¦‚æœæ˜¯ä¸€ä¸ª Leader å®•æœºï¼ŒZookeeper ä¼šé€‰ä¸¾å‡ºæ–°çš„ Leaderã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper é›†ç¾¤çš„æœºåˆ¶æ˜¯åªè¦è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ­£å¸¸ï¼Œé›†ç¾¤å°±èƒ½æ­£å¸¸æä¾›æœåŠ¡ã€‚åªæœ‰åœ¨ Zookeeper èŠ‚ç‚¹æŒ‚å¾—å¤ªå¤šï¼Œåªå‰©ä¸€åŠæˆ–ä¸åˆ°ä¸€åŠèŠ‚ç‚¹èƒ½å·¥ä½œï¼Œé›†ç¾¤æ‰å¤±æ•ˆã€‚æ‰€ä»¥ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"3 ä¸ªèŠ‚ç‚¹çš„ cluster å¯ä»¥æŒ‚æ‰ 1 ä¸ªèŠ‚ç‚¹(leader å¯ä»¥å¾—åˆ° 2 ç¥¨ > 1.5)\")]),e._v(\" \"),_(\"p\",[e._v(\"2 ä¸ªèŠ‚ç‚¹çš„ cluster å°±ä¸èƒ½æŒ‚æ‰ä»»ä½•1ä¸ªèŠ‚ç‚¹äº†(leader å¯ä»¥å¾—åˆ° 1 ç¥¨ <= 1)\")]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹-znode\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹-znode\"}},[e._v(\"#\")]),e._v(\" è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹ Znodeï¼Ÿ\")]),e._v(\" \"),_(\"ol\",[_(\"li\",[_(\"p\",[e._v(\"PERSISTENTï¼šæŒä¹…èŠ‚ç‚¹ï¼Œé™¤éæ‰‹åŠ¨åˆ é™¤ï¼Œå¦åˆ™èŠ‚ç‚¹ä¸€ç›´å­˜åœ¨äº Zookeeper ä¸Šã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"EPHEMERALï¼šä¸´æ—¶èŠ‚ç‚¹ï¼Œä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸä¸å®¢æˆ·ç«¯ä¼šè¯ç»‘å®šï¼Œä¸€æ—¦å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆï¼ˆå®¢æˆ·ç«¯ä¸ Zookeeperè¿æ¥æ–­å¼€ä¸ä¸€å®šä¼šè¯å¤±æ•ˆï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ç«¯åˆ›å»ºçš„æ‰€æœ‰ä¸´æ—¶èŠ‚ç‚¹éƒ½ä¼šè¢«ç§»é™¤ã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"PERSISTENT_SEQUENTIALï¼šæŒä¹…é¡ºåºèŠ‚ç‚¹ï¼ŒåŸºæœ¬ç‰¹æ€§åŒæŒä¹…èŠ‚ç‚¹ï¼Œåªæ˜¯å¢åŠ äº†é¡ºåºå±æ€§ï¼ŒèŠ‚ç‚¹ååè¾¹ä¼šè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—ã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"EPHEMERAL_SEQUENTIALï¼šä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼ŒåŸºæœ¬ç‰¹æ€§åŒä¸´æ—¶èŠ‚ç‚¹ï¼Œå¢åŠ äº†é¡ºåºå±æ€§ï¼ŒèŠ‚ç‚¹ååè¾¹ä¼šè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—ã€‚\")])])]),e._v(\" \"),_(\"hr\"),e._v(\" \"),_(\"h2\",{attrs:{id:\"zookeeperé€‰ä¸¾æœºåˆ¶\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zookeeperé€‰ä¸¾æœºåˆ¶\"}},[e._v(\"#\")]),e._v(\" Zookeeperé€‰ä¸¾æœºåˆ¶\")]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"é¦–å…ˆå¯¹æ¯”zxidã€‚zxidå¤§çš„æœåŠ¡å™¨ä¼˜å…ˆä½œä¸ºLeader\")]),e._v(\" \"),_(\"li\",[e._v(\"è‹¥zxidç›¸åŒï¼Œæ¯”å¦‚åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ¯ä¸ªServerçš„zxidéƒ½ä¸º0ï¼Œå°±ä¼šæ¯”è¾ƒmyidï¼Œmyidå¤§çš„é€‰å‡ºæ¥åšLeaderã€‚\")])]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"æœåŠ¡å™¨åˆå§‹åŒ–æ—¶é€‰ä¸¾\")])]),e._v(\" \"),_(\"blockquote\",[_(\"p\",[e._v(\"ç›®å‰æœ‰3å°æœåŠ¡å™¨ï¼Œæ¯å°æœåŠ¡å™¨å‡æ²¡æœ‰æ•°æ®ï¼Œå®ƒä»¬çš„ç¼–å·åˆ†åˆ«æ˜¯1,2,3æŒ‰ç¼–å·ä¾æ¬¡å¯åŠ¨ï¼Œå®ƒä»¬çš„é€‰æ‹©ä¸¾è¿‡ç¨‹å¦‚ä¸‹ï¼š\")])]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"Server1å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ˆ1,0ï¼‰ï¼Œç„¶åå‘æŠ•ç¥¨ä¿¡æ¯ï¼Œç”±äºå…¶å®ƒæœºå™¨è¿˜æ²¡æœ‰å¯åŠ¨æ‰€ä»¥å®ƒæ”¶ä¸åˆ°åé¦ˆä¿¡æ¯ï¼ŒServer1çš„çŠ¶æ€ä¸€ç›´å±äºLookingã€‚\")]),e._v(\" \"),_(\"li\",[e._v(\"Server2å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ˆ2,0ï¼‰ï¼ŒåŒæ—¶ä¸ä¹‹å‰å¯åŠ¨çš„Server1äº¤æ¢ç»“æœï¼Œç”±äºServer2çš„ç¼–å·å¤§æ‰€ä»¥Server2èƒœå‡ºï¼Œ\"),_(\"strong\",[e._v(\"ä½†æ­¤æ—¶æŠ•ç¥¨æ•°æ­£å¥½å¤§äºåŠæ•°\")]),e._v(\"ï¼Œæ‰€ä»¥Server2æˆä¸ºé¢†å¯¼è€…ï¼ŒServer1æˆä¸ºå°å¼Ÿã€‚\")]),e._v(\" \"),_(\"li\",[e._v(\"Server3å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ˆ3,0ï¼‰ï¼ŒåŒæ—¶ä¸ä¹‹å‰å¯åŠ¨çš„Server1,Server2æ¢ä¿¡æ¯ï¼Œå°½ç®¡Server3çš„ç¼–å·å¤§ï¼Œä½†ä¹‹å‰Server2å·²ç»èƒœå‡ºï¼Œæ‰€ä»¥Server3åªèƒ½æˆä¸ºå°å¼Ÿã€‚\")]),e._v(\" \"),_(\"li\",[e._v(\"å½“ç¡®å®šäº†Leaderä¹‹åï¼Œæ¯ä¸ªServeræ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼ŒLeaderå°†çŠ¶æ€æ›´æ–°ä¸ºLeadingï¼ŒFollowerå°†çŠ¶æ€æ›´æ–°ä¸ºFollowingã€‚\")])]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"æœåŠ¡å™¨è¿è¡ŒæœŸé—´çš„é€‰ä¸¾\")])]),e._v(\" \"),_(\"blockquote\",[_(\"p\",[e._v(\"zookeeperè¿è¡ŒæœŸé—´ï¼Œå¦‚æœæœ‰æ–°çš„ServeråŠ å…¥ï¼Œæˆ–è€…éLeaderçš„Serverå®•æœºï¼Œé‚£ä¹ˆLeaderå°†ä¼šåŒæ­¥æ•°æ®åˆ°æ–°Serveræˆ–è€…å¯»æ‰¾å…¶ä»–å¤‡ç”¨Serveræ›¿ä»£å®•æœºçš„Serverã€‚è‹¥Leaderå®•æœºï¼Œæ­¤æ—¶é›†ç¾¤æš‚åœå¯¹å¤–æœåŠ¡ï¼Œå¼€å§‹åœ¨å†…éƒ¨é€‰ä¸¾æ–°çš„Leaderã€‚å‡è®¾å½“å‰é›†ç¾¤ä¸­æœ‰Server1ã€Server2ã€Server3ä¸‰å°æœåŠ¡å™¨ï¼ŒServer2ä¸ºå½“å‰é›†ç¾¤çš„Leaderï¼Œç”±äºæ„å¤–æƒ…å†µï¼ŒServer2å®•æœºäº†ï¼Œä¾¿å¼€å§‹è¿›å…¥é€‰ä¸¾çŠ¶æ€ã€‚è¿‡ç¨‹å¦‚ä¸‹\")])]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"å˜æ›´çŠ¶æ€ã€‚å…¶ä»–çš„éObserveræœåŠ¡å™¨å°†è‡ªå·±çš„çŠ¶æ€æ”¹å˜ä¸ºLookingï¼Œå¼€å§‹è¿›å…¥Leaderé€‰ä¸¾ã€‚\")]),e._v(\" \"),_(\"li\",[e._v(\"æ¯ä¸ªServerå‘å‡ºä¸€ä¸ªæŠ•ç¥¨ï¼ˆmyidï¼Œzxidï¼‰ï¼Œç”±äºæ­¤é›†ç¾¤å·²ç»è¿è¡Œè¿‡ï¼Œæ‰€ä»¥æ¯ä¸ªServerä¸Šçš„zxidå¯èƒ½ä¸åŒã€‚å‡è®¾Server1çš„zxidä¸º100ï¼ŒServer3çš„ä¸º99ï¼Œç¬¬ä¸€è½®æŠ•ç¥¨ä¸­ï¼ŒServer1å’ŒServer3éƒ½æŠ•è‡ªå·±ï¼Œç¥¨åˆ†åˆ«ä¸ºï¼ˆ1ï¼Œ100ï¼‰,ï¼ˆ3,99ï¼‰,å°†è‡ªå·±çš„ç¥¨å‘é€ç»™é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ã€‚\")]),e._v(\" \"),_(\"li\",[e._v(\"æ¯ä¸ªServeræ¥æ”¶æ¥æ”¶æ¥è‡ªå…¶ä»–Serverçš„æŠ•ç¥¨ï¼Œæ¥ä¸‹æ¥çš„æ­¥éª¤ä¸å¯åŠ¨æ—¶æ­¥éª¤ç›¸åŒã€‚\")])]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_1-zookeeper-æ˜¯ä»€ä¹ˆ\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-zookeeper-æ˜¯ä»€ä¹ˆ\"}},[e._v(\"#\")]),e._v(\" 1. ZooKeeper æ˜¯ä»€ä¹ˆï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"ZooKeeper æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡çš„è½¯ä»¶ï¼Œåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå¯ä»¥åŸºäº Zookeeper å®ç°è¯¸å¦‚æ•°æ®å‘å¸ƒ/è®¢é˜…ã€è´Ÿè½½å‡è¡¡ã€å‘½åæœåŠ¡ã€åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥ã€é›†ç¾¤ç®¡ç†ã€Master é€‰ä¸¾ã€åˆ†å¸ƒå¼é”å’Œåˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰åŠŸèƒ½ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ZooKeeper çš„ç›®æ ‡å°±æ˜¯å°è£…å¥½å¤æ‚æ˜“å‡ºé”™çš„å…³é”®æœåŠ¡ï¼Œå°†ç®€å•æ˜“ç”¨çš„æ¥å£å’Œæ€§èƒ½é«˜æ•ˆã€åŠŸèƒ½ç¨³å®šçš„ç³»ç»Ÿæä¾›ç»™ç”¨æˆ·ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper ä¿è¯äº†å¦‚ä¸‹åˆ†å¸ƒå¼ä¸€è‡´æ€§ç‰¹æ€§ï¼š\")]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"é¡ºåºä¸€è‡´æ€§\")]),e._v(\" \"),_(\"li\",[e._v(\"åŸå­æ€§\")]),e._v(\" \"),_(\"li\",[e._v(\"å•ä¸€è§†å›¾ï¼ˆå…¨å±€æ•°æ®ä¸€è‡´ï¼‰\")]),e._v(\" \"),_(\"li\",[e._v(\"å¯é æ€§\")]),e._v(\" \"),_(\"li\",[e._v(\"å®æ—¶æ€§ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰\")])]),e._v(\" \"),_(\"p\",[e._v(\"å®¢æˆ·ç«¯çš„è¯»è¯·æ±‚å¯ä»¥è¢«é›†ç¾¤ä¸­çš„ä»»æ„ä¸€å°æœºå™¨å¤„ç†ï¼Œå¦‚æœè¯»è¯·æ±‚åœ¨èŠ‚ç‚¹ä¸Šæ³¨å†Œäº†ç›‘å¬å™¨ï¼Œè¿™ä¸ªç›‘å¬å™¨ä¹Ÿæ˜¯ç”±æ‰€è¿æ¥çš„ zookeeper æœºå™¨æ¥å¤„ç†ã€‚å¯¹äºå†™è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚ä¼šåŒæ—¶å‘ç»™å…¶ä»– zookeeper æœºå™¨å¹¶ä¸”è¾¾æˆä¸€è‡´åï¼Œè¯·æ±‚æ‰ä¼šè¿”å›æˆåŠŸã€‚å› æ­¤ï¼Œéšç€ zookeeper çš„é›†ç¾¤æœºå™¨å¢å¤šï¼Œè¯»è¯·æ±‚çš„ååä¼šæé«˜ä½†æ˜¯å†™è¯·æ±‚çš„ååä¼šä¸‹é™ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"æœ‰åºæ€§æ˜¯ zookeeper ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹æ€§ï¼Œæ‰€æœ‰çš„æ›´æ–°éƒ½æ˜¯å…¨å±€æœ‰åºçš„ï¼Œæ¯ä¸ªæ›´æ–°éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ—¶é—´æˆ³ï¼Œè¿™ä¸ªæ—¶é—´æˆ³ç§°ä¸º zxidï¼ˆZookeeper Transaction Idï¼‰ã€‚è€Œè¯»è¯·æ±‚åªä¼šç›¸å¯¹äºæ›´æ–°æœ‰åºï¼Œä¹Ÿå°±æ˜¯è¯»è¯·æ±‚çš„è¿”å›ç»“æœä¸­ä¼šå¸¦æœ‰è¿™ä¸ªzookeeper æœ€æ–°çš„ zxidã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_2-zookeeper-æä¾›äº†ä»€ä¹ˆ\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-zookeeper-æä¾›äº†ä»€ä¹ˆ\"}},[e._v(\"#\")]),e._v(\" 2. ZooKeeper æä¾›äº†ä»€ä¹ˆï¼Ÿ\")]),e._v(\" \"),_(\"ul\",[_(\"li\",[e._v(\"æ–‡ä»¶ç³»ç»Ÿ\")]),e._v(\" \"),_(\"li\",[e._v(\"é€šçŸ¥æœºåˆ¶\")])]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_3-zookeeper-æ–‡ä»¶ç³»ç»Ÿ\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-zookeeper-æ–‡ä»¶ç³»ç»Ÿ\"}},[e._v(\"#\")]),e._v(\" 3. Zookeeper æ–‡ä»¶ç³»ç»Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper æä¾›ä¸€ä¸ªå¤šå±‚çº§çš„èŠ‚ç‚¹å‘½åç©ºé—´ï¼ˆèŠ‚ç‚¹ç§°ä¸º znodeï¼‰ã€‚ä¸æ–‡ä»¶ç³»ç»Ÿä¸åŒçš„æ˜¯ï¼Œè¿™äº›èŠ‚ç‚¹éƒ½å¯ä»¥è®¾ç½®å…³è”çš„æ•°æ®ï¼Œè€Œæ–‡ä»¶ç³»ç»Ÿä¸­åªæœ‰æ–‡ä»¶èŠ‚ç‚¹å¯ä»¥å­˜æ”¾æ•°æ®è€Œç›®å½•èŠ‚ç‚¹ä¸è¡Œã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper ä¸ºäº†ä¿è¯é«˜ååå’Œä½å»¶è¿Ÿï¼Œåœ¨å†…å­˜ä¸­ç»´æŠ¤äº†è¿™ä¸ªæ ‘çŠ¶çš„ç›®å½•ç»“æ„ï¼Œè¿™ç§ç‰¹æ€§ä½¿å¾— Zookeeper ä¸èƒ½ç”¨äºå­˜æ”¾å¤§é‡çš„æ•°æ®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å­˜æ”¾æ•°æ®ä¸Šé™ä¸º1Mã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_4-zookeeper-æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-zookeeper-æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥\"}},[e._v(\"#\")]),e._v(\" 4. Zookeeper æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper çš„æ ¸å¿ƒæ˜¯åŸå­å¹¿æ’­æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶ä¿è¯äº†å„ä¸ª server ä¹‹é—´çš„åŒæ­¥ã€‚å®ç°è¿™ä¸ªæœºåˆ¶çš„åè®®å«åš Zab åè®®ã€‚Zab åè®®æœ‰ä¸¤ç§æ¨¡å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯æ¢å¤æ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"1ã€æ¢å¤æ¨¡å¼\")]),e._v(\" \"),_(\"p\",[e._v(\"å½“æœåŠ¡å¯åŠ¨æˆ–è€…åœ¨é¢†å¯¼è€…å´©æºƒåï¼ŒZab å°±è¿›å…¥äº†æ¢å¤æ¨¡å¼ï¼Œå½“é¢†å¯¼è€…è¢«é€‰ä¸¾å‡ºæ¥ï¼Œä¸”å¤§å¤šæ•° server å®Œæˆäº†å’Œ leader çš„çŠ¶æ€åŒæ­¥ä»¥åï¼Œæ¢å¤æ¨¡å¼å°±ç»“æŸäº†ã€‚çŠ¶æ€åŒæ­¥ä¿è¯äº† leader å’Œ server å…·æœ‰ç›¸åŒçš„ç³»ç»ŸçŠ¶æ€ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"2ã€å¹¿æ’­æ¨¡å¼\")]),e._v(\" \"),_(\"p\",[e._v(\"ä¸€æ—¦ leader å·²ç»å’Œå¤šæ•°çš„ follower è¿›è¡Œäº†çŠ¶æ€åŒæ­¥åï¼Œå®ƒå°±å¯ä»¥å¼€å§‹å¹¿æ’­æ¶ˆæ¯äº†ï¼Œå³è¿›å…¥å¹¿æ’­çŠ¶æ€ã€‚è¿™æ—¶å€™å½“ä¸€ä¸ª server åŠ å…¥ ZooKeeper æœåŠ¡ä¸­ï¼Œå®ƒä¼šåœ¨æ¢å¤æ¨¡å¼ä¸‹å¯åŠ¨ï¼Œå‘ç° leaderï¼Œå¹¶å’Œ leader è¿›è¡ŒçŠ¶æ€åŒæ­¥ã€‚å¾…åˆ°åŒæ­¥ç»“æŸï¼Œå®ƒä¹Ÿå‚ä¸æ¶ˆæ¯å¹¿æ’­ã€‚ZooKeeper æœåŠ¡ä¸€ç›´ç»´æŒåœ¨ Broadcast çŠ¶æ€ï¼Œç›´åˆ° leader å´©æºƒäº†æˆ–è€… leader å¤±å»äº†å¤§éƒ¨åˆ†çš„ followers æ”¯æŒã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_5-å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹-znode\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹-znode\"}},[e._v(\"#\")]),e._v(\" 5. å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹ Znode\")]),e._v(\" \"),_(\"ol\",[_(\"li\",[_(\"p\",[e._v(\"PERSISTENT-\"),_(\"strong\",[e._v(\"æŒä¹…èŠ‚ç‚¹\")])]),e._v(\" \"),_(\"p\",[e._v(\"é™¤éæ‰‹åŠ¨åˆ é™¤ï¼Œå¦åˆ™èŠ‚ç‚¹ä¸€ç›´å­˜åœ¨äº Zookeeper ä¸Š\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"EPHEMERAL-\"),_(\"strong\",[e._v(\"ä¸´æ—¶èŠ‚ç‚¹\")])]),e._v(\" \"),_(\"p\",[e._v(\"ä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸä¸å®¢æˆ·ç«¯ä¼šè¯ç»‘å®šï¼Œä¸€æ—¦å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆï¼ˆå®¢æˆ·ç«¯ä¸zookeeper è¿æ¥æ–­å¼€ä¸ä¸€å®šä¼šè¯å¤±æ•ˆï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ç«¯åˆ›å»ºçš„æ‰€æœ‰ä¸´æ—¶èŠ‚ç‚¹éƒ½ä¼šè¢«ç§»é™¤ã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"PERSISTENT_SEQUENTIAL**-æŒä¹…é¡ºåºèŠ‚ç‚¹**\")]),e._v(\" \"),_(\"p\",[e._v(\"åŸºæœ¬ç‰¹æ€§åŒæŒä¹…èŠ‚ç‚¹ï¼Œåªæ˜¯å¢åŠ äº†é¡ºåºå±æ€§ï¼ŒèŠ‚ç‚¹ååè¾¹ä¼šè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—ã€‚\")])]),e._v(\" \"),_(\"li\",[_(\"p\",[e._v(\"EPHEMERAL_SEQUENTIAL-\"),_(\"strong\",[e._v(\"ä¸´æ—¶é¡ºåºèŠ‚ç‚¹\")])]),e._v(\" \"),_(\"p\",[e._v(\"åŸºæœ¬ç‰¹æ€§åŒä¸´æ—¶èŠ‚ç‚¹ï¼Œå¢åŠ äº†é¡ºåºå±æ€§ï¼ŒèŠ‚ç‚¹ååè¾¹ä¼šè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—ã€‚\")])])]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_6-zookeeper-watcher-æœºåˆ¶-æ•°æ®å˜æ›´é€šçŸ¥\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-zookeeper-watcher-æœºåˆ¶-æ•°æ®å˜æ›´é€šçŸ¥\"}},[e._v(\"#\")]),e._v(\" 6. Zookeeper Watcher æœºåˆ¶ â€“ æ•°æ®å˜æ›´é€šçŸ¥\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper å…è®¸å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯çš„æŸä¸ª Znode æ³¨å†Œä¸€ä¸ª Watcher ç›‘å¬ï¼Œå½“æœåŠ¡ç«¯çš„ä¸€äº›æŒ‡å®šäº‹ä»¶è§¦å‘äº†è¿™ä¸ª Watcherï¼ŒæœåŠ¡ç«¯ä¼šå‘æŒ‡å®šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªäº‹ä»¶é€šçŸ¥æ¥å®ç°åˆ†å¸ƒå¼çš„é€šçŸ¥åŠŸèƒ½ï¼Œç„¶åå®¢æˆ·ç«¯æ ¹æ® Watcher é€šçŸ¥çŠ¶æ€å’Œäº‹ä»¶ç±»å‹åšå‡ºä¸šåŠ¡ä¸Šçš„æ”¹å˜ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å·¥ä½œæœºåˆ¶ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰å®¢æˆ·ç«¯æ³¨å†Œ watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰æœåŠ¡ç«¯å¤„ç† watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰å®¢æˆ·ç«¯å›è°ƒ watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"Watcher ç‰¹æ€§æ€»ç»“ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰ä¸€æ¬¡æ€§\")]),e._v(\" \"),_(\"p\",[e._v(\"æ— è®ºæ˜¯æœåŠ¡ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯ï¼Œä¸€æ—¦ä¸€ä¸ª Watcher è¢« è§¦ å‘ ï¼ŒZookeeper éƒ½ä¼šå°†å…¶ä»ç›¸åº”çš„å­˜å‚¨ä¸­ç§»é™¤ã€‚è¿™æ ·çš„è®¾è®¡æœ‰æ•ˆçš„å‡è½»äº†æœåŠ¡ç«¯çš„å‹åŠ›ï¼Œä¸ç„¶å¯¹äºæ›´æ–°éå¸¸é¢‘ç¹çš„èŠ‚ç‚¹ï¼ŒæœåŠ¡ç«¯ä¼šä¸æ–­çš„å‘å®¢æˆ·ç«¯å‘é€äº‹ä»¶é€šçŸ¥ï¼Œæ— è®ºå¯¹äºç½‘ç»œè¿˜æ˜¯æœåŠ¡ç«¯çš„å‹åŠ›éƒ½éå¸¸å¤§ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰å®¢æˆ·ç«¯ä¸²è¡Œæ‰§è¡Œ\")]),e._v(\" \"),_(\"p\",[e._v(\"å®¢æˆ·ç«¯ Watcher å›è°ƒçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªä¸²è¡ŒåŒæ­¥çš„è¿‡ç¨‹ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰è½»é‡\")]),e._v(\" \"),_(\"p\",[e._v(\"3.1ã€Watcher é€šçŸ¥éå¸¸ç®€å•ï¼Œåªä¼šå‘Šè¯‰å®¢æˆ·ç«¯å‘ç”Ÿäº†äº‹ä»¶ï¼Œè€Œä¸ä¼šè¯´æ˜äº‹ä»¶çš„å…·ä½“å†…å®¹ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"3.2ã€å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯æ³¨å†Œ Watcher çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæŠŠå®¢æˆ·ç«¯çœŸå®çš„ Watcher å¯¹è±¡å®ä½“ä¼ é€’åˆ°æœåŠ¡ç«¯ï¼Œä»…ä»…æ˜¯åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸­ä½¿ç”¨ boolean ç±»å‹å±æ€§è¿›è¡Œäº†æ ‡è®°ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ4ï¼‰watcher event å¼‚æ­¥å‘é€ watcher çš„é€šçŸ¥äº‹ä»¶ä» server å‘é€åˆ° client æ˜¯å¼‚æ­¥çš„ï¼Œè¿™å°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œä¸åŒçš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ socket è¿›è¡Œé€šä¿¡ï¼Œç”±äºç½‘ç»œå»¶è¿Ÿæˆ–å…¶ä»–å› ç´ å¯¼è‡´å®¢æˆ·ç«¯åœ¨ä¸é€šçš„æ—¶åˆ»ç›‘å¬åˆ°äº‹ä»¶ï¼Œç”±äº Zookeeper æœ¬èº«æä¾›äº† ordering guaranteeï¼Œå³å®¢æˆ·ç«¯ç›‘å¬äº‹ä»¶åï¼Œæ‰ä¼šæ„ŸçŸ¥å®ƒæ‰€ç›‘è§† znodeå‘ç”Ÿäº†å˜åŒ–ã€‚æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ Zookeeper ä¸èƒ½æœŸæœ›èƒ½å¤Ÿç›‘æ§åˆ°èŠ‚ç‚¹æ¯æ¬¡çš„å˜åŒ–ã€‚Zookeeper åªèƒ½ä¿è¯æœ€ç»ˆçš„ä¸€è‡´æ€§ï¼Œè€Œæ— æ³•ä¿è¯å¼ºä¸€è‡´æ€§ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ5ï¼‰æ³¨å†Œ watcher getDataã€existsã€getChildren\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ6ï¼‰è§¦å‘ watcher createã€deleteã€setData\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ7ï¼‰å½“ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ°ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ä¸Šæ—¶ï¼Œwatch å°†ä¼šè¢«ä»¥ä»»æ„ä¼šè¯äº‹ä»¶è§¦å‘ã€‚å½“ä¸ä¸€ä¸ªæœåŠ¡å™¨å¤±å»è¿æ¥çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•æ¥æ”¶åˆ° watch çš„ã€‚è€Œå½“ client é‡æ–°è¿æ¥æ—¶ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œæ‰€æœ‰å…ˆå‰æ³¨å†Œè¿‡çš„ watchï¼Œéƒ½ä¼šè¢«é‡æ–°æ³¨å†Œã€‚é€šå¸¸è¿™æ˜¯å®Œå…¨é€æ˜çš„ã€‚åªæœ‰åœ¨ä¸€ä¸ªç‰¹æ®Šæƒ…å†µä¸‹ï¼Œwatch å¯èƒ½ä¼šä¸¢å¤±ï¼šå¯¹äºä¸€ä¸ªæœªåˆ›å»ºçš„ znodeçš„ exist watchï¼Œå¦‚æœåœ¨å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æœŸé—´è¢«åˆ›å»ºäº†ï¼Œå¹¶ä¸”éšååœ¨å®¢æˆ·ç«¯è¿æ¥ä¸Šä¹‹å‰åˆåˆ é™¤äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ª watch äº‹ä»¶å¯èƒ½ä¼šè¢«ä¸¢å¤±ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_7-å®¢æˆ·ç«¯æ³¨å†Œ-watcher-å®ç°\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7-å®¢æˆ·ç«¯æ³¨å†Œ-watcher-å®ç°\"}},[e._v(\"#\")]),e._v(\" 7. å®¢æˆ·ç«¯æ³¨å†Œ Watcher å®ç°\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰è°ƒç”¨ getData()/getChildren()/exist()ä¸‰ä¸ª APIï¼Œä¼ å…¥ Watcher å¯¹è±¡\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰æ ‡è®°è¯·æ±‚ requestï¼Œå°è£… Watcher åˆ° WatchRegistration\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰å°è£…æˆ Packet å¯¹è±¡ï¼Œå‘æœåŠ¡ç«¯å‘é€ request\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ4ï¼‰æ”¶åˆ°æœåŠ¡ç«¯å“åº”åï¼Œå°† Watcher æ³¨å†Œåˆ° ZKWatcherManager ä¸­è¿›è¡Œç®¡ç†\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ5ï¼‰è¯·æ±‚è¿”å›ï¼Œå®Œæˆæ³¨å†Œã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_8-æœåŠ¡ç«¯å¤„ç†-watcher-å®ç°\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_8-æœåŠ¡ç«¯å¤„ç†-watcher-å®ç°\"}},[e._v(\"#\")]),e._v(\" 8. æœåŠ¡ç«¯å¤„ç† Watcher å®ç°\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰æœåŠ¡ç«¯æ¥æ”¶ Watcher å¹¶å­˜å‚¨\")]),e._v(\" \"),_(\"p\",[e._v(\"æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚åˆ¤æ–­æ˜¯å¦éœ€è¦æ³¨å†Œ Watcherï¼Œéœ€è¦çš„è¯å°†æ•°æ®èŠ‚ç‚¹çš„èŠ‚ç‚¹è·¯å¾„å’Œ ServerCnxnï¼ˆServerCnxn ä»£è¡¨ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥ï¼Œå®ç°äº† Watcher çš„ process æ¥å£ï¼Œæ­¤æ—¶å¯ä»¥çœ‹æˆä¸€ä¸ª Watcher å¯¹è±¡ï¼‰å­˜å‚¨åœ¨WatcherManager çš„ WatchTable å’Œ watch2Paths ä¸­å»ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰Watcher è§¦å‘\")]),e._v(\" \"),_(\"p\",[e._v(\"ä»¥æœåŠ¡ç«¯æ¥æ”¶åˆ° setData() äº‹åŠ¡è¯·æ±‚è§¦å‘ NodeDataChanged äº‹ä»¶ä¸ºä¾‹ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"2.1 å°è£… WatchedEvent\")]),e._v(\" \"),_(\"p\",[e._v(\"å°†é€šçŸ¥çŠ¶æ€ï¼ˆSyncConnectedï¼‰ã€äº‹ä»¶ç±»å‹ï¼ˆNodeDataChangedï¼‰ä»¥åŠèŠ‚ç‚¹è·¯å¾„å°è£…æˆä¸€ä¸ª WatchedEvent å¯¹è±¡\")]),e._v(\" \"),_(\"p\",[e._v(\"2.2 æŸ¥è¯¢ Watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"ä» WatchTable ä¸­æ ¹æ®èŠ‚ç‚¹è·¯å¾„æŸ¥æ‰¾ Watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"2.3 æ²¡æ‰¾åˆ°ï¼›è¯´æ˜æ²¡æœ‰å®¢æˆ·ç«¯åœ¨è¯¥æ•°æ®èŠ‚ç‚¹ä¸Šæ³¨å†Œè¿‡ Watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"2.4 æ‰¾åˆ°ï¼›æå–å¹¶ä» WatchTable å’Œ Watch2Paths ä¸­åˆ é™¤å¯¹åº” Watcherï¼ˆä»è¿™é‡Œå¯ä»¥çœ‹å‡º Watcher åœ¨æœåŠ¡ç«¯æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè§¦å‘ä¸€æ¬¡å°±å¤±æ•ˆäº†ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰è°ƒç”¨ process æ–¹æ³•æ¥è§¦å‘ Watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"è¿™é‡Œ process ä¸»è¦å°±æ˜¯é€šè¿‡ ServerCnxn å¯¹åº”çš„ TCP è¿æ¥å‘é€ Watcher äº‹ä»¶é€šçŸ¥ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_9-å®¢æˆ·ç«¯å›è°ƒ-watcher\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_9-å®¢æˆ·ç«¯å›è°ƒ-watcher\"}},[e._v(\"#\")]),e._v(\" 9. å®¢æˆ·ç«¯å›è°ƒ Watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"å®¢æˆ·ç«¯ SendThread çº¿ç¨‹æ¥æ”¶äº‹ä»¶é€šçŸ¥ï¼Œäº¤ç”± EventThread çº¿ç¨‹å›è°ƒ Watcherã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å®¢æˆ·ç«¯çš„ Watcher æœºåˆ¶åŒæ ·æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸€æ—¦è¢«è§¦å‘åï¼Œè¯¥ Watcher å°±å¤±æ•ˆäº†ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_10-acl-æƒé™æ§åˆ¶æœºåˆ¶\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_10-acl-æƒé™æ§åˆ¶æœºåˆ¶\"}},[e._v(\"#\")]),e._v(\" 10. ACL æƒé™æ§åˆ¶æœºåˆ¶\")]),e._v(\" \"),_(\"p\",[e._v(\"UGOï¼ˆUser/Group/Othersï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"ç›®å‰åœ¨ Linux/Unix æ–‡ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œä¹Ÿæ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„æƒé™æ§åˆ¶æ–¹å¼ã€‚æ˜¯ä¸€ç§ç²—ç²’åº¦çš„æ–‡ä»¶ç³»ç»Ÿæƒé™æ§åˆ¶æ¨¡å¼ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ACLï¼ˆAccess Control Listï¼‰è®¿é—®æ§åˆ¶åˆ—è¡¨\")]),e._v(\" \"),_(\"p\",[e._v(\"åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"æƒé™æ¨¡å¼ï¼ˆSchemeï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰IPï¼šä» IP åœ°å€ç²’åº¦è¿›è¡Œæƒé™æ§åˆ¶\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰Digestï¼šæœ€å¸¸ç”¨ï¼Œç”¨ç±»ä¼¼äº username:password çš„æƒé™æ ‡è¯†æ¥è¿›è¡Œæƒé™é…ç½®ï¼Œä¾¿äºåŒºåˆ†ä¸åŒåº”ç”¨æ¥è¿›è¡Œæƒé™æ§åˆ¶\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰Worldï¼šæœ€å¼€æ”¾çš„æƒé™æ§åˆ¶æ–¹å¼ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ digest æ¨¡å¼ï¼Œåªæœ‰ä¸€ä¸ªæƒé™æ ‡è¯†â€œworld:anyoneâ€\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ4ï¼‰Superï¼šè¶…çº§ç”¨æˆ·\")]),e._v(\" \"),_(\"p\",[e._v(\"æˆæƒå¯¹è±¡\")]),e._v(\" \"),_(\"p\",[e._v(\"æˆæƒå¯¹è±¡æŒ‡çš„æ˜¯æƒé™èµ‹äºˆçš„ç”¨æˆ·æˆ–ä¸€ä¸ªæŒ‡å®šå®ä½“ï¼Œä¾‹å¦‚ IP åœ°å€æˆ–æ˜¯æœºå™¨ç¯ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"æƒé™ Permission\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰CREATEï¼šæ•°æ®èŠ‚ç‚¹åˆ›å»ºæƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡åœ¨è¯¥ Znode ä¸‹åˆ›å»ºå­èŠ‚ç‚¹\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰DELETEï¼šå­èŠ‚ç‚¹åˆ é™¤æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡åˆ é™¤è¯¥æ•°æ®èŠ‚ç‚¹çš„å­èŠ‚ç‚¹\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰READï¼šæ•°æ®èŠ‚ç‚¹çš„è¯»å–æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡è®¿é—®è¯¥æ•°æ®èŠ‚ç‚¹å¹¶è¯»å–å…¶æ•°æ®å†…å®¹æˆ–å­èŠ‚ç‚¹åˆ—è¡¨ç­‰\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ4ï¼‰WRITEï¼šæ•°æ®èŠ‚ç‚¹æ›´æ–°æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡å¯¹è¯¥æ•°æ®èŠ‚ç‚¹è¿›è¡Œæ›´æ–°æ“ä½œ\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ5ï¼‰ADMINï¼šæ•°æ®èŠ‚ç‚¹ç®¡ç†æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡å¯¹è¯¥æ•°æ®èŠ‚ç‚¹è¿›è¡Œ ACL ç›¸å…³è®¾ç½®æ“ä½œ\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_11-chroot-ç‰¹æ€§\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_11-chroot-ç‰¹æ€§\"}},[e._v(\"#\")]),e._v(\" 11. Chroot ç‰¹æ€§\")]),e._v(\" \"),_(\"p\",[e._v(\"3.2.0 ç‰ˆæœ¬åï¼Œæ·»åŠ äº† Chroot ç‰¹æ€§ï¼Œè¯¥ç‰¹æ€§å…è®¸æ¯ä¸ªå®¢æˆ·ç«¯ä¸ºè‡ªå·±è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ã€‚å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®äº† Chrootï¼Œé‚£ä¹ˆè¯¥å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨çš„ä»»ä½•æ“ä½œï¼Œéƒ½å°†ä¼šè¢«é™åˆ¶åœ¨å…¶è‡ªå·±çš„å‘½åç©ºé—´ä¸‹ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"é€šè¿‡è®¾ç½® Chrootï¼Œèƒ½å¤Ÿå°†ä¸€ä¸ªå®¢æˆ·ç«¯åº”ç”¨äº Zookeeper æœåŠ¡ç«¯çš„ä¸€é¢—å­æ ‘ç›¸å¯¹åº”ï¼Œåœ¨é‚£äº›å¤šä¸ªåº”ç”¨å…¬ç”¨ä¸€ä¸ª Zookeeper è¿›ç¾¤çš„åœºæ™¯ä¸‹ï¼Œå¯¹å®ç°ä¸åŒåº”ç”¨é—´çš„ç›¸äº’éš”ç¦»éå¸¸æœ‰å¸®åŠ©ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_12-ä¼šè¯ç®¡ç†\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_12-ä¼šè¯ç®¡ç†\"}},[e._v(\"#\")]),e._v(\" 12. ä¼šè¯ç®¡ç†\")]),e._v(\" \"),_(\"p\",[e._v(\"åˆ†æ¡¶ç­–ç•¥ï¼šå°†ç±»ä¼¼çš„ä¼šè¯æ”¾åœ¨åŒä¸€åŒºå—ä¸­è¿›è¡Œç®¡ç†ï¼Œä»¥ä¾¿äº Zookeeper å¯¹ä¼šè¯è¿›è¡Œä¸åŒåŒºå—çš„éš”ç¦»å¤„ç†ä»¥åŠåŒä¸€åŒºå—çš„ç»Ÿä¸€å¤„ç†ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"åˆ†é…åŸåˆ™ï¼šæ¯ä¸ªä¼šè¯çš„â€œä¸‹æ¬¡è¶…æ—¶æ—¶é—´ç‚¹â€ï¼ˆExpirationTimeï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"è®¡ç®—å…¬å¼ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"ExpirationTime_ = currentTime + sessionTimeout\")]),e._v(\" \"),_(\"p\",[e._v(\"ExpirationTime = (ExpirationTime_ / ExpirationInrerval + 1) *\")]),e._v(\" \"),_(\"p\",[e._v(\"ExpirationInterval , ExpirationInterval æ˜¯æŒ‡ Zookeeper ä¼šè¯è¶…æ—¶æ£€æŸ¥æ—¶é—´é—´éš”ï¼Œé»˜è®¤ tickTime\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_13-æœåŠ¡å™¨è§’è‰²\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_13-æœåŠ¡å™¨è§’è‰²\"}},[e._v(\"#\")]),e._v(\" 13. æœåŠ¡å™¨è§’è‰²\")]),e._v(\" \"),_(\"p\",[e._v(\"Leader\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰äº‹åŠ¡è¯·æ±‚çš„å”¯ä¸€è°ƒåº¦å’Œå¤„ç†è€…ï¼Œä¿è¯é›†ç¾¤äº‹åŠ¡å¤„ç†çš„é¡ºåºæ€§\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰é›†ç¾¤å†…éƒ¨å„æœåŠ¡çš„è°ƒåº¦è€…\")]),e._v(\" \"),_(\"p\",[e._v(\"Follower\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰å¤„ç†å®¢æˆ·ç«¯çš„éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™ Leader æœåŠ¡å™¨\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰å‚ä¸äº‹åŠ¡è¯·æ±‚ Proposal çš„æŠ•ç¥¨\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰å‚ä¸ Leader é€‰ä¸¾æŠ•ç¥¨\")]),e._v(\" \"),_(\"p\",[e._v(\"Observer\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰3.0 ç‰ˆæœ¬ä»¥åå¼•å…¥çš„ä¸€ä¸ªæœåŠ¡å™¨è§’è‰²ï¼Œåœ¨ä¸å½±å“é›†ç¾¤äº‹åŠ¡å¤„ç†èƒ½åŠ›çš„åŸºç¡€ä¸Šæå‡é›†ç¾¤çš„éäº‹åŠ¡å¤„ç†èƒ½åŠ›\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰å¤„ç†å®¢æˆ·ç«¯çš„éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™ Leader æœåŠ¡å™¨\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰ä¸å‚ä¸ä»»ä½•å½¢å¼çš„æŠ•ç¥¨\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_14-zookeeper-ä¸‹-server-å·¥ä½œçŠ¶æ€\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_14-zookeeper-ä¸‹-server-å·¥ä½œçŠ¶æ€\"}},[e._v(\"#\")]),e._v(\" 14. Zookeeper ä¸‹ Server å·¥ä½œçŠ¶æ€\")]),e._v(\" \"),_(\"p\",[e._v(\"æœåŠ¡å™¨å…·æœ‰å››ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ LOOKINGã€FOLLOWINGã€LEADINGã€OBSERVINGã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰LOOKINGï¼šå¯» æ‰¾ Leader çŠ¶æ€ã€‚å½“æœåŠ¡å™¨å¤„äºè¯¥çŠ¶æ€æ—¶ï¼Œå®ƒä¼šè®¤ä¸ºå½“å‰é›†ç¾¤ä¸­æ²¡æœ‰ Leaderï¼Œå› æ­¤éœ€è¦è¿›å…¥ Leader é€‰ä¸¾çŠ¶æ€ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰FOLLOWINGï¼šè·Ÿéšè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Followerã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰LEADINGï¼šé¢†å¯¼è€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Leaderã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ4ï¼‰OBSERVINGï¼šè§‚å¯Ÿè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Observerã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_15-æ•°æ®åŒæ­¥\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_15-æ•°æ®åŒæ­¥\"}},[e._v(\"#\")]),e._v(\" 15. æ•°æ®åŒæ­¥\")]),e._v(\" \"),_(\"p\",[e._v(\"æ•´ä¸ªé›†ç¾¤å®Œæˆ Leader é€‰ä¸¾ä¹‹åï¼ŒLearnerï¼ˆFollower å’Œ Observer çš„ç»Ÿç§°ï¼‰å›å‘Leader æœåŠ¡å™¨è¿›è¡Œæ³¨å†Œã€‚å½“ Learner æœåŠ¡å™¨æƒ³ Leader æœåŠ¡å™¨å®Œæˆæ³¨å†Œåï¼Œè¿›å…¥æ•°æ®åŒæ­¥ç¯èŠ‚ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"æ•°æ®åŒæ­¥æµç¨‹ï¼šï¼ˆå‡ä»¥æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼è¿›è¡Œï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"Learner å‘ Leader æ³¨å†Œ\")]),e._v(\" \"),_(\"p\",[e._v(\"æ•°æ®åŒæ­¥\")]),e._v(\" \"),_(\"p\",[e._v(\"åŒæ­¥ç¡®è®¤\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper çš„æ•°æ®åŒæ­¥é€šå¸¸åˆ†ä¸ºå››ç±»ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰ç›´æ¥å·®å¼‚åŒ–åŒæ­¥ï¼ˆDIFF åŒæ­¥ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰å…ˆå›æ»šå†å·®å¼‚åŒ–åŒæ­¥ï¼ˆTRUNC+DIFF åŒæ­¥ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰ä»…å›æ»šåŒæ­¥ï¼ˆTRUNC åŒæ­¥ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ4ï¼‰å…¨é‡åŒæ­¥ï¼ˆSNAP åŒæ­¥ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"åœ¨è¿›è¡Œæ•°æ®åŒæ­¥å‰ï¼ŒLeader æœåŠ¡å™¨ä¼šå®Œæˆæ•°æ®åŒæ­¥åˆå§‹åŒ–ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"peerLastZxidï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· ä» learner æœåŠ¡å™¨æ³¨å†Œæ—¶å‘é€çš„ ACKEPOCH æ¶ˆæ¯ä¸­æå– lastZxidï¼ˆè¯¥Learner æœåŠ¡å™¨æœ€åå¤„ç†çš„ ZXIDï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"minCommittedLogï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· Leader æœåŠ¡å™¨ Proposal ç¼“å­˜é˜Ÿåˆ— committedLog ä¸­æœ€å° ZXIDmaxCommittedLogï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· Leader æœåŠ¡å™¨ Proposal ç¼“å­˜é˜Ÿåˆ— committedLog ä¸­æœ€å¤§ ZXIDç›´æ¥å·®å¼‚åŒ–åŒæ­¥ï¼ˆDIFF åŒæ­¥ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· åœºæ™¯ï¼špeerLastZxid ä»‹äº minCommittedLog å’Œ maxCommittedLogä¹‹é—´å…ˆå›æ»šå†å·®å¼‚åŒ–åŒæ­¥ï¼ˆTRUNC+DIFF åŒæ­¥ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· åœºæ™¯ï¼šå½“æ–°çš„ Leader æœåŠ¡å™¨å‘ç°æŸä¸ª Learner æœåŠ¡å™¨åŒ…å«äº†ä¸€æ¡è‡ªå·±æ²¡æœ‰çš„äº‹åŠ¡è®°å½•ï¼Œé‚£ä¹ˆå°±éœ€è¦è®©è¯¥ Learner æœåŠ¡å™¨è¿›è¡Œäº‹åŠ¡å›æ»šâ€“å›æ»šåˆ° LeaderæœåŠ¡å™¨ä¸Šå­˜åœ¨çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€æ¥è¿‘äº peerLastZxid çš„ ZXIDä»…å›æ»šåŒæ­¥ï¼ˆTRUNC åŒæ­¥ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· åœºæ™¯ï¼špeerLastZxid å¤§äº maxCommittedLog\")]),e._v(\" \"),_(\"p\",[e._v(\"å…¨é‡åŒæ­¥ï¼ˆSNAP åŒæ­¥ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· åœºæ™¯ä¸€ï¼špeerLastZxid å°äº minCommittedLog\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· åœºæ™¯äºŒï¼šLeader æœåŠ¡å™¨ä¸Šæ²¡æœ‰ Proposal ç¼“å­˜é˜Ÿåˆ—ä¸” peerLastZxid ä¸ç­‰äº lastProcessZxid\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_16-zookeeper-æ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡çš„é¡ºåºä¸€è‡´æ€§çš„\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_16-zookeeper-æ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡çš„é¡ºåºä¸€è‡´æ€§çš„\"}},[e._v(\"#\")]),e._v(\" 16. zookeeper æ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡çš„é¡ºåºä¸€è‡´æ€§çš„ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"zookeeper é‡‡ç”¨äº†å…¨å±€é€’å¢çš„äº‹åŠ¡ Id æ¥æ ‡è¯†ï¼Œæ‰€æœ‰çš„ proposalï¼ˆæè®®ï¼‰éƒ½åœ¨è¢«æå‡ºçš„æ—¶å€™åŠ ä¸Šäº† zxidï¼Œzxid å®é™…ä¸Šæ˜¯ä¸€ä¸ª 64 ä½çš„æ•°å­—ï¼Œé«˜ 32 ä½æ˜¯ epochï¼ˆ æ—¶æœŸ; çºªå…ƒ; ä¸–; æ–°æ—¶ä»£ï¼‰ç”¨æ¥æ ‡è¯† leader å‘¨æœŸï¼Œå¦‚æœæœ‰æ–°çš„ leader äº§ç”Ÿå‡ºæ¥ï¼Œepochä¼šè‡ªå¢ï¼Œä½ 32 ä½ç”¨æ¥é€’å¢è®¡æ•°ã€‚å½“æ–°äº§ç”Ÿ proposal çš„æ—¶å€™ï¼Œä¼šä¾æ®æ•°æ®åº“çš„ä¸¤é˜¶æ®µè¿‡ç¨‹ï¼Œé¦–å…ˆä¼šå‘å…¶ä»–çš„ server å‘å‡ºäº‹åŠ¡æ‰§è¡Œè¯·æ±‚ï¼Œå¦‚æœè¶…è¿‡åŠæ•°çš„æœºå™¨éƒ½èƒ½æ‰§è¡Œå¹¶ä¸”èƒ½å¤ŸæˆåŠŸï¼Œé‚£ä¹ˆå°±ä¼šå¼€å§‹æ‰§è¡Œã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_17-åˆ†å¸ƒå¼é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆä¼šæœ‰-masterä¸»èŠ‚ç‚¹\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_17-åˆ†å¸ƒå¼é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆä¼šæœ‰-masterä¸»èŠ‚ç‚¹\"}},[e._v(\"#\")]),e._v(\" 17. åˆ†å¸ƒå¼é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆä¼šæœ‰ Masterä¸»èŠ‚ç‚¹ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæœ‰äº›ä¸šåŠ¡é€»è¾‘åªéœ€è¦é›†ç¾¤ä¸­çš„æŸä¸€å°æœºå™¨è¿›è¡Œæ‰§è¡Œï¼Œå…¶ä»–çš„æœºå™¨å¯ä»¥å…±äº«è¿™ä¸ªç»“æœï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘é‡å¤è®¡ç®—ï¼Œæé«˜æ€§èƒ½ï¼Œäºæ˜¯å°±éœ€è¦è¿›è¡Œ leader é€‰ä¸¾ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_18-zk-èŠ‚ç‚¹å®•æœºå¦‚ä½•å¤„ç†\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_18-zk-èŠ‚ç‚¹å®•æœºå¦‚ä½•å¤„ç†\"}},[e._v(\"#\")]),e._v(\" 18. zk èŠ‚ç‚¹å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper æœ¬èº«ä¹Ÿæ˜¯é›†ç¾¤ï¼Œæ¨èé…ç½®ä¸å°‘äº 3 ä¸ªæœåŠ¡å™¨ã€‚Zookeeper è‡ªèº«ä¹Ÿè¦ä¿è¯å½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šç»§ç»­æä¾›æœåŠ¡ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å¦‚æœæ˜¯ä¸€ä¸ª Follower å®•æœºï¼Œè¿˜æœ‰ 2 å°æœåŠ¡å™¨æä¾›è®¿é—®ï¼Œå› ä¸º Zookeeper ä¸Šçš„æ•°æ®æ˜¯æœ‰å¤šä¸ªå‰¯æœ¬çš„ï¼Œæ•°æ®å¹¶ä¸ä¼šä¸¢å¤±ï¼›\")]),e._v(\" \"),_(\"p\",[e._v(\"å¦‚æœæ˜¯ä¸€ä¸ª Leader å®•æœºï¼ŒZookeeper ä¼šé€‰ä¸¾å‡ºæ–°çš„ Leaderã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ZK é›†ç¾¤çš„æœºåˆ¶æ˜¯åªè¦è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ­£å¸¸ï¼Œé›†ç¾¤å°±èƒ½æ­£å¸¸æä¾›æœåŠ¡ã€‚åªæœ‰åœ¨ ZKèŠ‚ç‚¹æŒ‚å¾—å¤ªå¤šï¼Œåªå‰©ä¸€åŠæˆ–ä¸åˆ°ä¸€åŠèŠ‚ç‚¹èƒ½å·¥ä½œï¼Œé›†ç¾¤æ‰å¤±æ•ˆã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"æ‰€ä»¥\")]),e._v(\" \"),_(\"p\",[e._v(\"3 ä¸ªèŠ‚ç‚¹çš„ cluster å¯ä»¥æŒ‚æ‰ 1 ä¸ªèŠ‚ç‚¹(leader å¯ä»¥å¾—åˆ° 2 ç¥¨>1.5)\")]),e._v(\" \"),_(\"p\",[e._v(\"2 ä¸ªèŠ‚ç‚¹çš„ cluster å°±ä¸èƒ½æŒ‚æ‰ä»»ä½• 1 ä¸ªèŠ‚ç‚¹äº†(leader å¯ä»¥å¾—åˆ° 1 ç¥¨<=1)\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_19-zookeeper-è´Ÿè½½å‡è¡¡å’Œ-nginx-è´Ÿè½½å‡è¡¡åŒºåˆ«\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_19-zookeeper-è´Ÿè½½å‡è¡¡å’Œ-nginx-è´Ÿè½½å‡è¡¡åŒºåˆ«\"}},[e._v(\"#\")]),e._v(\" 19. zookeeper è´Ÿè½½å‡è¡¡å’Œ nginx è´Ÿè½½å‡è¡¡åŒºåˆ«\")]),e._v(\" \"),_(\"p\",[e._v(\"zk çš„è´Ÿè½½å‡è¡¡æ˜¯å¯ä»¥è°ƒæ§ï¼Œnginx åªæ˜¯èƒ½è°ƒæƒé‡ï¼Œå…¶ä»–éœ€è¦å¯æ§çš„éƒ½éœ€è¦è‡ªå·±å†™æ’ä»¶ï¼›ä½†æ˜¯ nginx çš„ååé‡æ¯” zk å¤§å¾ˆå¤šï¼Œåº”è¯¥è¯´æŒ‰ä¸šåŠ¡é€‰æ‹©ç”¨å“ªç§æ–¹å¼ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_20-zookeeper-æœ‰å“ªå‡ ç§å‡ ç§éƒ¨ç½²æ¨¡å¼\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_20-zookeeper-æœ‰å“ªå‡ ç§å‡ ç§éƒ¨ç½²æ¨¡å¼\"}},[e._v(\"#\")]),e._v(\" 20. Zookeeper æœ‰å“ªå‡ ç§å‡ ç§éƒ¨ç½²æ¨¡å¼ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper æœ‰ä¸‰ç§éƒ¨ç½²æ¨¡å¼ï¼š\")]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"å•æœºéƒ¨ç½²ï¼šä¸€å°é›†ç¾¤ä¸Šè¿è¡Œï¼›\")]),e._v(\" \"),_(\"li\",[e._v(\"é›†ç¾¤éƒ¨ç½²ï¼šå¤šå°é›†ç¾¤è¿è¡Œï¼›\")]),e._v(\" \"),_(\"li\",[e._v(\"ä¼ªé›†ç¾¤éƒ¨ç½²ï¼šä¸€å°é›†ç¾¤å¯åŠ¨å¤šä¸ª Zookeeper å®ä¾‹è¿è¡Œã€‚\")])]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_21-é›†ç¾¤æœ€å°‘è¦å‡ å°æœºå™¨-é›†ç¾¤è§„åˆ™æ˜¯æ€æ ·çš„-é›†ç¾¤ä¸­æœ‰-3-å°æœåŠ¡å™¨-å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœº-è¿™ä¸ªæ—¶å€™-zookeeper-è¿˜å¯ä»¥ä½¿ç”¨å—\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_21-é›†ç¾¤æœ€å°‘è¦å‡ å°æœºå™¨-é›†ç¾¤è§„åˆ™æ˜¯æ€æ ·çš„-é›†ç¾¤ä¸­æœ‰-3-å°æœåŠ¡å™¨-å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœº-è¿™ä¸ªæ—¶å€™-zookeeper-è¿˜å¯ä»¥ä½¿ç”¨å—\"}},[e._v(\"#\")]),e._v(\" 21. é›†ç¾¤æœ€å°‘è¦å‡ å°æœºå™¨ï¼Œé›†ç¾¤è§„åˆ™æ˜¯æ€æ ·çš„ï¼Ÿé›†ç¾¤ä¸­æœ‰ 3 å°æœåŠ¡å™¨ï¼Œå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œè¿™ä¸ªæ—¶å€™ Zookeeper è¿˜å¯ä»¥ä½¿ç”¨å—ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"é›†ç¾¤è§„åˆ™ä¸º 2N+1 å°ï¼ŒN>0ï¼Œå³ 3 å°ã€‚å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œå•æ•°æœåŠ¡å™¨åªè¦æ²¡è¶…è¿‡ä¸€åŠçš„æœåŠ¡å™¨å®•æœºå°±å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_22-é›†ç¾¤æ”¯æŒåŠ¨æ€æ·»åŠ æœºå™¨å—\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_22-é›†ç¾¤æ”¯æŒåŠ¨æ€æ·»åŠ æœºå™¨å—\"}},[e._v(\"#\")]),e._v(\" 22. é›†ç¾¤æ”¯æŒåŠ¨æ€æ·»åŠ æœºå™¨å—ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"å…¶å®å°±æ˜¯æ°´å¹³æ‰©å®¹äº†ï¼ŒZookeeper åœ¨è¿™æ–¹é¢ä¸å¤ªå¥½ã€‚ä¸¤ç§æ–¹å¼ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"å…¨éƒ¨é‡å¯ï¼šå…³é—­æ‰€æœ‰ Zookeeper æœåŠ¡ï¼Œä¿®æ”¹é…ç½®ä¹‹åå¯åŠ¨ã€‚ä¸å½±å“ä¹‹å‰å®¢æˆ·ç«¯çš„ä¼šè¯ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"é€ä¸ªé‡å¯ï¼šåœ¨è¿‡åŠå­˜æ´»å³å¯ç”¨çš„åŸåˆ™ä¸‹ï¼Œä¸€å°æœºå™¨é‡å¯ä¸å½±å“æ•´ä¸ªé›†ç¾¤å¯¹å¤–æä¾›æœåŠ¡ã€‚è¿™æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹å¼ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"3.5 ç‰ˆæœ¬å¼€å§‹æ”¯æŒåŠ¨æ€æ‰©å®¹ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_23-zookeeper-å¯¹èŠ‚ç‚¹çš„-watch-ç›‘å¬é€šçŸ¥æ˜¯æ°¸ä¹…çš„å—-ä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_23-zookeeper-å¯¹èŠ‚ç‚¹çš„-watch-ç›‘å¬é€šçŸ¥æ˜¯æ°¸ä¹…çš„å—-ä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„\"}},[e._v(\"#\")]),e._v(\" 23. Zookeeper å¯¹èŠ‚ç‚¹çš„ watch ç›‘å¬é€šçŸ¥æ˜¯æ°¸ä¹…çš„å—ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„?\")]),e._v(\" \"),_(\"p\",[e._v(\"ä¸æ˜¯ã€‚å®˜æ–¹å£°æ˜ï¼šä¸€ä¸ª Watch äº‹ä»¶æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§çš„è§¦å‘å™¨ï¼Œå½“è¢«è®¾ç½®äº† Watchçš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜çš„æ—¶å€™ï¼Œåˆ™æœåŠ¡å™¨å°†è¿™ä¸ªæ”¹å˜å‘é€ç»™è®¾ç½®äº† Watch çš„å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿é€šçŸ¥å®ƒä»¬ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæœåŠ¡ç«¯å˜åŠ¨é¢‘ç¹ï¼Œè€Œç›‘å¬çš„å®¢æˆ·ç«¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ¯æ¬¡å˜åŠ¨éƒ½è¦é€šçŸ¥åˆ°æ‰€æœ‰çš„å®¢æˆ·ç«¯ï¼Œç»™ç½‘ç»œå’ŒæœåŠ¡å™¨é€ æˆå¾ˆå¤§å‹åŠ›ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ä¸€èˆ¬æ˜¯å®¢æˆ·ç«¯æ‰§è¡Œ getData(â€œ/èŠ‚ç‚¹ Aâ€,true)ï¼Œå¦‚æœèŠ‚ç‚¹ A å‘ç”Ÿäº†å˜æ›´æˆ–åˆ é™¤ï¼Œå®¢æˆ·ç«¯ä¼šå¾—åˆ°å®ƒçš„ watch äº‹ä»¶ï¼Œä½†æ˜¯åœ¨ä¹‹åèŠ‚ç‚¹ A åˆå‘ç”Ÿäº†å˜æ›´ï¼Œè€Œå®¢æˆ·ç«¯åˆæ²¡æœ‰è®¾ç½® watch äº‹ä»¶ï¼Œå°±ä¸å†ç»™å®¢æˆ·ç«¯å‘é€ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“æœåŠ¡ç«¯çš„æ¯ä¸€æ¬¡å˜åŠ¨ï¼Œæˆ‘åªè¦æœ€æ–°çš„æ•°æ®å³å¯ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_24-zookeeper-çš„-java-å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_24-zookeeper-çš„-java-å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›\"}},[e._v(\"#\")]),e._v(\" 24. Zookeeper çš„ java å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"java å®¢æˆ·ç«¯ï¼šzk è‡ªå¸¦çš„ zkclient åŠ Apache å¼€æºçš„ Curatorã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_25-chubby-æ˜¯ä»€ä¹ˆ-å’Œ-zookeeper-æ¯”ä½ æ€ä¹ˆçœ‹\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_25-chubby-æ˜¯ä»€ä¹ˆ-å’Œ-zookeeper-æ¯”ä½ æ€ä¹ˆçœ‹\"}},[e._v(\"#\")]),e._v(\" 25. chubby æ˜¯ä»€ä¹ˆï¼Œå’Œ zookeeper æ¯”ä½ æ€ä¹ˆçœ‹ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"chubby æ˜¯ google çš„ï¼Œå®Œå…¨å®ç° paxos ç®—æ³•ï¼Œä¸å¼€æºã€‚zookeeper æ˜¯ chubbyçš„å¼€æºå®ç°ï¼Œä½¿ç”¨ zab åè®®ï¼Œpaxos ç®—æ³•çš„å˜ç§ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_26-è¯´å‡ ä¸ª-zookeeper-å¸¸ç”¨çš„å‘½ä»¤ã€‚\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_26-è¯´å‡ ä¸ª-zookeeper-å¸¸ç”¨çš„å‘½ä»¤ã€‚\"}},[e._v(\"#\")]),e._v(\" 26. è¯´å‡ ä¸ª zookeeper å¸¸ç”¨çš„å‘½ä»¤ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å¸¸ç”¨å‘½ä»¤ï¼šls get set create delete ç­‰ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_27-zab-å’Œ-paxos-ç®—æ³•çš„è”ç³»ä¸åŒºåˆ«\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_27-zab-å’Œ-paxos-ç®—æ³•çš„è”ç³»ä¸åŒºåˆ«\"}},[e._v(\"#\")]),e._v(\" 27. ZAB å’Œ Paxos ç®—æ³•çš„è”ç³»ä¸åŒºåˆ«ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"ç›¸åŒç‚¹ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰ä¸¤è€…éƒ½å­˜åœ¨ä¸€ä¸ªç±»ä¼¼äº Leader è¿›ç¨‹çš„è§’è‰²ï¼Œç”±å…¶è´Ÿè´£åè°ƒå¤šä¸ª Follower è¿›ç¨‹çš„è¿è¡Œ\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰Leader è¿›ç¨‹éƒ½ä¼šç­‰å¾…è¶…è¿‡åŠæ•°çš„ Follower åšå‡ºæ­£ç¡®çš„åé¦ˆåï¼Œæ‰ä¼šå°†ä¸€ä¸ªææ¡ˆè¿›è¡Œæäº¤\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰ZAB åè®®ä¸­ï¼Œæ¯ä¸ª Proposal ä¸­éƒ½åŒ…å«ä¸€ä¸ª epoch å€¼æ¥ä»£è¡¨å½“å‰çš„ Leaderå‘¨æœŸï¼ŒPaxos ä¸­åå­—ä¸º Ballot\")]),e._v(\" \"),_(\"p\",[e._v(\"ä¸åŒç‚¹ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"ZAB ç”¨æ¥æ„å»ºé«˜å¯ç”¨çš„åˆ†å¸ƒå¼æ•°æ®ä¸»å¤‡ç³»ç»Ÿï¼ˆZookeeperï¼‰ï¼ŒPaxos æ˜¯ç”¨æ¥æ„å»ºåˆ†å¸ƒå¼ä¸€è‡´æ€§çŠ¶æ€æœºç³»ç»Ÿã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_28-zookeeper-çš„å…¸å‹åº”ç”¨åœºæ™¯\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_28-zookeeper-çš„å…¸å‹åº”ç”¨åœºæ™¯\"}},[e._v(\"#\")]),e._v(\" 28. Zookeeper çš„å…¸å‹åº”ç”¨åœºæ™¯\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper æ˜¯ä¸€ä¸ªå…¸å‹çš„å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„åˆ†å¸ƒå¼æ•°æ®ç®¡ç†ä¸åè°ƒæ¡†æ¶ï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨å®ƒæ¥è¿›è¡Œåˆ†å¸ƒå¼æ•°æ®çš„å‘å¸ƒå’Œè®¢é˜…ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"é€šè¿‡å¯¹ Zookeeper ä¸­ä¸°å¯Œçš„æ•°æ®èŠ‚ç‚¹è¿›è¡Œäº¤å‰ä½¿ç”¨ï¼Œé…åˆ Watcher äº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„æ„å»ºä¸€ç³»åˆ—åˆ†å¸ƒå¼åº”ç”¨ä¸­å¹´éƒ½ä¼šæ¶‰åŠçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¦‚ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰æ•°æ®å‘å¸ƒ/è®¢é˜…\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰è´Ÿè½½å‡è¡¡\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰å‘½åæœåŠ¡\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ4ï¼‰åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ5ï¼‰é›†ç¾¤ç®¡ç†\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ6ï¼‰Master é€‰ä¸¾\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ7ï¼‰åˆ†å¸ƒå¼é”\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ8ï¼‰åˆ†å¸ƒå¼é˜Ÿåˆ—\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"æ•°æ®å‘å¸ƒ/è®¢é˜…\")])]),e._v(\" \"),_(\"p\",[e._v(\"ä»‹ç»\")]),e._v(\" \"),_(\"p\",[e._v(\"æ•°æ®å‘å¸ƒ/è®¢é˜…ç³»ç»Ÿï¼Œå³æ‰€è°“çš„é…ç½®ä¸­å¿ƒï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å‘å¸ƒè€…å‘å¸ƒæ•°æ®ä¾›è®¢é˜…è€…è¿›è¡Œæ•°æ®è®¢é˜…ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ç›®çš„\")]),e._v(\" \"),_(\"p\",[e._v(\"åŠ¨æ€è·å–æ•°æ®ï¼ˆé…ç½®ä¿¡æ¯ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"å®ç°æ•°æ®ï¼ˆé…ç½®ä¿¡æ¯ï¼‰çš„é›†ä¸­å¼ç®¡ç†å’Œæ•°æ®çš„åŠ¨æ€æ›´æ–°\")]),e._v(\" \"),_(\"p\",[e._v(\"è®¾è®¡æ¨¡å¼\")]),e._v(\" \"),_(\"p\",[e._v(\"Push æ¨¡å¼\")]),e._v(\" \"),_(\"p\",[e._v(\"Pull æ¨¡å¼\")]),e._v(\" \"),_(\"p\",[e._v(\"æ•°æ®ï¼ˆé…ç½®ä¿¡æ¯ï¼‰ç‰¹æ€§\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰æ•°æ®é‡é€šå¸¸æ¯”è¾ƒå°\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰æ•°æ®å†…å®¹åœ¨è¿è¡Œæ—¶ä¼šå‘ç”ŸåŠ¨æ€æ›´æ–°\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ3ï¼‰é›†ç¾¤ä¸­å„æœºå™¨å…±äº«ï¼Œé…ç½®ä¸€è‡´\")]),e._v(\" \"),_(\"p\",[e._v(\"å¦‚ï¼šæœºå™¨åˆ—è¡¨ä¿¡æ¯ã€è¿è¡Œæ—¶å¼€å…³é…ç½®ã€æ•°æ®åº“é…ç½®ä¿¡æ¯ç­‰\")]),e._v(\" \"),_(\"p\",[e._v(\"åŸºäº Zookeeper çš„å®ç°æ–¹å¼\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· æ•°æ®å­˜å‚¨ï¼šå°†æ•°æ®ï¼ˆé…ç½®ä¿¡æ¯ï¼‰å­˜å‚¨åˆ° Zookeeper ä¸Šçš„ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· æ•°æ®è·å–ï¼šåº”ç”¨åœ¨å¯åŠ¨åˆå§‹åŒ–èŠ‚ç‚¹ä» Zookeeper æ•°æ®èŠ‚ç‚¹è¯»å–æ•°æ®ï¼Œå¹¶åœ¨è¯¥èŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€ä¸ªæ•°æ®å˜æ›´ Watcher\")]),e._v(\" \"),_(\"p\",[e._v(\"Â· æ•°æ®å˜æ›´ï¼šå½“å˜æ›´æ•°æ®æ—¶ï¼Œæ›´æ–° Zookeeper å¯¹åº”èŠ‚ç‚¹æ•°æ®ï¼ŒZookeeperä¼šå°†æ•°æ®å˜æ›´é€šçŸ¥å‘åˆ°å„å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ¥åˆ°é€šçŸ¥åé‡æ–°è¯»å–å˜æ›´åçš„æ•°æ®å³å¯ã€‚\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"è´Ÿè½½å‡è¡¡\")])]),e._v(\" \"),_(\"p\",[e._v(\"zk çš„å‘½åæœåŠ¡\")]),e._v(\" \"),_(\"p\",[e._v(\"å‘½åæœåŠ¡æ˜¯æŒ‡é€šè¿‡æŒ‡å®šçš„åå­—æ¥è·å–èµ„æºæˆ–è€…æœåŠ¡çš„åœ°å€ï¼Œåˆ©ç”¨ zk åˆ›å»ºä¸€ä¸ªå…¨å±€çš„è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªåå­—ï¼ŒæŒ‡å‘é›†ç¾¤ä¸­çš„é›†ç¾¤ï¼Œæä¾›çš„æœåŠ¡çš„åœ°å€ï¼Œæˆ–è€…ä¸€ä¸ªè¿œç¨‹çš„å¯¹è±¡ç­‰ç­‰ã€‚\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"åˆ†å¸ƒå¼é€šçŸ¥å’Œåè°ƒ\")])]),e._v(\" \"),_(\"p\",[e._v(\"å¯¹äºç³»ç»Ÿè°ƒåº¦æ¥è¯´ï¼šæ“ä½œäººå‘˜å‘é€é€šçŸ¥å®é™…æ˜¯é€šè¿‡æ§åˆ¶å°æ”¹å˜æŸä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ï¼Œç„¶å zk å°†è¿™äº›å˜åŒ–å‘é€ç»™æ³¨å†Œäº†è¿™ä¸ªèŠ‚ç‚¹çš„ watcher çš„æ‰€æœ‰å®¢æˆ·ç«¯ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å¯¹äºæ‰§è¡Œæƒ…å†µæ±‡æŠ¥ï¼šæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½åœ¨æŸä¸ªç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹ã€‚å¹¶æºå¸¦å·¥ä½œçš„è¿›åº¦æ•°æ®ï¼Œè¿™æ ·æ±‡æ€»çš„è¿›ç¨‹å¯ä»¥ç›‘æ§ç›®å½•å­èŠ‚ç‚¹çš„å˜åŒ–è·å¾—å·¥ä½œè¿›åº¦çš„å®æ—¶çš„å…¨å±€æƒ…å†µã€‚\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"zk çš„å‘½åæœåŠ¡ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰\")])]),e._v(\" \"),_(\"p\",[e._v(\"å‘½åæœåŠ¡æ˜¯æŒ‡é€šè¿‡æŒ‡å®šçš„åå­—æ¥è·å–èµ„æºæˆ–è€…æœåŠ¡çš„åœ°å€ï¼Œåˆ©ç”¨ zk åˆ›å»ºä¸€ä¸ªå…¨å±€çš„è·¯å¾„ï¼Œå³æ˜¯å”¯ä¸€çš„è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªåå­—ï¼ŒæŒ‡å‘é›†ç¾¤ä¸­çš„é›†ç¾¤ï¼Œæä¾›çš„æœåŠ¡çš„åœ°å€ï¼Œæˆ–è€…ä¸€ä¸ªè¿œç¨‹çš„å¯¹è±¡ç­‰ç­‰ã€‚\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"zk çš„é…ç½®ç®¡ç†ï¼ˆæ–‡ä»¶ç³»ç»Ÿã€é€šçŸ¥æœºåˆ¶ï¼‰\")])]),e._v(\" \"),_(\"p\",[e._v(\"ç¨‹åºåˆ†å¸ƒå¼çš„éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œå°†ç¨‹åºçš„é…ç½®ä¿¡æ¯æ”¾åœ¨ zk çš„ znode ä¸‹ï¼Œå½“æœ‰é…ç½®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¹Ÿå°±æ˜¯ znode å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜ zk ä¸­æŸä¸ªç›®å½•èŠ‚ç‚¹çš„å†…å®¹ï¼Œåˆ©ç”¨ watcher é€šçŸ¥ç»™å„ä¸ªå®¢æˆ·ç«¯ï¼Œä»è€Œæ›´æ”¹é…ç½®ã€‚\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"Zookeeper é›†ç¾¤ç®¡ç†ï¼ˆæ–‡ä»¶ç³»ç»Ÿã€é€šçŸ¥æœºåˆ¶ï¼‰\")])]),e._v(\" \"),_(\"p\",[e._v(\"æ‰€è°“é›†ç¾¤ç®¡ç†æ— åœ¨ä¹ä¸¤ç‚¹ï¼šæ˜¯å¦æœ‰æœºå™¨é€€å‡ºå’ŒåŠ å…¥ã€é€‰ä¸¾ masterã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å¯¹äºç¬¬ä¸€ç‚¹ï¼Œæ‰€æœ‰æœºå™¨çº¦å®šåœ¨çˆ¶ç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶ç›®å½•èŠ‚ç‚¹ï¼Œç„¶åç›‘å¬çˆ¶ç›®å½•èŠ‚ç‚¹\")]),e._v(\" \"),_(\"p\",[e._v(\"çš„å­èŠ‚ç‚¹å˜åŒ–æ¶ˆæ¯ã€‚ä¸€æ—¦æœ‰æœºå™¨æŒ‚æ‰ï¼Œè¯¥æœºå™¨ä¸ zookeeper çš„è¿æ¥æ–­å¼€ï¼Œå…¶æ‰€åˆ›å»ºçš„ä¸´æ—¶ç›®å½•èŠ‚ç‚¹è¢«åˆ é™¤ï¼Œæ‰€æœ‰å…¶ä»–æœºå™¨éƒ½æ”¶åˆ°é€šçŸ¥ï¼šæŸä¸ªå…„å¼Ÿç›®å½•è¢«åˆ é™¤ï¼Œäºæ˜¯ï¼Œæ‰€æœ‰äººéƒ½çŸ¥é“ï¼šå®ƒä¸Šèˆ¹äº†ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"æ–°æœºå™¨åŠ å…¥ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œæ‰€æœ‰æœºå™¨æ”¶åˆ°é€šçŸ¥ï¼šæ–°å…„å¼Ÿç›®å½•åŠ å…¥ï¼Œhighcount åˆæœ‰äº†ï¼Œå¯¹äºç¬¬äºŒç‚¹ï¼Œæˆ‘ä»¬ç¨å¾®æ”¹å˜ä¸€ä¸‹ï¼Œæ‰€æœ‰æœºå™¨åˆ›å»ºä¸´æ—¶é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹ï¼Œæ¯æ¬¡é€‰å–ç¼–å·æœ€å°çš„æœºå™¨ä½œä¸º master å°±å¥½ã€‚\")]),e._v(\" \"),_(\"p\",[_(\"strong\",[e._v(\"Zookeeper åˆ†å¸ƒå¼é”ï¼ˆæ–‡ä»¶ç³»ç»Ÿã€é€šçŸ¥æœºåˆ¶ï¼‰\")])]),e._v(\" \"),_(\"p\",[e._v(\"æœ‰äº† zookeeper çš„ä¸€è‡´æ€§æ–‡ä»¶ç³»ç»Ÿï¼Œé”çš„é—®é¢˜å˜å¾—å®¹æ˜“ã€‚é”æœåŠ¡å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ä¸ªæ˜¯ä¿æŒç‹¬å ï¼Œå¦ä¸€ä¸ªæ˜¯æ§åˆ¶æ—¶åºã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å¯¹äºç¬¬ä¸€ç±»ï¼Œæˆ‘ä»¬å°† zookeeper ä¸Šçš„ä¸€ä¸ª znode çœ‹ä½œæ˜¯ä¸€æŠŠé”ï¼Œé€šè¿‡ createznodeçš„æ–¹å¼æ¥å®ç°ã€‚æ‰€æœ‰å®¢æˆ·ç«¯éƒ½å»åˆ›å»º /distribute_lock èŠ‚ç‚¹ï¼Œæœ€ç»ˆæˆåŠŸåˆ›å»ºçš„é‚£ä¸ªå®¢æˆ·ç«¯ä¹Ÿå³æ‹¥æœ‰äº†è¿™æŠŠé”ã€‚ç”¨å®Œåˆ é™¤æ‰è‡ªå·±åˆ›å»ºçš„ distribute_lock èŠ‚ç‚¹å°±é‡Šæ”¾å‡ºé”ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å¯¹äºç¬¬äºŒç±»ï¼Œ /distribute_lock å·²ç»é¢„å…ˆå­˜åœ¨ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯åœ¨å®ƒä¸‹é¢åˆ›å»ºä¸´æ—¶é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹ï¼Œå’Œé€‰ master ä¸€æ ·ï¼Œç¼–å·æœ€å°çš„è·å¾—é”ï¼Œç”¨å®Œåˆ é™¤ï¼Œä¾æ¬¡æ–¹ä¾¿ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeper é˜Ÿåˆ—ç®¡ç†ï¼ˆæ–‡ä»¶ç³»ç»Ÿã€é€šçŸ¥æœºåˆ¶ï¼‰\")]),e._v(\" \"),_(\"p\",[e._v(\"ä¸¤ç§ç±»å‹çš„é˜Ÿåˆ—ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ1ï¼‰åŒæ­¥é˜Ÿåˆ—ï¼Œå½“ä¸€ä¸ªé˜Ÿåˆ—çš„æˆå‘˜éƒ½èšé½æ—¶ï¼Œè¿™ä¸ªé˜Ÿåˆ—æ‰å¯ç”¨ï¼Œå¦åˆ™ä¸€ç›´ç­‰å¾…æ‰€æœ‰æˆå‘˜åˆ°è¾¾ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ï¼ˆ2ï¼‰é˜Ÿåˆ—æŒ‰ç…§ FIFO æ–¹å¼è¿›è¡Œå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ç¬¬ä¸€ç±»ï¼Œåœ¨çº¦å®šç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶ç›®å½•èŠ‚ç‚¹ï¼Œç›‘å¬èŠ‚ç‚¹æ•°ç›®æ˜¯å¦æ˜¯æˆ‘ä»¬è¦æ±‚çš„æ•°ç›®ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"ç¬¬äºŒç±»ï¼Œå’Œåˆ†å¸ƒå¼é”æœåŠ¡ä¸­çš„æ§åˆ¶æ—¶åºåœºæ™¯åŸºæœ¬åŸç†ä¸€è‡´ï¼Œå…¥åˆ—æœ‰ç¼–å·ï¼Œå‡ºåˆ—æŒ‰ç¼–å·ã€‚åœ¨ç‰¹å®šçš„ç›®å½•ä¸‹åˆ›å»º PERSISTENT_SEQUENTIAL èŠ‚ç‚¹ï¼Œåˆ›å»ºæˆåŠŸæ—¶Watcher é€šçŸ¥ç­‰å¾…çš„é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—åˆ é™¤åºåˆ—å·æœ€å°çš„èŠ‚ç‚¹ç”¨ä»¥æ¶ˆè´¹ã€‚æ­¤åœºæ™¯ä¸‹Zookeeper çš„ znode ç”¨äºæ¶ˆæ¯å­˜å‚¨ï¼Œznode å­˜å‚¨çš„æ•°æ®å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯å†…å®¹ï¼ŒSEQUENTIAL åºåˆ—å·å°±æ˜¯æ¶ˆæ¯çš„ç¼–å·ï¼ŒæŒ‰åºå–å‡ºå³å¯ã€‚ç”±äºåˆ›å»ºçš„èŠ‚ç‚¹æ˜¯æŒä¹…åŒ–çš„ï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒé˜Ÿåˆ—æ¶ˆæ¯çš„ä¸¢å¤±é—®é¢˜ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_29-zookeeper-éƒ½æœ‰å“ªäº›åŠŸèƒ½\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_29-zookeeper-éƒ½æœ‰å“ªäº›åŠŸèƒ½\"}},[e._v(\"#\")]),e._v(\" 29. Zookeeper éƒ½æœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ\")]),e._v(\" \"),_(\"ol\",[_(\"li\",[e._v(\"é›†ç¾¤ç®¡ç†ï¼šç›‘æ§èŠ‚ç‚¹å­˜æ´»çŠ¶æ€ã€è¿è¡Œè¯·æ±‚ç­‰ï¼›\")]),e._v(\" \"),_(\"li\",[e._v(\"ä¸»èŠ‚ç‚¹é€‰ä¸¾ï¼šä¸»èŠ‚ç‚¹æŒ‚æ‰äº†ä¹‹åå¯ä»¥ä»å¤‡ç”¨çš„èŠ‚ç‚¹å¼€å§‹æ–°ä¸€è½®é€‰ä¸»ï¼Œä¸»èŠ‚ç‚¹é€‰ä¸¾è¯´çš„å°±æ˜¯è¿™ä¸ªé€‰ä¸¾çš„è¿‡ç¨‹ï¼Œä½¿ç”¨ Zookeeper å¯ä»¥ååŠ©å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼›\")]),e._v(\" \"),_(\"li\",[e._v(\"åˆ†å¸ƒå¼é”ï¼šZookeeper æä¾›ä¸¤ç§é”ï¼šç‹¬å é”ã€å…±äº«é”ã€‚ç‹¬å é”å³ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨èµ„æºï¼Œå…±äº«é”æ˜¯è¯»é”å…±äº«ï¼Œè¯»å†™äº’æ–¥ï¼Œå³å¯ä»¥æœ‰å¤šçº¿çº¿ç¨‹åŒæ—¶è¯»åŒä¸€ä¸ªèµ„æºï¼Œå¦‚æœè¦ä½¿ç”¨å†™é”ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚Zookeeper å¯ä»¥å¯¹åˆ†å¸ƒå¼é”è¿›è¡Œæ§åˆ¶ã€‚\")]),e._v(\" \"),_(\"li\",[e._v(\"å‘½åæœåŠ¡ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä½¿ç”¨å‘½åæœåŠ¡ï¼Œå®¢æˆ·ç«¯åº”ç”¨èƒ½å¤Ÿæ ¹æ®æŒ‡å®šåå­—æ¥è·å–èµ„æºæˆ–æœåŠ¡çš„åœ°å€ï¼Œæä¾›è€…ç­‰ä¿¡æ¯ã€‚\")])]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_30-è¯´ä¸€ä¸‹-zookeeper-çš„é€šçŸ¥æœºåˆ¶\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_30-è¯´ä¸€ä¸‹-zookeeper-çš„é€šçŸ¥æœºåˆ¶\"}},[e._v(\"#\")]),e._v(\" 30. è¯´ä¸€ä¸‹ Zookeeper çš„é€šçŸ¥æœºåˆ¶ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"client ç«¯ä¼šå¯¹æŸä¸ª znode å»ºç«‹ä¸€ä¸ª watcher äº‹ä»¶ï¼Œå½“è¯¥ znode å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿™äº› client ä¼šæ”¶åˆ° zk çš„é€šçŸ¥ï¼Œç„¶å client å¯ä»¥æ ¹æ® znode å˜åŒ–æ¥åšå‡ºä¸šåŠ¡ä¸Šçš„æ”¹å˜ç­‰ã€‚\")]),e._v(\" \"),_(\"h2\",{attrs:{id:\"_31-zookeeper-å’Œ-dubbo-çš„å…³ç³»\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_31-zookeeper-å’Œ-dubbo-çš„å…³ç³»\"}},[e._v(\"#\")]),e._v(\" 31. Zookeeper å’Œ Dubbo çš„å…³ç³»ï¼Ÿ\")]),e._v(\" \"),_(\"p\",[e._v(\"Zookeeperçš„ä½œç”¨ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"zookeeperç”¨æ¥æ³¨å†ŒæœåŠ¡å’Œè¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå“ªä¸€ä¸ªæœåŠ¡ç”±å“ªä¸€ä¸ªæœºå™¨æ¥æä¾›å¿…éœ€è®©è°ƒç”¨è€…çŸ¥é“ï¼Œç®€å•æ¥è¯´å°±æ˜¯ipåœ°å€å’ŒæœåŠ¡åç§°çš„å¯¹åº”å…³ç³»ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç¡¬ç¼–ç çš„æ–¹å¼æŠŠè¿™ç§å¯¹åº”å…³ç³»åœ¨è°ƒç”¨æ–¹ä¸šåŠ¡ä»£ç ä¸­å®ç°ï¼Œä½†æ˜¯å¦‚æœæä¾›æœåŠ¡çš„æœºå™¨æŒ‚æ‰è°ƒç”¨è€…æ— æ³•çŸ¥æ™“ï¼Œå¦‚æœä¸æ›´æ”¹ä»£ç ä¼šç»§ç»­è¯·æ±‚æŒ‚æ‰çš„æœºå™¨æä¾›æœåŠ¡ã€‚zookeeperé€šè¿‡å¿ƒè·³æœºåˆ¶å¯ä»¥æ£€æµ‹æŒ‚æ‰çš„æœºå™¨å¹¶å°†æŒ‚æ‰æœºå™¨çš„ipå’ŒæœåŠ¡å¯¹åº”å…³ç³»ä»åˆ—è¡¨ä¸­åˆ é™¤ã€‚è‡³äºæ”¯æŒé«˜å¹¶å‘ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ¨ªå‘æ‰©å±•ï¼Œåœ¨ä¸æ›´æ”¹ä»£ç çš„æƒ…å†µé€šè¿‡æ·»åŠ æœºå™¨æ¥æé«˜è¿ç®—èƒ½åŠ›ã€‚é€šè¿‡æ·»åŠ æ–°çš„æœºå™¨å‘zookeeperæ³¨å†ŒæœåŠ¡ï¼ŒæœåŠ¡çš„æä¾›è€…å¤šäº†èƒ½æœåŠ¡çš„å®¢æˆ·å°±å¤šäº†ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"dubboï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"æ˜¯ç®¡ç†ä¸­é—´å±‚çš„å·¥å…·ï¼Œåœ¨ä¸šåŠ¡å±‚åˆ°æ•°æ®ä»“åº“é—´æœ‰éå¸¸å¤šæœåŠ¡çš„æ¥å…¥å’ŒæœåŠ¡æä¾›è€…éœ€è¦è°ƒåº¦ï¼Œdubboæä¾›ä¸€ä¸ªæ¡†æ¶è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\\næ³¨æ„è¿™é‡Œçš„dubboåªæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè‡³äºä½ æ¶å­ä¸Šæ”¾ä»€ä¹ˆæ˜¯å®Œå…¨å–å†³äºä½ çš„ï¼Œå°±åƒä¸€ä¸ªæ±½è½¦éª¨æ¶ï¼Œä½ éœ€è¦é…ä½ çš„è½®å­å¼•æ“ã€‚è¿™ä¸ªæ¡†æ¶ä¸­è¦å®Œæˆè°ƒåº¦å¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ³¨å†Œä¸­å¿ƒï¼Œå‚¨å­˜æ‰€æœ‰æœåŠ¡çš„å…ƒæ•°æ®ï¼Œä½ å¯ä»¥ç”¨zkï¼Œä¹Ÿå¯ä»¥ç”¨åˆ«çš„ï¼Œåªæ˜¯å¤§å®¶éƒ½ç”¨zkã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"zookeeperå’Œdubboçš„å…³ç³»ï¼š\")]),e._v(\" \"),_(\"p\",[e._v(\"Dubbo çš„å°†æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæŠ½è±¡ï¼Œå®ƒå¯ä»¥å¤–æ¥ä¸åŒçš„å­˜å‚¨åª’ä»‹ç»™æ³¨å†Œä¸­å¿ƒæä¾›æœåŠ¡ï¼Œæœ‰ ZooKeeperï¼ŒMemcachedï¼ŒRedis ç­‰ã€‚\")]),e._v(\" \"),_(\"p\",[e._v(\"å¼•å…¥äº† ZooKeeper ä½œä¸ºå­˜å‚¨åª’ä»‹ï¼Œä¹Ÿå°±æŠŠ ZooKeeper çš„ç‰¹æ€§å¼•è¿›æ¥ã€‚é¦–å…ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Œå•æ³¨å†Œä¸­å¿ƒçš„æ‰¿è½½èƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œåœ¨æµé‡è¾¾åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶ å€™å°±éœ€è¦åˆ†æµï¼Œè´Ÿè½½å‡è¡¡å°±æ˜¯ä¸ºäº†åˆ†æµè€Œå­˜åœ¨çš„ï¼Œä¸€ä¸ª ZooKeeper ç¾¤é…åˆç›¸åº”çš„ Web åº”ç”¨å°±å¯ä»¥å¾ˆå®¹æ˜“è¾¾åˆ°è´Ÿè½½å‡è¡¡ï¼›èµ„æºåŒæ­¥ï¼Œå•å•æœ‰è´Ÿè½½å‡è¡¡è¿˜ä¸ å¤Ÿï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®å’Œèµ„æºéœ€è¦åŒæ­¥ï¼ŒZooKeeper é›†ç¾¤å°±å¤©ç„¶å…·å¤‡æœ‰è¿™æ ·çš„åŠŸèƒ½ï¼›å‘½åæœåŠ¡ï¼Œå°†æ ‘çŠ¶ç»“æ„ç”¨äºç»´æŠ¤å…¨å±€çš„æœåŠ¡åœ°å€åˆ—è¡¨ï¼ŒæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨ çš„æ—¶å€™ï¼Œå‘ ZooKeeper ä¸Šçš„æŒ‡å®šèŠ‚ç‚¹ /dubbo/${serviceName}/providers ç›®å½•ä¸‹å†™å…¥è‡ªå·±çš„ URL åœ°å€ï¼Œè¿™ä¸ªæ“ä½œå°±å®Œæˆäº†æœåŠ¡çš„å‘å¸ƒã€‚ å…¶ä»–ç‰¹æ€§è¿˜æœ‰ Mast é€‰ä¸¾ï¼Œåˆ†å¸ƒå¼é”ç­‰ã€‚\")]),e._v(\" \"),_(\"p\",[_(\"img\",{attrs:{src:\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMC8zMS8xNmUyMTliYzc3MDA5OGRm?x-oss-process=image/format,png\",alt:\"img\"}})])])}),[],!1,null,null,null);v.default=o.exports}}]);","extractedComments":[]}