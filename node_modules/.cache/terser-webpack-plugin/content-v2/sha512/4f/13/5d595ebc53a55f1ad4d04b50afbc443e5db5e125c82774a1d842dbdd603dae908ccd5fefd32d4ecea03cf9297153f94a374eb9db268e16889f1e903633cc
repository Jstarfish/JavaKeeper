{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{664:function(t,a,s){\"use strict\";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"zookeeper-实战\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zookeeper-实战\"}},[t._v(\"#\")]),t._v(\" Zookeeper 实战\")]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"上篇大都是概念性东西，作为一名优秀的 Javaer，肯定要实战一番。加油，奥利给！\")]),t._v(\" \"),s(\"p\",[t._v(\"文章收集在 GitHub \"),s(\"a\",{attrs:{href:\"https://github.com/Jstarfish/JavaEgg\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"JavaEgg\"),s(\"OutboundLink\")],1),t._v(\" 中，欢迎 star+指导，N线互联网开发必备兵器库\")])]),t._v(\" \"),s(\"p\",[t._v(\"分布式安装部署，作为一个后端开发正规军，公司一般也不需要你去自己安装，就不探讨了。\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"客户端命令行操作\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#客户端命令行操作\"}},[t._v(\"#\")]),t._v(\" 客户端命令行操作\")]),t._v(\" \"),s(\"p\",[t._v(\"安装好了之后，先在服务器上了解下命令\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"操作-zookeeper\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#操作-zookeeper\"}},[t._v(\"#\")]),t._v(\" 操作 Zookeeper\")]),t._v(\" \"),s(\"ol\",[s(\"li\",[t._v(\"启动 Zookeeper:  \"),s(\"code\",[t._v(\"bin/zkServer.sh start\")])])]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[t._v(\"/usr/local/bin/java\\nZooKeeper JMX enabled by default\\nUsing config: /home/sync360/test/apache-zookeeper-3.5.7-bin/bin/\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"..\")]),t._v(\"/conf/zoo.cfg\\nStarting zookeeper \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"..\")]),t._v(\". STARTED\\n\")])])]),s(\"ol\",{attrs:{start:\"2\"}},[s(\"li\",[t._v(\"查看进程是否启动: \"),s(\"code\",[t._v(\"jps\")])])]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"4020\")]),t._v(\" Jps\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"4001\")]),t._v(\" QuorumPeerMain\\n\")])])]),s(\"ol\",{attrs:{start:\"3\"}},[s(\"li\",[t._v(\"查看状态：\"),s(\"code\",[t._v(\"bin/zkServer.sh status\")])])]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[t._v(\"/usr/local/bin/java\\nZooKeeper JMX enabled by default\\nUsing config: /home/apache-zookeeper-3.5.7-bin/bin/\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"..\")]),t._v(\"/conf/zoo.cfg\\nClient port found: \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2181\")]),t._v(\". Client address: localhost.\\nMode: standalone\\n\")])])]),s(\"ol\",{attrs:{start:\"4\"}},[s(\"li\",[t._v(\"启动客户端：\"),s(\"code\",[t._v(\"bin/zkCli.sh\")])])]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[t._v(\"Connecting to localhost:2181\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2020\")]),t._v(\"-03-25 \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"15\")]),t._v(\":41:19,112 \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"myid:\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" - INFO  \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"main:Environment@109\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" - Client environment:zookeeper.version\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"3.5\")]),t._v(\".7-f0fdd52973d373ffd9c86b81d99842dc2c7f660e, built on 02/10/2020 \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"11\")]),t._v(\":30 GMT\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"..\")]),t._v(\".\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2020\")]),t._v(\"-03-25 \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"15\")]),t._v(\":41:19,183 \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"myid:\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" - INFO  \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"main:ClientCnxn@1653\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" - zookeeper.request.timeout value is \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\". feature \"),s(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[t._v(\"enabled\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"\\nWelcome to ZooKeeper\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!\")]),t._v(\"\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"..\")]),t._v(\".\\n\\nWATCHER::\\n\\nWatchedEvent state:SyncConnected type:None path:null\\n\")])])]),s(\"ol\",{attrs:{start:\"5\"}},[s(\"li\",[s(\"p\",[t._v(\"退出客户端：\"),s(\"code\",[t._v(\"quit\")])])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"停止 Zookeeper:  \"),s(\"code\",[t._v(\"bin/zkServer.sh stop\")])])])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"常用命令\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#常用命令\"}},[t._v(\"#\")]),t._v(\" 常用命令\")]),t._v(\" \"),s(\"table\",[s(\"thead\",[s(\"tr\",[s(\"th\",[t._v(\"命令基本语法\")]),t._v(\" \"),s(\"th\",[t._v(\"功能描述\")])])]),t._v(\" \"),s(\"tbody\",[s(\"tr\",[s(\"td\",[t._v(\"help\")]),t._v(\" \"),s(\"td\",[t._v(\"显示所有操作命令\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",[t._v(\"ls path [watch]\")]),t._v(\" \"),s(\"td\",[t._v(\"使用 ls 命令来查看当前znode中所包含的内容\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",[t._v(\"ls2 path [watch]\")]),t._v(\" \"),s(\"td\",[t._v(\"查看当前节点数据并能看到更新次数等数据\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",[t._v(\"create\")]),t._v(\" \"),s(\"td\",[t._v(\"普通创建-s  含有序列-e  临时（重启或者超时消失）\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",[t._v(\"get path [watch]\")]),t._v(\" \"),s(\"td\",[t._v(\"获得节点的值\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",[t._v(\"set\")]),t._v(\" \"),s(\"td\",[t._v(\"设置节点的具体值\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",[t._v(\"stat\")]),t._v(\" \"),s(\"td\",[t._v(\"查看节点状态\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",[t._v(\"delete\")]),t._v(\" \"),s(\"td\",[t._v(\"删除节点\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",[t._v(\"rmr\")]),t._v(\" \"),s(\"td\",[t._v(\"递归删除节点\")])])])]),t._v(\" \"),s(\"h4\",{attrs:{id:\"ls-查看当前-zk-中所包含的内容\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ls-查看当前-zk-中所包含的内容\"}},[t._v(\"#\")]),t._v(\" ls 查看当前 zk 中所包含的内容\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"zk: localhost:2181\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"CONNECTED\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"ls\")]),t._v(\" /\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"lazyegg, zookeeper\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\")])])]),s(\"h4\",{attrs:{id:\"create-创建一个新的-znode\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#create-创建一个新的-znode\"}},[t._v(\"#\")]),t._v(\" create 创建一个新的 znode\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"zk: localhost:2181\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"CONNECTED\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" create /test\\nCreated /test\\n\")])])]),s(\"h4\",{attrs:{id:\"get-查看新的-znode-的值\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#get-查看新的-znode-的值\"}},[t._v(\"#\")]),t._v(\" get 查看新的 znode 的值\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"zk: localhost:2181\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"CONNECTED\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"4\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" get /test\\nnull\\n\")])])]),s(\"p\",[t._v(\"可以看到值为 null,我们刚才设置了一个没有值得节点，也可以通过 \"),s(\"code\",[t._v(\"create /zoo dog\")]),t._v(\" 直接创建有内容的节点\")]),t._v(\" \"),s(\"h4\",{attrs:{id:\"set-对-zk-所关联的字符串进行设置\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#set-对-zk-所关联的字符串进行设置\"}},[t._v(\"#\")]),t._v(\" set 对 zk 所关联的字符串进行设置\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[t._v(\"set\")]),t._v(\" /test hello\\n\")])])]),s(\"h4\",{attrs:{id:\"delete-删除节点\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#delete-删除节点\"}},[t._v(\"#\")]),t._v(\" delete 删除节点\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[t._v(\"delete /test\\n\")])])]),s(\"h2\",{attrs:{id:\"api应用\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#api应用\"}},[t._v(\"#\")]),t._v(\" API应用\")]),t._v(\" \"),s(\"p\",[t._v(\"不管 Java 是不是最好的语言，我都要说 \"),s(\"code\",[t._v(\"I use Java. Java for ever\")]),t._v(\"。所以我们要用 Java 去操作 zookeeper。\")]),t._v(\" \"),s(\"p\",[t._v(\"zookeeper的 Java 常用客户端有 3 种，分别是：zookeeper原生API、开源的 zkclient、Apache Curator\")]),t._v(\" \"),s(\"h4\",{attrs:{id:\"_1-原生api\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-原生api\"}},[t._v(\"#\")]),t._v(\" 1. 原生API\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"创建连接的时候是异步的，所以我们在开发的时候需要人工的写代码等待创建节点的状态，如果需要的话。\")]),t._v(\" \"),s(\"li\",[t._v(\"连接时无超时重连机制。本人觉得这个非常重要，因为在现实使用中，网络是不可信的，在创建节点的时候要考虑到网络的不稳定性。因此，超时重连机制是非常必要的。\")]),t._v(\" \"),s(\"li\",[t._v(\"zookeepr 的通信是网络通信，因此在数据通信的时候会消耗一定的网络IO和带宽。但zookeeper没有序列化机制，需要开发者自行开发。\")]),t._v(\" \"),s(\"li\",[t._v(\"Watcher注册一次，触发后会自动失效。\")]),t._v(\" \"),s(\"li\",[t._v(\"不支持递归创建树形节点。这点是比较有用的，类似Linux的命令：\"),s(\"code\",[t._v(\"mkdir -p /xxx/xxx/\")])])]),t._v(\" \"),s(\"h4\",{attrs:{id:\"_2-zkclient\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-zkclient\"}},[t._v(\"#\")]),t._v(\" 2. ZkClient\")]),t._v(\" \"),s(\"p\",[t._v(\"ZkClient 是 Github上一个开源的 zk 客户端，由 datameer 的工程师 Stefan Groschupf 和 Peter Voss 一起开发\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"解决session会话超时重连\")]),t._v(\" \"),s(\"li\",[t._v(\"Watcher反复注册\")]),t._v(\" \"),s(\"li\",[t._v(\"简化开发api\")])]),t._v(\" \"),s(\"p\",[t._v(\"当然还有很多的很多修改的功能，使用也很简单，但是社区不活跃，连api文档都不完善，对于我们来说只能看源码来开发应用了，也略有麻烦的。有兴趣的开源上 github 看看。 https://github.com/sgroschupf/zkclient\")]),t._v(\" \"),s(\"h4\",{attrs:{id:\"_3-curator\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-curator\"}},[t._v(\"#\")]),t._v(\" 3. Curator\")]),t._v(\" \"),s(\"p\",[t._v(\"Curator 是 Netflix 公司开源的一套 Zookeeper Java 客户端框架。后来成为 Apache 基金会的顶级项目之一 。\")]),t._v(\" \"),s(\"p\",[t._v(\"http://curator.apache.org/\")]),t._v(\" \"),s(\"p\",[t._v(\"目前使用最多的也是 Curator，公司用的也是这个，所以用这个学习记录（基于 2019-07-14 发布的官方版本）\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"http://curator.apache.org/images/ph-quote.png\",alt:\"img\"}})]),t._v(\" \"),s(\"h3\",{attrs:{id:\"maven依赖\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#maven依赖\"}},[t._v(\"#\")]),t._v(\" Maven依赖\")]),t._v(\" \"),s(\"p\",[t._v(\"Curator 由多个 artifact 组成。根据需要选择引入具体的 artifact，但大多数情况下只用引入\"),s(\"code\",[t._v(\"curator-recipes\")]),t._v(\"即可。\")]),t._v(\" \"),s(\"table\",[s(\"thead\",[s(\"tr\",[s(\"th\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"GroupID/Org\")])]),t._v(\" \"),s(\"th\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"ArtifactID/Name\")])]),t._v(\" \"),s(\"th\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"Description\")])])])]),t._v(\" \"),s(\"tbody\",[s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"org.apache.curator\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"curator-recipes\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"所有典型应用场景。需要依赖client和framework，需设置自动获取依赖\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"org.apache.curator\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"curator-async\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"具有O/R建模、迁移和许多其他特性的异步DSL\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"org.apache.curator\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"curator-framework\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"高级 API,建立在客户端之上的，应该会自动将其拉入\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"org.apache.curator\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"curator-client\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"Zookeeper client的封装，用于取代原生的Zookeeper客户端\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"org.apache.curator\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"curator-test\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"包含TestingServer、TestingCluster和一些用于测试的其他工具\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"org.apache.curator\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"curator-examples\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"示例\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"org.apache.curator\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"curator-x-discovery\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"在framework上构建的服务发现实现\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"org.apache.curator\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"curator-x-discovery-server\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"可以使用Curator Discovery的RESTful服务\")])])])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"版本兼容\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#版本兼容\"}},[t._v(\"#\")]),t._v(\" 版本兼容\")]),t._v(\" \"),s(\"p\",[t._v(\"http://curator.apache.org/zk-compatibility.html\")]),t._v(\" \"),s(\"p\",[t._v(\"为了可以直观的看到 Zookeeper 的节点信息，可以考虑弄一个 zk 的管控界面，常见的有 zkui 和 zkweb。\")]),t._v(\" \"),s(\"p\",[t._v(\"zkui：\"),s(\"a\",{attrs:{href:\"https://github.com/DeemOpen/zkui\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"github.com/DeemOpen/zk…\"),s(\"OutboundLink\")],1)]),t._v(\" \"),s(\"p\",[t._v(\"zkweb：\"),s(\"a\",{attrs:{href:\"https://github.com/zhitom/zkweb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"github.com/zhitom/zkwe…\"),s(\"OutboundLink\")],1)]),t._v(\" \"),s(\"p\",[t._v(\"我用的 zkweb ，虽然界面上看起来没有 zkui 精简，但是在层次展示和一些细节上感觉比 zkui 好一点\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"开干\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#开干\"}},[t._v(\"#\")]),t._v(\" 开干\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-xml extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-xml\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"dependency\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"groupId\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"org.apache.curator\"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"groupId\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"artifactId\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"curator-recipes\"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"artifactId\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"version\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"4.3.0\"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"version\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"dependency\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\")])])]),s(\"p\",[t._v(\"建议直接 clone https://github.com/apache/curator ，\"),s(\"code\",[t._v(\"curator-examples\")]),t._v(\" 下边有各种示例，选举、分布式锁、服务发现、缓存。。。\")]),t._v(\" \"),s(\"p\",[t._v(\"Curator使用流式接口风格。\")]),t._v(\" \"),s(\"h4\",{attrs:{id:\"_1-coding\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-coding\"}},[t._v(\"#\")]),t._v(\" 1. coding\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"CuratorTest\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),t._v(\" zookeeperConnectionString \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"10.121.214.95:2181\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"CuratorFramework\")]),t._v(\" client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n     *  创建客户端，两种方式，默认客户端，带参数的客户端创建\\n     */\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Before\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"CreateClient\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"RetryPolicy\")]),t._v(\" retryPolicy \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"ExponentialBackoffRetry\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1000\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"3\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        client \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"CuratorFrameworkFactory\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"newClient\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"zookeeperConnectionString\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" retryPolicy\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"start\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n     * 有了CuratorFramework 实例，就可以使用了,先来创建个空节点\\n     */\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Test\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"createPath\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"try\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"create\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"forPath\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/myPath1\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"create\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"forPath\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/myPath1/myChildren1\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"create\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"forPath\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/myPath1/myChildren2\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('//client.create().forPath(\"/myPath1\",\"myData1\".getBytes());')]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"catch\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" e\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            e\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"printStackTrace\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n     * 创建临时节点\\n     * 和持久节点不同的是，临时节点的生命周期和客户端会话绑定。\\n     * 也就是说，如果客户端会话失效，那么这个节点就会自动被清除掉。\\n     * 注意，这里提到的是会话失效，而非连接断开。另外，在临时节点下面不能创建子节点。\\n     */\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Test\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"createEphemeral\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"create\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"withMode\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"CreateMode\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"EPHEMERAL\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"forPath\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/myPath2\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"myData2\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"getBytes\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n     *  为节点设置数据\\n     */\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Test\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setData\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setData\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"forPath\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/myPath1\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"myData1\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"getBytes\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n     *  列出子节点\\n     */\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Test\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"watchedGetChildren\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"List\")]),s(\"span\",{pre:!0,attrs:{class:\"token generics\"}},[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\" list \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"getChildren\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"watched\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"forPath\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/myPath1\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),t._v(\" s \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" list\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"System\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"out\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"s\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"/**\\n     *  删除节点\\n     *  sguaranteed()：接口是一个保障措施，只要客户端会话有效，\\n     *  那么Curator会在后台持续进行删除操作，直到节点删除成功\\n     *  deletingChildrenIfNeeded()： 删除一个节点，并递归删除其所有子节点\\n     */\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Test\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"guaranteedDelete\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('//client.delete().forPath(\"/myPath1\");')]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('//client.delete().guaranteed().forPath(\"/myPath1\");')]),t._v(\"\\n        client\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"delete\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"deletingChildrenIfNeeded\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"forPath\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/myPath1\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"h2\",{attrs:{id:\"curator-async\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#curator-async\"}},[t._v(\"#\")]),t._v(\" Curator Async\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"what-is-curator-async\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#what-is-curator-async\"}},[t._v(\"#\")]),t._v(\" What Is Curator Async?\")]),t._v(\" \"),s(\"p\",[t._v(\"Curator Async 是一个封装了 \"),s(\"code\",[t._v(\"CuratorFramework\")]),t._v(\"  实例的 \"),s(\"code\",[t._v(\"DSL(Domain-specific language)\")])]),t._v(\" \"),s(\"p\",[t._v(\"完全异步，基于 Java8 的\"),s(\"code\",[t._v(\"CompletionStage\")])]),t._v(\" \"),s(\"p\",[t._v(\"https://curator.apache.org/curator-x-async/index.html\")]),t._v(\" \"),s(\"p\",[t._v(\"https://blog.gmem.cc/apache-curator-study-note\")]),t._v(\" \"),s(\"p\",[t._v(\"pc广告在上海 zk用作配置管理，有可投放的商品包状态变动会通知他们\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"参考\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考\"}},[t._v(\"#\")]),t._v(\" 参考\")]),t._v(\" \"),s(\"p\",[t._v(\"《Zookeeper客户端对比选择》 https://www.cnblogs.com/liangjf/p/8552559.html\")]),t._v(\" \"),s(\"p\",[t._v(\"https://juejin.im/post/5cb1ec81e51d456e3b701871\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"直击面试\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#直击面试\"}},[t._v(\"#\")]),t._v(\" 直击面试\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"p\",[t._v(\"请简述ZooKeeper的选举机制\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"ZooKeeper的监听原理是什么？\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"ZooKeeper的部署方式有哪几种？集群中的角色有哪些？集群最少需要几台机器？\")]),t._v(\" \"),s(\"p\",[t._v(\"部署方式单机模式、集群模式\")]),t._v(\" \"),s(\"p\",[t._v(\"角色：Leader和Follower\")]),t._v(\" \"),s(\"p\",[t._v(\"集群最少需要机器数：3\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"ZooKeeper的常用命令\")]),t._v(\" \"),s(\"p\",[t._v(\"ls create get delete set…\")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);","extractedComments":[]}