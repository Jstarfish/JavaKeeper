{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{588:function(t,s,a){\"use strict\";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"p\",[a(\"img\",{attrs:{src:\"https://img.starfish.ink/mysql/banner-mysql-select.png\",alt:\"\"}})]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://www.kdnuggets.com/wp-content/uploads/ferrer_essential_guide_sql_execution_order_1.png\",alt:\"The Essential Guide to SQL’s Execution Order\"}})]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[a(\"code\",[t._v(\"SQL\")]),t._v(\"的全称是\"),a(\"code\",[t._v(\"Structured Query Language\")]),t._v(\"，翻译后就是\"),a(\"code\",[t._v(\"结构化查询语言\")]),t._v(\"。\")])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"order-by\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#order-by\"}},[t._v(\"#\")]),t._v(\" Order By\")]),t._v(\" \"),a(\"p\",[t._v(\"在开发应用的时候，一定会经常碰到需要根据指定的字段排序来显示结果的需求。\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"CREATE TABLE `t` (\\n  `id` int(11) NOT NULL,\\n  `city` varchar(16) NOT NULL,\\n  `name` varchar(16) NOT NULL,\\n  `age` int(11) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  KEY `city` (`city`)\\n) ENGINE=InnoDB;\\n\")])])]),a(\"p\",[t._v(\"业务需求来了，\")]),t._v(\" \"),a(\"p\",[t._v(\"![](/Users/starfish/Documents/截图/截屏2023-04-19 09.33.52.png)\")]),t._v(\" \"),a(\"p\",[t._v(\"Extra 这个字段中的“Using filesort”表示的就是需要排序，MySQL 会给每个线程分配一块内存用于排序，称为 sort_buffer。\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"mysql> show variables like 'sort_buffer_size';\\n+------------------+--------+\\n| Variable_name    | Value  |\\n+------------------+--------+\\n| sort_buffer_size | 262144 |\\n+------------------+--------+\\n1 row in set (0.00 sec)\\n\")])])]),a(\"h3\",{attrs:{id:\"全字段排序\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#全字段排序\"}},[t._v(\"#\")]),t._v(\" 全字段排序\")]),t._v(\" \"),a(\"p\",[t._v(\"这个语句的大概执行流程是这样的：\")]),t._v(\" \"),a(\"ol\",[a(\"li\",[t._v(\"初始化 sort_buffer，确定放入 name、city、age 这三个字段；\")]),t._v(\" \"),a(\"li\",[t._v(\"从索引 city 找到第一个满足 city='北京’ 条件的主键 id；\")]),t._v(\" \"),a(\"li\",[t._v(\"到主键 id 索引取出整行，取 name、city、age 三个字段的值，存入 sort_buffer 中；\")]),t._v(\" \"),a(\"li\",[t._v(\"从索引 city 取下一个记录的主键 id；\")]),t._v(\" \"),a(\"li\",[t._v(\"重复步骤 3、4 直到 city 的值不满足查询条件为止；\")]),t._v(\" \"),a(\"li\",[t._v(\"对 sort_buffer 中的数据按照字段 name 做快速排序；\")]),t._v(\" \"),a(\"li\",[t._v(\"按照排序结果取前 3 行返回给客户端。\")])]),t._v(\" \"),a(\"p\",[t._v(\"我们暂且把这个排序过程，称为『全字段排序』\")]),t._v(\" \"),a(\"p\",[t._v(\"“按 name 排序”这个动作，可能在内存中完成，也可能需要使用外部排序，这取决于排序所需的内存和参数 sort_buffer_size。\")]),t._v(\" \"),a(\"p\",[t._v(\"sort_buffer_size，就是 MySQL 为排序开辟的内存（sort_buffer）的大小。如果要排序的数据量小于 sort_buffer_size，排序就在内存中完成。但如果排序数据量太大，内存放不下，则不得不利用磁盘临时文件辅助排序。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"rowid-排序\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#rowid-排序\"}},[t._v(\"#\")]),t._v(\" rowid 排序\")]),t._v(\" \"),a(\"p\",[t._v(\"在上面这个算法过程里面，只对原表的数据读了一遍，剩下的操作都是在 sort_buffer 和临时文件中执行的。但这个算法有一个问题，就是如果查询要返回的字段很多的话，那么 sort_buffer 里面要放的字段数太多，这样内存里能够同时放下的行数很少，要分成很多个临时文件，排序的性能会很差。\")]),t._v(\" \"),a(\"p\",[t._v(\"所以如果单行很大，这个方法效率不够好。\")]),t._v(\" \"),a(\"p\",[t._v(\"那么，\"),a(\"strong\",[t._v(\"如果 MySQL 认为排序的单行长度太大会怎么做呢？\")])]),t._v(\" \"),a(\"p\",[t._v(\"接下来，我来修改一个参数，让 MySQL 采用另外一种算法。\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"SET max_length_for_sort_data = 16;\\n\")])])]),a(\"p\",[t._v(\"max_length_for_sort_data，是 MySQL 中专门控制用于排序的行数据的长度的一个参数。它的意思是，如果单行的长度超过这个值，MySQL 就认为单行太大，要换一个算法。\")]),t._v(\" \"),a(\"p\",[t._v(\"city、name、age 这三个字段的定义总长度是 36，我把 max_length_for_sort_data 设置为 16，我们再来看看计算过程有什么改变。\")]),t._v(\" \"),a(\"p\",[t._v(\"新的算法放入 sort_buffer 的字段，只有要排序的列（即 name 字段）和主键 id。\")]),t._v(\" \"),a(\"p\",[t._v(\"但这时，排序的结果就因为少了 city 和 age 字段的值，不能直接返回了，整个执行流程就变成如下所示的样子：\")]),t._v(\" \"),a(\"ol\",[a(\"li\",[t._v(\"初始化 sort_buffer，确定放入两个字段，即 name 和 id；\")]),t._v(\" \"),a(\"li\",[t._v(\"从索引 city 找到第一个满足 city='杭州’条件的主键 id；\")]),t._v(\" \"),a(\"li\",[t._v(\"到主键 id 索引取出整行，取 name、id 这两个字段，存入 sort_buffer 中；\")]),t._v(\" \"),a(\"li\",[t._v(\"从索引 city 取下一个记录的主键 id；\")]),t._v(\" \"),a(\"li\",[t._v(\"重复步骤 3、4 直到不满足 city='杭州’条件为止；\")]),t._v(\" \"),a(\"li\",[t._v(\"对 sort_buffer 中的数据按照字段 name 进行排序；\")]),t._v(\" \"),a(\"li\",[t._v(\"遍历排序结果，取前 3 行，并按照 id 的值回到原表中取出 city、name 和 age 三个字段返回给客户端。\")])]),t._v(\" \"),a(\"p\",[t._v(\"对全字段排序流程你会发现，rowid 排序多访问了一次表 t 的主键索引，就是步骤 7。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"全字段排序-vs-rowid-排序\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#全字段排序-vs-rowid-排序\"}},[t._v(\"#\")]),t._v(\" 全字段排序 VS rowid 排序\")]),t._v(\" \"),a(\"p\",[t._v(\"如果 MySQL 实在是担心排序内存太小，会影响排序效率，才会采用 rowid 排序算法，这样排序过程中一次可以排序更多行，但是需要再回到原表去取数据。\")]),t._v(\" \"),a(\"p\",[t._v(\"如果 MySQL 认为内存足够大，会优先选择全字段排序，把需要的字段都放到 sort_buffer 中，这样排序后就会直接从内存里面返回查询结果了，不用再回到原表去取数据。\")]),t._v(\" \"),a(\"p\",[t._v(\"这也就体现了 MySQL 的一个设计思想：\"),a(\"strong\",[t._v(\"如果内存够，就要多利用内存，尽量减少磁盘访问。\")])]),t._v(\" \"),a(\"p\",[t._v(\"当然，如果我们创建了覆盖索引，就不需要再排序了\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"alter table t add index city_user_age(city, name, age);\\n\")])])]),a(\"p\",[t._v(\"![](/Users/starfish/Documents/截图/截屏2023-04-19 10.21.30.png)\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"常见通用的-join-查询\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#常见通用的-join-查询\"}},[t._v(\"#\")]),t._v(\" 常见通用的 Join 查询\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"sql执行顺序\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#sql执行顺序\"}},[t._v(\"#\")]),t._v(\" SQL执行顺序\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[t._v(\"手写\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"SELECT DISTINCT <select_list>\\nFROM  <left_table> <join_type>\\nJOIN  <right_table> ON <join_condition>\\nWHERE  <where_condition>\\nGROUP BY  <group_by_list>\\nHAVING <having_condition>\\nORDER BY <order_by_condition>\\nLIMIT <limit_number>\\n\")])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"机读\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"FROM  <left_table>\\nON <join_condition>\\n<join_type> JOIN  <right_table> \\nWHERE  <where_condition>\\nGROUP BY  <group_by_list>\\nHAVING <having_condition>\\nSELECT\\nDISTINCT <select_list>\\nORDER BY <order_by_condition>\\nLIMIT <limit_number>\\n\")])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"总结\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://img.starfish.ink/mysql/ferrer_essential_guide_sql_execution_order_6.png\",alt:\"The Essential Guide to SQL’s Execution Order\"}})])])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"join图\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#join图\"}},[t._v(\"#\")]),t._v(\" Join图\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://img.starfish.ink/mysql/sql-joins.jpg\",alt:\"sql-joins\"}})]),t._v(\" \"),a(\"h3\",{attrs:{id:\"demo\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#demo\"}},[t._v(\"#\")]),t._v(\" demo\")]),t._v(\" \"),a(\"h4\",{attrs:{id:\"建表sql\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#建表sql\"}},[t._v(\"#\")]),t._v(\" 建表SQL\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-plsql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-plsql\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"CREATE\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"TABLE\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"tbl_dept\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"id\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INT\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"11\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"NOT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"NULL\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"AUTO_INCREMENT\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"deptName\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VARCHAR\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"30\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"DEFAULT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"NULL\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"locAdd\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VARCHAR\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"40\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"DEFAULT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"NULL\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"PRIMARY\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"KEY\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"id\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENGINE\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INNODB\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"AUTO_INCREMENT\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"DEFAULT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"CHARSET\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"utf8\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"CREATE\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"TABLE\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"id\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INT\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"11\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"NOT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"NULL\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"AUTO_INCREMENT\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"name\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VARCHAR\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"20\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"DEFAULT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"NULL\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INT\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"11\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"DEFAULT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"NULL\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"PRIMARY\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"KEY\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"id\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"KEY\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"fk_dept_id\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n #\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"CONSTRAINT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"fk_dept_id\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"FOREIGN\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"KEY\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"REFERENCES\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"tbl_dept\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),t._v(\"id\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"`\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENGINE\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INNODB\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"AUTO_INCREMENT\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"DEFAULT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"CHARSET\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"utf8\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n \\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_dept\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"deptName\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"locAdd\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'RD'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"11\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_dept\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"deptName\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"locAdd\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'HR'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"12\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_dept\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"deptName\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"locAdd\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'MK'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"13\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_dept\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"deptName\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"locAdd\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'MIS'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"14\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_dept\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"deptName\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"locAdd\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'FD'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"15\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"NAME\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'z3'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"NAME\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'z4'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"NAME\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'z5'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"NAME\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'w5'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"NAME\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'w6'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"NAME\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'s7'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"3\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"NAME\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'s8'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"4\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INSERT\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"INTO\")]),t._v(\" tbl_emp\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"NAME\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"deptId\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"VALUES\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'s9'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"51\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\")])])]),a(\"h4\",{attrs:{id:\"_7种join\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7种join\"}},[t._v(\"#\")]),t._v(\" 7种JOIN\")]),t._v(\" \"),a(\"ol\",[a(\"li\",[a(\"p\",[t._v(\"A、B两表共有\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"select * from tbl_emp a **inner join** tbl_dept b on a.deptId = b.id;\\n\")])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"A、B两表共有+A的独有\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\" select * from tbl_emp a **left join** tbl_dept b on a.deptId = b.id;\\n\")])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"A、B两表共有+B的独有\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\" select * from tbl_emp a **right join** tbl_dept b on a.deptId = b.id;\\n\")])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"A的独有\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"select * from tbl_emp a left join tbl_dept b on a.deptId = b.id where b.id is null; \\n\")])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"B的独有\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"select * from tbl_emp a right join tbl_dept b on a.deptId = b.id where a.deptId is null; \\n\")])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"AB全有\")])])]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"MySQL Full Join的实现 因为MySQL不支持FULL JOIN,替代方法:left join + union(可去除重复数据)+ right join\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"SELECT * FROM tbl_emp A LEFT JOIN tbl_dept B ON A.deptId = B.id\\nUNION\\nSELECT * FROM tbl_emp A RIGHT JOIN tbl_dept B ON A.deptId = B.id\\n\")])])]),a(\"ol\",{attrs:{start:\"7\"}},[a(\"li\",[a(\"p\",[t._v(\"A的独有+B的独有\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-mysql extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"SELECT * FROM tbl_emp A LEFT JOIN tbl_dept B ON A.deptId = B.id WHERE B.`id` IS NULL\\nUNION\\nSELECT * FROM tbl_emp A RIGHT JOIN tbl_dept B ON A.deptId = B.id WHERE A.`deptId` IS NULL;\\n\")])])])])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"count\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#count\"}},[t._v(\"#\")]),t._v(\" count()\")]),t._v(\" \"),a(\"p\",[t._v(\"count() 是一个聚合函数，对于返回的结果集，一行行地判断，如果 count 函数的参数不是 NULL，累计值就加 1，否则不加。最后返回累计值。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"count-的实现方式\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#count-的实现方式\"}},[t._v(\"#\")]),t._v(\" count(*) 的实现方式\")]),t._v(\" \"),a(\"p\",[t._v(\"你首先要明确的是，在不同的 MySQL 引擎中，count(*) 有不同的实现方式。\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"MyISAM 引擎把一个表的总行数存在了磁盘上，因此执行 count(*) 的时候会直接返回这个数，效率很高；\")]),t._v(\" \"),a(\"li\",[t._v(\"而 InnoDB 引擎就麻烦了，它执行 count(*) 的时候，需要把数据一行一行地从引擎里面读出来，然后累积计数。\")])]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"那\"),a(\"strong\",[t._v(\"为什么 InnoDB 不跟 MyISAM 一样，也把数字存起来呢？\")])]),t._v(\" \"),a(\"p\",[t._v(\"这是因为即使是在同一个时刻的多个查询，由于多版本并发控制（MVCC）的原因，InnoDB 表“应该返回多少行”也是不确定的。\")])]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"对于 count(主键 id) 来说\")]),t._v(\"，InnoDB 引擎会遍历整张表，把每一行的 id 值都取出来，返回给 server 层。server 层拿到 id 后，判断是不可能为空的，就按行累加。\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"对于 count(1) 来说\")]),t._v(\"，InnoDB 引擎遍历整张表，但不取值。server 层对于返回的每一行，放一个数字“1”进去，判断是不可能为空的，按行累加。\")]),t._v(\" \"),a(\"p\",[t._v(\"单看这两个用法的差别的话，你能对比出来，count(1) 执行得要比 count(主键 id) 快。因为从引擎返回 id 会涉及到解析数据行，以及拷贝字段值的操作。\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"对于 count(字段) 来说\")]),t._v(\"：\")]),t._v(\" \"),a(\"ol\",[a(\"li\",[t._v(\"如果这个“字段”是定义为 not null 的话，一行行地从记录里面读出这个字段，判断不能为 null，按行累加；\")]),t._v(\" \"),a(\"li\",[t._v(\"如果这个“字段”定义允许为 null，那么执行的时候，判断到有可能是 null，还要把值取出来再判断一下，不是 null 才累加。\")])]),t._v(\" \"),a(\"p\",[t._v(\"按照效率排序的话，count(字段)<count(主键 id)<count(1)≈count(*)，所以我建议你，尽量使用 count(*)\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"reference\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#reference\"}},[t._v(\"#\")]),t._v(\" Reference\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"https://www.kdnuggets.com/the-essential-guide-to-sql-execution-order\")])])])}),[],!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}